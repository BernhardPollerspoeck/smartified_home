2022-11-23 20:40:05.137 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-23 20:40:05.473 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-23 20:40:05.475 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-23 20:40:05.533 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:40:05.535 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:40:05.535 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:40:05.536 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:40:05.537 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:40:05.538 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:40:05.634 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:40:05.657 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.662 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-23 20:40:05.741 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-23 20:40:05.789 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-23 20:40:05.792 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2022-11-23 20:40:05.794 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.799 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.803 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:40:05.811 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:40:05.815 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.817 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.818 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-23 20:40:05.821 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-23 20:40:05.822 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-23 20:40:05.823 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-11-23 20:40:05.824 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.826 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.828 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:40:05.831 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:40:05.832 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.833 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.851 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:40:05.852 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:40:05.853 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.854 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.855 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-23 20:40:05.858 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-23 20:40:05.862 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:40:05.862 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.864 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:05.872 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-11-23 20:40:05.882 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:40:05.976 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-23 20:40:06.031 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-11-23 20:40:06.045 +01:00 [DBG] Hosting starting
2022-11-23 20:40:06.120 +01:00 [INF] Now listening on: http://[::]:5011
2022-11-23 20:40:06.121 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-11-23 20:40:06.121 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-11-23 20:40:06.122 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-11-23 20:40:06.123 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-23 20:40:06.123 +01:00 [INF] Hosting environment: Development
2022-11-23 20:40:06.124 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-11-23 20:40:06.126 +01:00 [DBG] Hosting started
2022-11-23 20:40:30.201 +01:00 [DBG] Connection id "0HMMDHAA394NU" accepted.
2022-11-23 20:40:30.203 +01:00 [DBG] Connection id "0HMMDHAA394NU" started.
2022-11-23 20:40:30.255 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0
2022-11-23 20:40:30.268 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-11-23 20:40:30.294 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub/negotiate'
2022-11-23 20:40:30.295 +01:00 [DBG] Request matched endpoint '/handlerHub/negotiate'
2022-11-23 20:40:30.311 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:40:30.314 +01:00 [INF] Executing endpoint '/handlerHub/negotiate'
2022-11-23 20:40:30.332 +01:00 [DBG] New connection b2CCWyfbZrMs7y03Y7XzTg created.
2022-11-23 20:40:30.342 +01:00 [DBG] Sending negotiation response.
2022-11-23 20:40:30.345 +01:00 [INF] Executed endpoint '/handlerHub/negotiate'
2022-11-23 20:40:30.346 +01:00 [DBG] Connection id "0HMMDHAA394NU" completed keep alive response.
2022-11-23 20:40:30.349 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 95.9047ms
2022-11-23 20:40:30.374 +01:00 [DBG] Connection id "0HMMDHAA394NV" accepted.
2022-11-23 20:40:30.375 +01:00 [DBG] Connection id "0HMMDHAA394NV" started.
2022-11-23 20:40:30.379 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/handlerHub?id=KPP4qXL7ZP-h7-SGPrLGEQ - -
2022-11-23 20:40:30.380 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub'
2022-11-23 20:40:30.381 +01:00 [DBG] Request matched endpoint '/handlerHub'
2022-11-23 20:40:30.391 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:40:30.393 +01:00 [INF] Executing endpoint '/handlerHub'
2022-11-23 20:40:30.398 +01:00 [DBG] Establishing new connection.
2022-11-23 20:40:30.401 +01:00 [DBG] OnConnectedAsync started.
2022-11-23 20:40:30.404 +01:00 [DBG] Socket opened using Sub-Protocol: 'null'.
2022-11-23 20:40:30.431 +01:00 [DBG] Found protocol implementation for requested protocol: json.
2022-11-23 20:40:30.433 +01:00 [DBG] Completed connection handshake. Using HubProtocol 'json'.
2022-11-23 20:40:30.474 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:40:30.494 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:40:30.519 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:40:30.522 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:40:30.525 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:40:30.531 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:40:30.541 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:30.544 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:30.545 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:40:30.553 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:40:30.576 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:40:30.576 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:40:30.586 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:40:30.593 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:40:30.604 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:40:30.608 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:40:30.611 +01:00 [DBG] Committing transaction.
2022-11-23 20:40:30.657 +01:00 [DBG] Committed transaction.
2022-11-23 20:40:30.659 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:30.660 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:30.662 +01:00 [DBG] Disposing transaction.
2022-11-23 20:40:30.668 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:40:30.670 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:40:30.672 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:40:30.690 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ReportHandlerType", Arguments: [ 0, Shelly ], StreamIds: [  ] }.
2022-11-23 20:40:30.697 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:40:30.744 +01:00 [DBG] Compiling query expression: 
'DbSet<ElementHandler>()
    .Include(h => h.HomeElements)
    .FirstOrDefault(h => h.Id == __handlerId_0 && (int)h.HandlerType == (int)__handlerType_1)'
2022-11-23 20:40:30.768 +01:00 [DBG] Including navigation: 'ElementHandler.HomeElements'.
2022-11-23 20:40:30.880 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ElementHandler>(
    asyncEnumerable: new SingleQueryingEnumerable<ElementHandler>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ElementHandler.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ElementHandler.Connected (bool) Required, 1], [Property: ElementHandler.HandlerType (EHandlerType) Required, 2], [Property: ElementHandler.Name (string) Required, 3], [Property: ElementHandler.SettingsData (string), 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: HomeElement.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: HomeElement.ConnectionInfo (string), 6], [Property: HomeElement.ConnectionValidated (bool) Required, 7], [Property: HomeElement.ElementHandlerId (no field, int) Shadow Required FK Index, 8], [Property: HomeElement.ElementType (EElementType) Required, 9], [Property: HomeElement.Name (string) Required, 10], [Property: HomeElement.SettingsData (string), 11], [Property: HomeElement.StateData (string), 12], [Property: HomeElement.StateTimestamp (DateTime?), 13] }
                3 -> 5
            SELECT t.Id, t.Connected, t.HandlerType, t.Name, t.SettingsData, e0.Id, e0.ConnectionInfo, e0.ConnectionValidated, e0.ElementHandlerId, e0.ElementType, e0.Name, e0.SettingsData, e0.StateData, e0.StateTimestamp
            FROM 
            (
                SELECT TOP(1) e.Id, e.Connected, e.HandlerType, e.Name, e.SettingsData
                FROM ElementHandlers AS e
                WHERE (e.Id == @__handlerId_0) && (e.HandlerType == @__handlerType_1)
            ) AS t
            LEFT JOIN Elements AS e0 ON t.Id == e0.ElementHandlerId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementHandler>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:40:30.899 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:40:30.900 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:40:30.902 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:30.906 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:30.908 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:40:30.915 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:40:30.919 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:40:30.919 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:30.920 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:40:30.922 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:41:27.848 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-23 20:41:28.073 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-23 20:41:28.075 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-23 20:41:28.125 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:41:28.126 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:41:28.127 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:41:28.128 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:41:28.128 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:41:28.129 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:41:28.221 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:41:28.236 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.241 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-23 20:41:28.295 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-23 20:41:28.340 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-23 20:41:28.344 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2022-11-23 20:41:28.346 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.354 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.358 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:41:28.367 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:41:28.372 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.374 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.375 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-23 20:41:28.378 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-23 20:41:28.379 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-23 20:41:28.381 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2022-11-23 20:41:28.384 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.391 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.392 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:41:28.403 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:41:28.410 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.414 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.436 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:41:28.437 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:41:28.438 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.439 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.440 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-23 20:41:28.443 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-23 20:41:28.447 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:41:28.448 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.449 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:28.455 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-11-23 20:41:28.466 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:41:28.516 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-23 20:41:28.564 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-11-23 20:41:28.579 +01:00 [DBG] Hosting starting
2022-11-23 20:41:28.624 +01:00 [INF] Now listening on: http://[::]:5011
2022-11-23 20:41:28.625 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-11-23 20:41:28.626 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-11-23 20:41:28.627 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-11-23 20:41:28.627 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-23 20:41:28.628 +01:00 [INF] Hosting environment: Development
2022-11-23 20:41:28.628 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-11-23 20:41:28.630 +01:00 [DBG] Hosting started
2022-11-23 20:41:40.164 +01:00 [DBG] Connection id "0HMMDHAUUG9D8" accepted.
2022-11-23 20:41:40.165 +01:00 [DBG] Connection id "0HMMDHAUUG9D8" started.
2022-11-23 20:41:40.194 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0
2022-11-23 20:41:40.202 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-11-23 20:41:40.219 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub/negotiate'
2022-11-23 20:41:40.220 +01:00 [DBG] Request matched endpoint '/handlerHub/negotiate'
2022-11-23 20:41:40.230 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:41:40.233 +01:00 [INF] Executing endpoint '/handlerHub/negotiate'
2022-11-23 20:41:40.242 +01:00 [DBG] New connection hi0ZgpNvXsZhHqQu03hfDw created.
2022-11-23 20:41:40.246 +01:00 [DBG] Sending negotiation response.
2022-11-23 20:41:40.248 +01:00 [INF] Executed endpoint '/handlerHub/negotiate'
2022-11-23 20:41:40.248 +01:00 [DBG] Connection id "0HMMDHAUUG9D8" completed keep alive response.
2022-11-23 20:41:40.251 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 58.4054ms
2022-11-23 20:41:40.270 +01:00 [DBG] Connection id "0HMMDHAUUG9D9" accepted.
2022-11-23 20:41:40.271 +01:00 [DBG] Connection id "0HMMDHAUUG9D9" started.
2022-11-23 20:41:40.273 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/handlerHub?id=SUj1dbc8N50i_SnPx93AYA - -
2022-11-23 20:41:40.275 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub'
2022-11-23 20:41:40.276 +01:00 [DBG] Request matched endpoint '/handlerHub'
2022-11-23 20:41:40.281 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:41:40.282 +01:00 [INF] Executing endpoint '/handlerHub'
2022-11-23 20:41:40.288 +01:00 [DBG] Establishing new connection.
2022-11-23 20:41:40.290 +01:00 [DBG] OnConnectedAsync started.
2022-11-23 20:41:40.293 +01:00 [DBG] Socket opened using Sub-Protocol: 'null'.
2022-11-23 20:41:40.318 +01:00 [DBG] Found protocol implementation for requested protocol: json.
2022-11-23 20:41:40.319 +01:00 [DBG] Completed connection handshake. Using HubProtocol 'json'.
2022-11-23 20:41:40.359 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:41:40.379 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:41:40.408 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:41:40.411 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:41:40.414 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:41:40.421 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:41:40.432 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:40.435 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:40.436 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:41:40.444 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:41:40.474 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:41:40.475 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-23 20:41:40.492 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:41:40.541 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:41:40.556 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:41:40.560 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:41:40.563 +01:00 [DBG] Committing transaction.
2022-11-23 20:41:40.580 +01:00 [DBG] Committed transaction.
2022-11-23 20:41:40.583 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:40.584 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:40.587 +01:00 [DBG] Disposing transaction.
2022-11-23 20:41:40.596 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:41:40.601 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:41:40.604 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:41:40.626 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ReportHandlerType", Arguments: [ 1, Shelly ], StreamIds: [  ] }.
2022-11-23 20:41:40.635 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:41:40.677 +01:00 [DBG] Compiling query expression: 
'DbSet<ElementHandler>()
    .Include(h => h.HomeElements)
    .FirstOrDefault(h => h.Id == __handlerId_0 && (int)h.HandlerType == (int)__handlerType_1)'
2022-11-23 20:41:40.705 +01:00 [DBG] Including navigation: 'ElementHandler.HomeElements'.
2022-11-23 20:41:40.868 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ElementHandler>(
    asyncEnumerable: new SingleQueryingEnumerable<ElementHandler>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ElementHandler.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ElementHandler.Connected (bool) Required, 1], [Property: ElementHandler.HandlerType (EHandlerType) Required, 2], [Property: ElementHandler.Name (string) Required, 3], [Property: ElementHandler.SettingsData (string), 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: HomeElement.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: HomeElement.ConnectionInfo (string), 6], [Property: HomeElement.ConnectionValidated (bool) Required, 7], [Property: HomeElement.ElementHandlerId (no field, int) Shadow Required FK Index, 8], [Property: HomeElement.ElementType (EElementType) Required, 9], [Property: HomeElement.Name (string) Required, 10], [Property: HomeElement.SettingsData (string), 11], [Property: HomeElement.StateData (string), 12], [Property: HomeElement.StateTimestamp (DateTime?), 13] }
                3 -> 5
            SELECT t.Id, t.Connected, t.HandlerType, t.Name, t.SettingsData, e0.Id, e0.ConnectionInfo, e0.ConnectionValidated, e0.ElementHandlerId, e0.ElementType, e0.Name, e0.SettingsData, e0.StateData, e0.StateTimestamp
            FROM 
            (
                SELECT TOP(1) e.Id, e.Connected, e.HandlerType, e.Name, e.SettingsData
                FROM ElementHandlers AS e
                WHERE (e.Id == @__handlerId_0) && (e.HandlerType == @__handlerType_1)
            ) AS t
            LEFT JOIN Elements AS e0 ON t.Id == e0.ElementHandlerId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementHandler>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:41:40.888 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:41:40.889 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:41:40.891 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:40.896 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:40.897 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:41:40.903 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:41:40.914 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:41:40.926 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:41:40.927 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:40.928 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:40.931 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:41:40.933 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:41:40.934 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:41:40.935 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:41:40.939 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:41:40.941 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:41:40.946 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:41:40.947 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:40.948 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:40.949 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:41:40.954 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:41:40.995 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:41:40.998 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:41:40.998 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:41:40.999 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:41:41.002 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:41:41.004 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:41:41.006 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:41:41.007 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:41:41.009 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:41:41.013 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:41:41.016 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:41:41.017 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:41:41.018 +01:00 [DBG] Committing transaction.
2022-11-23 20:41:41.048 +01:00 [DBG] Committed transaction.
2022-11-23 20:41:41.049 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:41.051 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:41:41.052 +01:00 [DBG] Disposing transaction.
2022-11-23 20:41:41.053 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:41:41.057 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:41:41.059 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:41:41.075 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:42:23.622 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" accepted.
2022-11-23 20:42:23.623 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" started.
2022-11-23 20:42:23.624 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Element application/json;+charset=utf-8 79
2022-11-23 20:42:23.624 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:42:23.626 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Post (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:42:23.626 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:42:23.628 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:42:23.953 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:42:23.956 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __tokenUserId_Value_0)'
2022-11-23 20:42:23.958 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-11-23 20:42:23.969 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__tokenUserId_Value_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:42:23.974 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:42:23.974 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:42:23.975 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:23.976 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:23.980 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:42:23.986 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:42:23.992 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:24.001 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:24.013 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:42:24.014 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:24.015 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:24.113 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:42:24.131 +01:00 [INF] Route matched with {action = "Post", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateElementDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:42:24.134 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:42:24.135 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:42:24.136 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:42:24.138 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:42:24.138 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:42:24.141 +01:00 [INF] Authorization failed for the request at filter 'bp.net.Auth.Server.Attributes.AuthorizeAttribute'.
2022-11-23 20:42:24.144 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-11-23 20:42:24.149 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Post (smart.api) in 8.505ms
2022-11-23 20:42:24.150 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:42:24.153 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" completed keep alive response.
2022-11-23 20:42:24.153 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:42:24.154 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Element application/json;+charset=utf-8 79 - 401 - application/json;+charset=utf-8 530.3921ms
2022-11-23 20:42:24.155 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000001": started reading request body.
2022-11-23 20:42:24.156 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000001": done reading request body.
2022-11-23 20:42:26.495 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51
2022-11-23 20:42:26.496 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-23 20:42:26.497 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-23 20:42:26.500 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-23 20:42:26.501 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:42:26.502 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-23 20:42:26.505 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-23 20:42:26.508 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:42:26.509 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:42:26.509 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:42:26.511 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:42:26.512 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:42:26.513 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-23 20:42:26.514 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-23 20:42:26.518 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-23 20:42:26.521 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-23 20:42:26.524 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:42:26.526 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000002": started reading request body.
2022-11-23 20:42:26.527 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000002": done reading request body.
2022-11-23 20:42:26.530 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-23 20:42:26.531 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-23 20:42:26.532 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-23 20:42:26.533 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-23 20:42:26.541 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-23 20:42:26.571 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:42:26.573 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.RefreshTokens)
    .FirstOrDefault(x => x.Username == __model_Username_0)'
2022-11-23 20:42:26.574 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-11-23 20:42:26.579 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Username == @__model_Username_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:42:26.587 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:42:26.587 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:42:26.588 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:26.590 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:26.591 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:42:26.596 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:42:26.600 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:26.601 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:26.603 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:42:26.603 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:26.604 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:26.897 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:26.898 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:42:26.899 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:42:26.903 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:26.907 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:26.909 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:26.913 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:42:26.914 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:26.916 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:26.917 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:42:26.919 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:42:26.920 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:42:26.921 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:42:26.922 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:42:26.923 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:42:26.987 +01:00 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:42:26.991 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:42:26.992 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:42:26.993 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:42:26.994 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:42:26.994 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-23 20:42:26.997 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-23 20:42:26.999 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:42:26.999 +01:00 [DBG] Committing transaction.
2022-11-23 20:42:27.007 +01:00 [DBG] Committed transaction.
2022-11-23 20:42:27.008 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:27.009 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:27.009 +01:00 [DBG] Disposing transaction.
2022-11-23 20:42:27.010 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:27.012 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:27.013 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:42:27.017 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-23 20:42:27.020 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-23 20:42:27.020 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-23 20:42:27.021 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-23 20:42:27.022 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-23 20:42:27.023 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-23 20:42:27.029 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 516.8668ms
2022-11-23 20:42:27.031 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-23 20:42:27.032 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" completed keep alive response.
2022-11-23 20:42:27.033 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:42:27.033 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51 - 200 - application/json;+charset=utf-8 538.3966ms
2022-11-23 20:42:28.396 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Element application/json;+charset=utf-8 79
2022-11-23 20:42:28.397 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:42:28.398 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Post (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:42:28.398 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:42:28.399 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:42:28.401 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:42:28.404 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:42:28.405 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:42:28.406 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.407 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.408 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:42:28.414 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:42:28.416 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:28.417 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:28.418 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:42:28.419 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:42:28.420 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.421 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.425 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __id_0)'
2022-11-23 20:42:28.428 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-11-23 20:42:28.433 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__id_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:42:28.437 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:42:28.437 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:42:28.438 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.440 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.441 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:42:28.446 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:42:28.448 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:42:28.448 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.449 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.450 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:42:28.451 +01:00 [INF] Route matched with {action = "Post", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateElementDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:42:28.452 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:42:28.453 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:42:28.454 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:42:28.455 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:42:28.456 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:42:28.457 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:42:28.458 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:42:28.461 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto' ...
2022-11-23 20:42:28.462 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto' using the name '' in request data ...
2022-11-23 20:42:28.462 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:42:28.469 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000003": started reading request body.
2022-11-23 20:42:28.469 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000003": done reading request body.
2022-11-23 20:42:28.472 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.CreateElementDto'
2022-11-23 20:42:28.473 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:42:28.475 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:42:28.476 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateElementDto' ...
2022-11-23 20:42:28.480 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:42:28.482 +01:00 [DBG] Compiling query expression: 
'DbSet<ElementHandler>()
    .FirstOrDefault(h => (int)h.HandlerType == (int)__dto_HandlerType_0)'
2022-11-23 20:42:28.485 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ElementHandler>(
    asyncEnumerable: new SingleQueryingEnumerable<ElementHandler>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ElementHandler.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ElementHandler.Connected (bool) Required, 1], [Property: ElementHandler.HandlerType (EHandlerType) Required, 2], [Property: ElementHandler.Name (string) Required, 3], [Property: ElementHandler.SettingsData (string), 4] }
            SELECT TOP(1) e.Id, e.Connected, e.HandlerType, e.Name, e.SettingsData
            FROM ElementHandlers AS e
            WHERE e.HandlerType == @__dto_HandlerType_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementHandler>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:42:28.487 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:42:28.488 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:42:28.490 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.492 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.493 +01:00 [DBG] Executing DbCommand [Parameters=[@__dto_HandlerType_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`HandlerType` = @__dto_HandlerType_0
LIMIT 1
2022-11-23 20:42:28.495 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_HandlerType_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`HandlerType` = @__dto_HandlerType_0
LIMIT 1
2022-11-23 20:42:28.497 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:42:28.498 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.498 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:42:28.523 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Post (smart.api) in 66.3371ms
2022-11-23 20:42:28.525 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:42:28.589 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" completed keep alive response.
2022-11-23 20:42:28.589 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:42:28.590 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Element application/json;+charset=utf-8 79 - 400 - application/json 194.2442ms
2022-11-23 20:42:55.173 +01:00 [DBG] Connection id "0HMMDHAUUG9D8" received FIN.
2022-11-23 20:42:55.175 +01:00 [DBG] Connection id "0HMMDHAUUG9D8" sending FIN because: "The client closed the connection."
2022-11-23 20:42:55.176 +01:00 [DBG] Connection id "0HMMDHAUUG9D8" disconnecting.
2022-11-23 20:42:55.177 +01:00 [DBG] Connection id "0HMMDHAUUG9D8" stopped.
2022-11-23 20:43:05.516 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Element application/json;+charset=utf-8 99
2022-11-23 20:43:05.517 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:43:05.518 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Post (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:43:05.519 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:43:05.519 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:43:05.520 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:43:05.522 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:05.522 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:43:05.523 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.525 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.526 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:05.530 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:05.533 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:05.534 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:05.535 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:05.536 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:05.537 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.538 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.539 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:05.539 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:43:05.540 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.541 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.542 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:05.545 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:05.549 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:05.550 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.551 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.551 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:43:05.552 +01:00 [INF] Route matched with {action = "Post", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateElementDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:43:05.553 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:43:05.554 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:43:05.555 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:43:05.556 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:43:05.557 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:43:05.558 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:43:05.558 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:43:05.559 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto' ...
2022-11-23 20:43:05.560 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto' using the name '' in request data ...
2022-11-23 20:43:05.561 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:43:05.561 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000004": started reading request body.
2022-11-23 20:43:05.564 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000004": done reading request body.
2022-11-23 20:43:05.567 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.CreateElementDto'
2022-11-23 20:43:05.567 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:43:05.568 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:43:05.569 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateElementDto' ...
2022-11-23 20:43:05.570 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:43:05.571 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:05.572 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:43:05.572 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.574 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.575 +01:00 [DBG] Executing DbCommand [Parameters=[@__dto_HandlerType_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`HandlerType` = @__dto_HandlerType_0
LIMIT 1
2022-11-23 20:43:05.577 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_HandlerType_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`HandlerType` = @__dto_HandlerType_0
LIMIT 1
2022-11-23 20:43:05.580 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:05.581 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.581 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:05.599 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Post (smart.api) in 41.5279ms
2022-11-23 20:43:05.600 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:43:05.649 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" completed keep alive response.
2022-11-23 20:43:05.650 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:43:05.651 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Element application/json;+charset=utf-8 99 - 400 - application/json 134.3732ms
2022-11-23 20:43:21.778 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Element application/json;+charset=utf-8 99
2022-11-23 20:43:21.778 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:43:21.779 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Post (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:43:21.780 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:43:21.781 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:43:21.782 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:43:21.783 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:21.784 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:43:21.784 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:21.786 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:21.787 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:21.791 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:21.794 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:21.795 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:21.796 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:21.797 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:21.798 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:21.798 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:21.800 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:21.800 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:43:21.801 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:21.802 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:21.803 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:21.806 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:21.810 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:21.811 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:21.811 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:21.812 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:43:21.813 +01:00 [INF] Route matched with {action = "Post", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateElementDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:43:21.814 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:43:21.815 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:43:21.816 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:43:21.817 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:43:21.818 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:43:21.819 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:43:21.820 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:43:21.821 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto' ...
2022-11-23 20:43:21.822 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto' using the name '' in request data ...
2022-11-23 20:43:21.822 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:43:21.825 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000005": started reading request body.
2022-11-23 20:43:21.826 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000005": done reading request body.
2022-11-23 20:43:21.827 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.CreateElementDto'
2022-11-23 20:43:21.828 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:43:21.828 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:43:21.829 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateElementDto' ...
2022-11-23 20:43:21.830 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:43:33.316 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:33.319 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-11-23 20:43:33.320 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:33.322 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:33.323 +01:00 [DBG] Executing DbCommand [Parameters=[@__dto_HandlerType_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`HandlerType` = @__dto_HandlerType_0
LIMIT 1
2022-11-23 20:43:33.326 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_HandlerType_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`HandlerType` = @__dto_HandlerType_0
LIMIT 1
2022-11-23 20:43:33.328 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:33.329 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:33.330 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:33.347 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Post (smart.api) in 11528.3831ms
2022-11-23 20:43:33.349 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:43:33.398 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" completed keep alive response.
2022-11-23 20:43:33.399 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:43:33.402 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Element application/json;+charset=utf-8 99 - 400 - application/json 11623.9857ms
2022-11-23 20:43:37.237 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Element application/json;+charset=utf-8 99
2022-11-23 20:43:37.238 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:43:37.239 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Post (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:43:37.241 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:43:37.242 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:43:37.243 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:43:37.245 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:37.246 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:43:37.246 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:37.248 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:37.249 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:37.253 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:37.255 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:37.256 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:37.257 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:37.258 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:37.259 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:37.260 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:37.261 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:37.262 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:43:37.262 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:37.264 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:37.265 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:37.268 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:43:37.271 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:37.271 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:37.272 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:37.273 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:43:37.274 +01:00 [INF] Route matched with {action = "Post", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateElementDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:43:37.275 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:43:37.276 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:43:37.277 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:43:37.278 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:43:37.279 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:43:37.280 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:43:37.280 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:43:37.281 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto' ...
2022-11-23 20:43:37.282 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto' using the name '' in request data ...
2022-11-23 20:43:37.283 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:43:37.286 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000006": started reading request body.
2022-11-23 20:43:37.287 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000006": done reading request body.
2022-11-23 20:43:37.289 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.CreateElementDto'
2022-11-23 20:43:37.290 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:43:37.291 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:43:37.292 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateElementDto' ...
2022-11-23 20:43:37.293 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateElementDto'.
2022-11-23 20:43:40.535 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:40.536 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:43:40.537 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:40.539 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:40.540 +01:00 [DBG] Executing DbCommand [Parameters=[@__dto_HandlerType_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`HandlerType` = @__dto_HandlerType_0
LIMIT 1
2022-11-23 20:43:40.543 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_HandlerType_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`HandlerType` = @__dto_HandlerType_0
LIMIT 1
2022-11-23 20:43:40.544 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:40.546 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:40.547 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:40.547 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:40.549 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.HomeElement'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:40.561 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:40.563 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:40.565 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:40.566 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:43:40.567 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:43:40.570 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:43:40.571 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:40.572 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:40.573 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:43:40.575 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:43:40.576 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:43:40.577 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:40.578 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:43:40.579 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Elements` (`ConnectionInfo`, `ConnectionValidated`, `ElementHandlerId`, `ElementType`, `Name`, `SettingsData`, `StateData`, `StateTimestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `Elements`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:43:40.583 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Elements` (`ConnectionInfo`, `ConnectionValidated`, `ElementHandlerId`, `ElementType`, `Name`, `SettingsData`, `StateData`, `StateTimestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `Elements`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:43:40.585 +01:00 [DBG] The foreign key property 'HomeElement.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:43:40.587 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:40.588 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:43:40.588 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:43:40.589 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:43:40.656 +01:00 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:43:40.658 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:43:40.659 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:43:40.659 +01:00 [DBG] Committing transaction.
2022-11-23 20:43:40.665 +01:00 [DBG] Committed transaction.
2022-11-23 20:43:40.666 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:40.667 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:43:40.667 +01:00 [DBG] Disposing transaction.
2022-11-23 20:43:40.669 +01:00 [DBG] An entity of type 'HomeElement' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:40.670 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:43:40.672 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:43:40.677 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-11-23 20:43:40.677 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Post (smart.api) in 3397.754ms
2022-11-23 20:43:40.678 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Post (smart.api)'
2022-11-23 20:43:40.679 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" completed keep alive response.
2022-11-23 20:43:40.680 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:43:40.681 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Element application/json;+charset=utf-8 99 - 200 0 - 3443.4256ms
2022-11-23 20:44:11.604 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/Element - -
2022-11-23 20:44:11.605 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:44:11.605 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Get (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:44:11.606 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Get (smart.api)'
2022-11-23 20:44:11.607 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:44:11.608 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:44:11.610 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:44:11.610 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:44:11.611 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.613 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.613 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:11.617 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:11.621 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:11.622 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:11.623 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:11.625 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:44:11.626 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.627 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.628 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:44:11.629 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:44:11.629 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.631 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.632 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:11.638 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:11.640 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:44:11.640 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.641 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.642 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Get (smart.api)'
2022-11-23 20:44:11.643 +01:00 [INF] Route matched with {action = "Get", controller = "Element"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:44:11.645 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:44:11.645 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:44:11.646 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:44:11.648 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:44:11.648 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:44:11.649 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:44:11.652 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:44:11.656 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-23 20:44:11.657 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-23 20:44:11.658 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-23 20:44:11.658 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-23 20:44:11.659 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-23 20:44:11.660 +01:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[smart.contract.ElementDto, smart.contract, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-23 20:44:11.665 +01:00 [DBG] Compiling query expression: 
'DbSet<HomeElement>()
    .Select(e => new ElementDto(
        e.Id, 
        e.Name, 
        e.ElementType, 
        e.ConnectionValidated
    ))'
2022-11-23 20:44:11.670 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ElementDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
        SELECT e.Id, e.Name, e.ElementType, e.ConnectionValidated
        FROM Elements AS e), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementDto>, 
    smart.database.SmartContext, 
    False, 
    False, 
    True
)'
2022-11-23 20:44:11.672 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:44:11.673 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:44:11.673 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.675 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.676 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Name`, `e`.`ElementType`, `e`.`ConnectionValidated`
FROM `Elements` AS `e`
2022-11-23 20:44:11.678 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Name`, `e`.`ElementType`, `e`.`ConnectionValidated`
FROM `Elements` AS `e`
2022-11-23 20:44:11.682 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:44:11.683 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.684 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:11.686 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Get (smart.api) in 36.4801ms
2022-11-23 20:44:11.686 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Get (smart.api)'
2022-11-23 20:44:11.687 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" completed keep alive response.
2022-11-23 20:44:11.688 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:44:11.689 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/Element - - - 200 - application/json;+charset=utf-8 84.7833ms
2022-11-23 20:44:26.874 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 34
2022-11-23 20:44:26.874 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:44:26.875 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Put (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:44:26.876 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:44:26.877 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:44:26.878 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:44:26.879 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:44:26.880 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:44:26.881 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.882 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.883 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:26.887 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:26.890 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:26.891 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:26.892 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:26.893 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:44:26.894 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.894 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.896 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:44:26.896 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:44:26.897 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.899 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.899 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:26.904 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:26.907 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:44:26.907 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.908 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.909 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:44:26.912 +01:00 [INF] Route matched with {action = "Put", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(smart.contract.ElementCommandDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:44:26.913 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:44:26.914 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:44:26.915 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:44:26.917 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:44:26.919 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:44:26.920 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:44:26.921 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:44:26.922 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto' ...
2022-11-23 20:44:26.923 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto' using the name '' in request data ...
2022-11-23 20:44:26.924 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:44:26.925 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000008": started reading request body.
2022-11-23 20:44:26.925 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000008": done reading request body.
2022-11-23 20:44:26.928 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.ElementCommandDto'
2022-11-23 20:44:26.928 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:44:26.929 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:44:26.930 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.ElementCommandDto' ...
2022-11-23 20:44:26.933 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:44:26.935 +01:00 [DBG] Compiling query expression: 
'DbSet<ElementHandler>()
    .Include(h => h.HomeElements)
    .FirstOrDefault(h => h.HomeElements
        .Any(e => e.Id == __dto_Id_0))'
2022-11-23 20:44:26.938 +01:00 [DBG] Including navigation: 'ElementHandler.HomeElements'.
2022-11-23 20:44:26.944 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ElementHandler>(
    asyncEnumerable: new SingleQueryingEnumerable<ElementHandler>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ElementHandler.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ElementHandler.Connected (bool) Required, 1], [Property: ElementHandler.HandlerType (EHandlerType) Required, 2], [Property: ElementHandler.Name (string) Required, 3], [Property: ElementHandler.SettingsData (string), 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: HomeElement.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: HomeElement.ConnectionInfo (string), 6], [Property: HomeElement.ConnectionValidated (bool) Required, 7], [Property: HomeElement.ElementHandlerId (no field, int) Shadow Required FK Index, 8], [Property: HomeElement.ElementType (EElementType) Required, 9], [Property: HomeElement.Name (string) Required, 10], [Property: HomeElement.SettingsData (string), 11], [Property: HomeElement.StateData (string), 12], [Property: HomeElement.StateTimestamp (DateTime?), 13] }
                3 -> 5
            SELECT t.Id, t.Connected, t.HandlerType, t.Name, t.SettingsData, e1.Id, e1.ConnectionInfo, e1.ConnectionValidated, e1.ElementHandlerId, e1.ElementType, e1.Name, e1.SettingsData, e1.StateData, e1.StateTimestamp
            FROM 
            (
                SELECT TOP(1) e.Id, e.Connected, e.HandlerType, e.Name, e.SettingsData
                FROM ElementHandlers AS e
                WHERE EXISTS (
                    SELECT 1
                    FROM Elements AS e0
                    WHERE ((e.Id != NULL) && (e.Id == e0.ElementHandlerId)) && (e0.Id == @__dto_Id_0))
            ) AS t
            LEFT JOIN Elements AS e1 ON t.Id == e1.ElementHandlerId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementHandler>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:44:26.953 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:44:26.954 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:44:26.955 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.956 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.957 +01:00 [DBG] Executing DbCommand [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e1`.`Id`, `e1`.`ConnectionInfo`, `e1`.`ConnectionValidated`, `e1`.`ElementHandlerId`, `e1`.`ElementType`, `e1`.`Name`, `e1`.`SettingsData`, `e1`.`StateData`, `e1`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE EXISTS (
        SELECT 1
        FROM `Elements` AS `e0`
        WHERE (`e`.`Id` = `e0`.`ElementHandlerId`) AND (`e0`.`Id` = @__dto_Id_0))
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e1` ON `t`.`Id` = `e1`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:44:26.962 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e1`.`Id`, `e1`.`ConnectionInfo`, `e1`.`ConnectionValidated`, `e1`.`ElementHandlerId`, `e1`.`ElementType`, `e1`.`Name`, `e1`.`SettingsData`, `e1`.`StateData`, `e1`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE EXISTS (
        SELECT 1
        FROM `Elements` AS `e0`
        WHERE (`e`.`Id` = `e0`.`ElementHandlerId`) AND (`e0`.`Id` = @__dto_Id_0))
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e1` ON `t`.`Id` = `e1`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:44:26.966 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:44:26.967 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.968 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:26.986 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Put (smart.api) in 66.3141ms
2022-11-23 20:44:26.987 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:44:27.033 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" completed keep alive response.
2022-11-23 20:44:27.034 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:44:27.035 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 34 - 400 - application/json 161.4280ms
2022-11-23 20:44:54.000 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 34
2022-11-23 20:44:54.001 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:44:54.002 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Put (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:44:54.003 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:44:54.003 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:44:54.005 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:44:54.006 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:44:54.006 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:44:54.007 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.009 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.012 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:54.015 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:54.018 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:54.018 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:54.019 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:54.023 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:44:54.024 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.025 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.026 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:44:54.026 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:44:54.027 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.029 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.030 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:54.033 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:44:54.035 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:44:54.035 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.038 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.039 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:44:54.040 +01:00 [INF] Route matched with {action = "Put", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(smart.contract.ElementCommandDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:44:54.042 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:44:54.043 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:44:54.044 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:44:54.046 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:44:54.047 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:44:54.048 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:44:54.049 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:44:54.050 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto' ...
2022-11-23 20:44:54.050 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto' using the name '' in request data ...
2022-11-23 20:44:54.052 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:44:54.054 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000009": started reading request body.
2022-11-23 20:44:54.055 +01:00 [DBG] Connection id "0HMMDHAUUG9DA", Request id "0HMMDHAUUG9DA:00000009": done reading request body.
2022-11-23 20:44:54.056 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.ElementCommandDto'
2022-11-23 20:44:54.057 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:44:54.058 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:44:54.059 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.ElementCommandDto' ...
2022-11-23 20:44:54.061 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:44:54.062 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:44:54.063 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:44:54.064 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.065 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.066 +01:00 [DBG] Executing DbCommand [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e1`.`Id`, `e1`.`ConnectionInfo`, `e1`.`ConnectionValidated`, `e1`.`ElementHandlerId`, `e1`.`ElementType`, `e1`.`Name`, `e1`.`SettingsData`, `e1`.`StateData`, `e1`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE EXISTS (
        SELECT 1
        FROM `Elements` AS `e0`
        WHERE (`e`.`Id` = `e0`.`ElementHandlerId`) AND (`e0`.`Id` = @__dto_Id_0))
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e1` ON `t`.`Id` = `e1`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:44:54.073 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e1`.`Id`, `e1`.`ConnectionInfo`, `e1`.`ConnectionValidated`, `e1`.`ElementHandlerId`, `e1`.`ElementType`, `e1`.`Name`, `e1`.`SettingsData`, `e1`.`StateData`, `e1`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE EXISTS (
        SELECT 1
        FROM `Elements` AS `e0`
        WHERE (`e`.`Id` = `e0`.`ElementHandlerId`) AND (`e0`.`Id` = @__dto_Id_0))
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e1` ON `t`.`Id` = `e1`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:44:54.075 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:54.076 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:44:54.078 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:44:54.078 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.079 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:44:54.080 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-11-23 20:44:54.081 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Put (smart.api) in 33.0461ms
2022-11-23 20:44:54.082 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:44:54.084 +01:00 [DBG] Connection id "0HMMDHAUUG9DA" completed keep alive response.
2022-11-23 20:44:54.085 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:44:54.088 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 34 - 200 0 - 87.6395ms
2022-11-23 20:45:54.578 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-23 20:45:54.866 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-23 20:45:54.868 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-23 20:45:54.926 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:45:54.927 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:45:54.928 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:45:54.929 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:45:54.930 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:45:54.931 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:45:55.021 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:45:55.033 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.037 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-23 20:45:55.087 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-23 20:45:55.122 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-23 20:45:55.125 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2022-11-23 20:45:55.128 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.135 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.140 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:45:55.149 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:45:55.153 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.155 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.157 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-23 20:45:55.160 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-23 20:45:55.162 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-23 20:45:55.162 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-11-23 20:45:55.164 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.169 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.172 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:45:55.175 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:45:55.178 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.180 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.199 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:45:55.200 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:45:55.201 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.203 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.204 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-23 20:45:55.207 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-23 20:45:55.209 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:45:55.210 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.211 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:45:55.219 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-11-23 20:45:55.229 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:45:55.288 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-23 20:45:55.345 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-11-23 20:45:55.360 +01:00 [DBG] Hosting starting
2022-11-23 20:45:55.410 +01:00 [INF] Now listening on: http://[::]:5011
2022-11-23 20:45:55.411 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-11-23 20:45:55.411 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-11-23 20:45:55.412 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-11-23 20:45:55.413 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-23 20:45:55.414 +01:00 [INF] Hosting environment: Development
2022-11-23 20:45:55.414 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-11-23 20:45:55.416 +01:00 [DBG] Hosting started
2022-11-23 20:46:04.469 +01:00 [DBG] Connection id "0HMMDHDDN3RL2" accepted.
2022-11-23 20:46:04.471 +01:00 [DBG] Connection id "0HMMDHDDN3RL2" started.
2022-11-23 20:46:04.498 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0
2022-11-23 20:46:04.506 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-11-23 20:46:04.525 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub/negotiate'
2022-11-23 20:46:04.527 +01:00 [DBG] Request matched endpoint '/handlerHub/negotiate'
2022-11-23 20:46:04.536 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:46:04.538 +01:00 [INF] Executing endpoint '/handlerHub/negotiate'
2022-11-23 20:46:04.547 +01:00 [DBG] New connection wKQ8EPSxk8XxFJHHg6ZPyg created.
2022-11-23 20:46:04.551 +01:00 [DBG] Sending negotiation response.
2022-11-23 20:46:04.553 +01:00 [INF] Executed endpoint '/handlerHub/negotiate'
2022-11-23 20:46:04.554 +01:00 [DBG] Connection id "0HMMDHDDN3RL2" completed keep alive response.
2022-11-23 20:46:04.556 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 59.2209ms
2022-11-23 20:46:04.575 +01:00 [DBG] Connection id "0HMMDHDDN3RL3" accepted.
2022-11-23 20:46:04.577 +01:00 [DBG] Connection id "0HMMDHDDN3RL3" started.
2022-11-23 20:46:04.579 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/handlerHub?id=wskwDqe9HRl1yTuDzOHPUg - -
2022-11-23 20:46:04.580 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub'
2022-11-23 20:46:04.581 +01:00 [DBG] Request matched endpoint '/handlerHub'
2022-11-23 20:46:04.585 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:46:04.586 +01:00 [INF] Executing endpoint '/handlerHub'
2022-11-23 20:46:04.589 +01:00 [DBG] Establishing new connection.
2022-11-23 20:46:04.592 +01:00 [DBG] OnConnectedAsync started.
2022-11-23 20:46:04.594 +01:00 [DBG] Socket opened using Sub-Protocol: 'null'.
2022-11-23 20:46:04.619 +01:00 [DBG] Found protocol implementation for requested protocol: json.
2022-11-23 20:46:04.621 +01:00 [DBG] Completed connection handshake. Using HubProtocol 'json'.
2022-11-23 20:46:04.663 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:46:04.683 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:04.711 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:04.714 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:46:04.716 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:46:04.722 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:46:04.732 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:04.734 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:04.736 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:46:04.743 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:46:04.766 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:04.767 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:46:04.778 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:46:04.784 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:46:04.795 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:46:04.799 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:04.801 +01:00 [DBG] Committing transaction.
2022-11-23 20:46:04.844 +01:00 [DBG] Committed transaction.
2022-11-23 20:46:04.847 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:04.848 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:04.850 +01:00 [DBG] Disposing transaction.
2022-11-23 20:46:04.856 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:04.859 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:46:04.861 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:46:04.880 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ReportHandlerType", Arguments: [ 1, Shelly ], StreamIds: [  ] }.
2022-11-23 20:46:04.887 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:46:04.941 +01:00 [DBG] Compiling query expression: 
'DbSet<ElementHandler>()
    .Include(h => h.HomeElements)
    .FirstOrDefault(h => h.Id == __handlerId_0 && (int)h.HandlerType == (int)__handlerType_1)'
2022-11-23 20:46:04.964 +01:00 [DBG] Including navigation: 'ElementHandler.HomeElements'.
2022-11-23 20:46:05.099 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ElementHandler>(
    asyncEnumerable: new SingleQueryingEnumerable<ElementHandler>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ElementHandler.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ElementHandler.Connected (bool) Required, 1], [Property: ElementHandler.HandlerType (EHandlerType) Required, 2], [Property: ElementHandler.Name (string) Required, 3], [Property: ElementHandler.SettingsData (string), 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: HomeElement.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: HomeElement.ConnectionInfo (string), 6], [Property: HomeElement.ConnectionValidated (bool) Required, 7], [Property: HomeElement.ElementHandlerId (no field, int) Shadow Required FK Index, 8], [Property: HomeElement.ElementType (EElementType) Required, 9], [Property: HomeElement.Name (string) Required, 10], [Property: HomeElement.SettingsData (string), 11], [Property: HomeElement.StateData (string), 12], [Property: HomeElement.StateTimestamp (DateTime?), 13] }
                3 -> 5
            SELECT t.Id, t.Connected, t.HandlerType, t.Name, t.SettingsData, e0.Id, e0.ConnectionInfo, e0.ConnectionValidated, e0.ElementHandlerId, e0.ElementType, e0.Name, e0.SettingsData, e0.StateData, e0.StateTimestamp
            FROM 
            (
                SELECT TOP(1) e.Id, e.Connected, e.HandlerType, e.Name, e.SettingsData
                FROM ElementHandlers AS e
                WHERE (e.Id == @__handlerId_0) && (e.HandlerType == @__handlerType_1)
            ) AS t
            LEFT JOIN Elements AS e0 ON t.Id == e0.ElementHandlerId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementHandler>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:46:05.135 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:05.136 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-23 20:46:05.139 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:05.146 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:05.149 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:46:05.158 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:46:05.172 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:05.191 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:05.213 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:05.214 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:05.215 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:05.221 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:05.223 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:05.224 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:46:05.225 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:46:05.236 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:46:05.237 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:05.238 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:05.239 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:46:05.246 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:46:05.247 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:05.255 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2022-11-23 20:46:05.256 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:46:05.259 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:46:05.264 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:46:05.265 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:05.266 +01:00 [DBG] Committing transaction.
2022-11-23 20:46:05.272 +01:00 [DBG] Committed transaction.
2022-11-23 20:46:05.273 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:05.274 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:05.276 +01:00 [DBG] Disposing transaction.
2022-11-23 20:46:05.277 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:05.278 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:46:05.307 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:46:14.404 +01:00 [DBG] Connection id "0HMMDHDDN3RL4" accepted.
2022-11-23 20:46:14.405 +01:00 [DBG] Connection id "0HMMDHDDN3RL4" started.
2022-11-23 20:46:14.406 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 34
2022-11-23 20:46:14.406 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:46:14.408 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Put (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:46:14.408 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:46:14.410 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:46:14.482 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:46:14.484 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __tokenUserId_Value_0)'
2022-11-23 20:46:14.486 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-11-23 20:46:14.497 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__tokenUserId_Value_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:46:14.501 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:14.502 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:46:14.503 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.504 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.505 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:14.509 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:14.517 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:14.524 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:14.532 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:14.534 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:14.535 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.536 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.560 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __id_0)'
2022-11-23 20:46:14.562 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-11-23 20:46:14.567 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__id_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:46:14.572 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:14.573 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:46:14.575 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.577 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.578 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:14.582 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:14.585 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:14.585 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.586 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.587 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:46:14.598 +01:00 [INF] Route matched with {action = "Put", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(smart.contract.ElementCommandDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:46:14.600 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:46:14.601 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:46:14.602 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:46:14.604 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:46:14.605 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:46:14.607 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:46:14.608 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:46:14.611 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto' ...
2022-11-23 20:46:14.613 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto' using the name '' in request data ...
2022-11-23 20:46:14.615 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:46:14.619 +01:00 [DBG] Connection id "0HMMDHDDN3RL4", Request id "0HMMDHDDN3RL4:00000001": started reading request body.
2022-11-23 20:46:14.620 +01:00 [DBG] Connection id "0HMMDHDDN3RL4", Request id "0HMMDHDDN3RL4:00000001": done reading request body.
2022-11-23 20:46:14.625 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.ElementCommandDto'
2022-11-23 20:46:14.625 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:46:14.626 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:46:14.627 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.ElementCommandDto' ...
2022-11-23 20:46:14.634 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:46:14.637 +01:00 [DBG] Compiling query expression: 
'DbSet<ElementHandler>()
    .Include(h => h.HomeElements)
    .FirstOrDefault(h => h.HomeElements
        .Any(e => e.Id == __dto_Id_0))'
2022-11-23 20:46:14.640 +01:00 [DBG] Including navigation: 'ElementHandler.HomeElements'.
2022-11-23 20:46:14.647 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ElementHandler>(
    asyncEnumerable: new SingleQueryingEnumerable<ElementHandler>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ElementHandler.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ElementHandler.Connected (bool) Required, 1], [Property: ElementHandler.HandlerType (EHandlerType) Required, 2], [Property: ElementHandler.Name (string) Required, 3], [Property: ElementHandler.SettingsData (string), 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: HomeElement.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: HomeElement.ConnectionInfo (string), 6], [Property: HomeElement.ConnectionValidated (bool) Required, 7], [Property: HomeElement.ElementHandlerId (no field, int) Shadow Required FK Index, 8], [Property: HomeElement.ElementType (EElementType) Required, 9], [Property: HomeElement.Name (string) Required, 10], [Property: HomeElement.SettingsData (string), 11], [Property: HomeElement.StateData (string), 12], [Property: HomeElement.StateTimestamp (DateTime?), 13] }
                3 -> 5
            SELECT t.Id, t.Connected, t.HandlerType, t.Name, t.SettingsData, e1.Id, e1.ConnectionInfo, e1.ConnectionValidated, e1.ElementHandlerId, e1.ElementType, e1.Name, e1.SettingsData, e1.StateData, e1.StateTimestamp
            FROM 
            (
                SELECT TOP(1) e.Id, e.Connected, e.HandlerType, e.Name, e.SettingsData
                FROM ElementHandlers AS e
                WHERE EXISTS (
                    SELECT 1
                    FROM Elements AS e0
                    WHERE ((e.Id != NULL) && (e.Id == e0.ElementHandlerId)) && (e0.Id == @__dto_Id_0))
            ) AS t
            LEFT JOIN Elements AS e1 ON t.Id == e1.ElementHandlerId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementHandler>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:46:14.656 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:14.656 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:46:14.657 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.659 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.660 +01:00 [DBG] Executing DbCommand [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e1`.`Id`, `e1`.`ConnectionInfo`, `e1`.`ConnectionValidated`, `e1`.`ElementHandlerId`, `e1`.`ElementType`, `e1`.`Name`, `e1`.`SettingsData`, `e1`.`StateData`, `e1`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE EXISTS (
        SELECT 1
        FROM `Elements` AS `e0`
        WHERE (`e`.`Id` = `e0`.`ElementHandlerId`) AND (`e0`.`Id` = @__dto_Id_0))
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e1` ON `t`.`Id` = `e1`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:46:14.665 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e1`.`Id`, `e1`.`ConnectionInfo`, `e1`.`ConnectionValidated`, `e1`.`ElementHandlerId`, `e1`.`ElementType`, `e1`.`Name`, `e1`.`SettingsData`, `e1`.`StateData`, `e1`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE EXISTS (
        SELECT 1
        FROM `Elements` AS `e0`
        WHERE (`e`.`Id` = `e0`.`ElementHandlerId`) AND (`e0`.`Id` = @__dto_Id_0))
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e1` ON `t`.`Id` = `e1`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:46:14.671 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:14.672 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:14.673 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:14.674 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.675 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:14.680 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-11-23 20:46:14.682 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Put (smart.api) in 74.6337ms
2022-11-23 20:46:14.685 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:46:14.688 +01:00 [DBG] Connection id "0HMMDHDDN3RL4" completed keep alive response.
2022-11-23 20:46:14.688 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:46:14.690 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 34 - 200 0 - 283.4854ms
2022-11-23 20:46:45.498 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/Element - -
2022-11-23 20:46:45.499 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:46:45.500 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Get (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:46:45.501 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Get (smart.api)'
2022-11-23 20:46:45.502 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:46:45.503 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:46:45.505 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:45.506 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:46:45.507 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.509 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.512 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:45.516 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:45.518 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:45.519 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:45.520 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:45.521 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:45.522 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.522 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.524 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:45.525 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:46:45.525 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.529 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.530 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:45.533 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:45.535 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:45.535 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.536 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.537 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Get (smart.api)'
2022-11-23 20:46:45.539 +01:00 [INF] Route matched with {action = "Get", controller = "Element"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:46:45.540 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:46:45.541 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:46:45.544 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:46:45.546 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:46:45.547 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:46:45.548 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:46:45.549 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:46:45.552 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-23 20:46:45.555 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-23 20:46:45.555 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-23 20:46:45.556 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-23 20:46:45.557 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-23 20:46:45.559 +01:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[smart.contract.ElementDto, smart.contract, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-11-23 20:46:45.568 +01:00 [DBG] Compiling query expression: 
'DbSet<HomeElement>()
    .Select(e => new ElementDto(
        e.Id, 
        e.Name, 
        e.ElementType, 
        e.ConnectionValidated
    ))'
2022-11-23 20:46:45.572 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ElementDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
            3 -> 3
        SELECT e.Id, e.Name, e.ElementType, e.ConnectionValidated
        FROM Elements AS e), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementDto>, 
    smart.database.SmartContext, 
    False, 
    False, 
    True
)'
2022-11-23 20:46:45.575 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:45.576 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:46:45.577 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.579 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.580 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Name`, `e`.`ElementType`, `e`.`ConnectionValidated`
FROM `Elements` AS `e`
2022-11-23 20:46:45.583 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Name`, `e`.`ElementType`, `e`.`ConnectionValidated`
FROM `Elements` AS `e`
2022-11-23 20:46:45.587 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:45.590 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.591 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:45.593 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Get (smart.api) in 45.0223ms
2022-11-23 20:46:45.594 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Get (smart.api)'
2022-11-23 20:46:45.594 +01:00 [DBG] Connection id "0HMMDHDDN3RL4" completed keep alive response.
2022-11-23 20:46:45.595 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:46:45.596 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/Element - - - 200 - application/json;+charset=utf-8 97.3766ms
2022-11-23 20:46:55.744 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/Element/1 - -
2022-11-23 20:46:55.745 +01:00 [DBG] 1 candidate(s) found for the request path '/Element/1'
2022-11-23 20:46:55.745 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Get (smart.api)' with route pattern 'Element/{elementId}' is valid for the request path '/Element/1'
2022-11-23 20:46:55.747 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Get (smart.api)'
2022-11-23 20:46:55.747 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:46:55.749 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:46:55.750 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:55.751 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:46:55.752 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.753 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.754 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:55.758 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:55.761 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:55.762 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:55.763 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:55.764 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:55.765 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.766 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.767 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:55.767 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:46:55.768 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.770 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.771 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:55.774 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:46:55.777 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:55.777 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.778 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.779 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Get (smart.api)'
2022-11-23 20:46:55.784 +01:00 [INF] Route matched with {action = "Get", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:46:55.785 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:46:55.786 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:46:55.787 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:46:55.789 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:46:55.790 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:46:55.791 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:46:55.792 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:46:55.793 +01:00 [DBG] Attempting to bind parameter 'elementId' of type 'System.Int32' ...
2022-11-23 20:46:55.794 +01:00 [DBG] Attempting to bind parameter 'elementId' of type 'System.Int32' using the name 'elementId' in request data ...
2022-11-23 20:46:55.795 +01:00 [DBG] Done attempting to bind parameter 'elementId' of type 'System.Int32'.
2022-11-23 20:46:55.796 +01:00 [DBG] Done attempting to bind parameter 'elementId' of type 'System.Int32'.
2022-11-23 20:46:55.796 +01:00 [DBG] Attempting to validate the bound parameter 'elementId' of type 'System.Int32' ...
2022-11-23 20:46:55.798 +01:00 [DBG] Done attempting to validate the bound parameter 'elementId' of type 'System.Int32'.
2022-11-23 20:46:55.799 +01:00 [DBG] Compiling query expression: 
'DbSet<HomeElement>()
    .FirstOrDefault(e => e.Id == __elementId_0)'
2022-11-23 20:46:55.802 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<HomeElement>(
    asyncEnumerable: new SingleQueryingEnumerable<HomeElement>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: HomeElement.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: HomeElement.ConnectionInfo (string), 1], [Property: HomeElement.ConnectionValidated (bool) Required, 2], [Property: HomeElement.ElementHandlerId (no field, int) Shadow Required FK Index, 3], [Property: HomeElement.ElementType (EElementType) Required, 4], [Property: HomeElement.Name (string) Required, 5], [Property: HomeElement.SettingsData (string), 6], [Property: HomeElement.StateData (string), 7], [Property: HomeElement.StateTimestamp (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.ConnectionInfo, e.ConnectionValidated, e.ElementHandlerId, e.ElementType, e.Name, e.SettingsData, e.StateData, e.StateTimestamp
            FROM Elements AS e
            WHERE e.Id == @__elementId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, HomeElement>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:46:55.807 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:46:55.808 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:46:55.809 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.810 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.811 +01:00 [DBG] Executing DbCommand [Parameters=[@__elementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`ConnectionInfo`, `e`.`ConnectionValidated`, `e`.`ElementHandlerId`, `e`.`ElementType`, `e`.`Name`, `e`.`SettingsData`, `e`.`StateData`, `e`.`StateTimestamp`
FROM `Elements` AS `e`
WHERE `e`.`Id` = @__elementId_0
LIMIT 1
2022-11-23 20:46:55.813 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__elementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`ConnectionInfo`, `e`.`ConnectionValidated`, `e`.`ElementHandlerId`, `e`.`ElementType`, `e`.`Name`, `e`.`SettingsData`, `e`.`StateData`, `e`.`StateTimestamp`
FROM `Elements` AS `e`
WHERE `e`.`Id` = @__elementId_0
LIMIT 1
2022-11-23 20:46:55.815 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:46:55.816 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:46:55.817 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.817 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:46:55.819 +01:00 [INF] Executing ContentResult with HTTP Response ContentType of application/json
2022-11-23 20:46:55.823 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Get (smart.api) in 31.6324ms
2022-11-23 20:46:55.824 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Get (smart.api)'
2022-11-23 20:46:55.825 +01:00 [DBG] Connection id "0HMMDHDDN3RL4" completed keep alive response.
2022-11-23 20:46:55.826 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:46:55.826 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/Element/1 - - - 200 0 application/json 82.5510ms
2022-11-23 20:47:11.873 +01:00 [DBG] Connection id "0HMMDHDDN3RL2" received FIN.
2022-11-23 20:47:11.874 +01:00 [DBG] Connection id "0HMMDHDDN3RL2" sending FIN because: "The client closed the connection."
2022-11-23 20:47:11.876 +01:00 [DBG] Connection id "0HMMDHDDN3RL2" disconnecting.
2022-11-23 20:47:11.877 +01:00 [DBG] Connection id "0HMMDHDDN3RL2" stopped.
2022-11-23 20:48:02.337 +01:00 [DBG] Connection id "0HMMDHDDN3RL3" reset.
2022-11-23 20:48:02.339 +01:00 [DBG] Connection id "0HMMDHDDN3RL3" sending FIN because: "The client closed the connection."
2022-11-23 20:48:02.342 +01:00 [DBG] Connection id "0HMMDHDDN3RL3" disconnecting.
2022-11-23 20:48:02.344 +01:00 [DBG] Socket connection closed prematurely.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
 ---> Microsoft.AspNetCore.Connections.ConnectionResetException: Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
 ---> System.Net.Sockets.SocketException (10054): Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Http.Connections.Internal.Transports.WebSocketsServerTransport.StartReceiving(WebSocket socket)
2022-11-23 20:48:02.379 +01:00 [DBG] Waiting for the application to finish sending data.
2022-11-23 20:48:02.380 +01:00 [DBG] Socket closed.
2022-11-23 20:48:02.383 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:48:02.384 +01:00 [DBG] Compiling query expression: 
'DbSet<ElementHandler>()
    .FirstOrDefault(h => h.Id == __handlerId_0)'
2022-11-23 20:48:02.389 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ElementHandler>(
    asyncEnumerable: new SingleQueryingEnumerable<ElementHandler>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ElementHandler.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ElementHandler.Connected (bool) Required, 1], [Property: ElementHandler.HandlerType (EHandlerType) Required, 2], [Property: ElementHandler.Name (string) Required, 3], [Property: ElementHandler.SettingsData (string), 4] }
            SELECT TOP(1) e.Id, e.Connected, e.HandlerType, e.Name, e.SettingsData
            FROM ElementHandlers AS e
            WHERE e.Id == @__handlerId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementHandler>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:48:02.392 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:02.393 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:02.394 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:02.395 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:02.396 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:48:02.398 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:48:02.400 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:02.401 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:02.407 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:02.408 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:02.410 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:02.411 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:02.412 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:48:02.414 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:48:02.415 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:02.416 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:02.419 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:48:02.420 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:02.421 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:02.422 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:48:02.424 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:48:02.428 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:48:02.431 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:02.431 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:02.432 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:02.434 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:02.438 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:02.438 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:02.439 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:02.440 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:02.510 +01:00 [INF] Executed DbCommand (69ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:02.512 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:02.513 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:02.514 +01:00 [DBG] Committing transaction.
2022-11-23 20:48:02.519 +01:00 [DBG] Committed transaction.
2022-11-23 20:48:02.520 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:02.521 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:02.521 +01:00 [DBG] Disposing transaction.
2022-11-23 20:48:02.522 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:02.524 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:02.526 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:48:02.528 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:48:02.528 +01:00 [DBG] OnConnectedAsync ending.
2022-11-23 20:48:02.531 +01:00 [DBG] Removing connection wskwDqe9HRl1yTuDzOHPUg from the list of connections.
2022-11-23 20:48:02.532 +01:00 [INF] Executed endpoint '/handlerHub'
2022-11-23 20:48:02.533 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/handlerHub?id=wskwDqe9HRl1yTuDzOHPUg - - - 101 - - 117954.1909ms
2022-11-23 20:48:02.534 +01:00 [DBG] Connection id "0HMMDHDDN3RL3" stopped.
2022-11-23 20:48:10.696 +01:00 [DBG] Connection id "0HMMDHDDN3RL5" accepted.
2022-11-23 20:48:10.697 +01:00 [DBG] Connection id "0HMMDHDDN3RL5" started.
2022-11-23 20:48:10.701 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0
2022-11-23 20:48:10.702 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub/negotiate'
2022-11-23 20:48:10.703 +01:00 [DBG] Request matched endpoint '/handlerHub/negotiate'
2022-11-23 20:48:10.704 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:48:10.705 +01:00 [INF] Executing endpoint '/handlerHub/negotiate'
2022-11-23 20:48:10.705 +01:00 [DBG] New connection GrzBHalezqnC2_LxJ1gW7Q created.
2022-11-23 20:48:10.707 +01:00 [DBG] Sending negotiation response.
2022-11-23 20:48:10.708 +01:00 [INF] Executed endpoint '/handlerHub/negotiate'
2022-11-23 20:48:10.709 +01:00 [DBG] Connection id "0HMMDHDDN3RL5" completed keep alive response.
2022-11-23 20:48:10.710 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 8.8672ms
2022-11-23 20:48:10.729 +01:00 [DBG] Connection id "0HMMDHDDN3RL6" accepted.
2022-11-23 20:48:10.731 +01:00 [DBG] Connection id "0HMMDHDDN3RL6" started.
2022-11-23 20:48:10.732 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/handlerHub?id=ktmGeSbFWiz1forUYpN0SQ - -
2022-11-23 20:48:10.733 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub'
2022-11-23 20:48:10.734 +01:00 [DBG] Request matched endpoint '/handlerHub'
2022-11-23 20:48:10.734 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:48:10.735 +01:00 [INF] Executing endpoint '/handlerHub'
2022-11-23 20:48:10.736 +01:00 [DBG] Establishing new connection.
2022-11-23 20:48:10.736 +01:00 [DBG] OnConnectedAsync started.
2022-11-23 20:48:10.737 +01:00 [DBG] Socket opened using Sub-Protocol: 'null'.
2022-11-23 20:48:10.758 +01:00 [DBG] Found protocol implementation for requested protocol: json.
2022-11-23 20:48:10.759 +01:00 [DBG] Completed connection handshake. Using HubProtocol 'json'.
2022-11-23 20:48:10.760 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:48:10.762 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:10.763 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:10.764 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:48:10.765 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:48:10.766 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:48:10.767 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.768 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.769 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:48:10.771 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:48:10.771 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:10.772 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:10.773 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:10.778 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:10.780 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:10.781 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:10.782 +01:00 [DBG] Committing transaction.
2022-11-23 20:48:10.819 +01:00 [DBG] Committed transaction.
2022-11-23 20:48:10.820 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.821 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.822 +01:00 [DBG] Disposing transaction.
2022-11-23 20:48:10.823 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:10.824 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:48:10.826 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:48:10.827 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ReportHandlerType", Arguments: [ 1, Shelly ], StreamIds: [  ] }.
2022-11-23 20:48:10.828 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:48:10.830 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:10.830 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:10.831 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.833 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.834 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:48:10.840 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:48:10.843 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:10.844 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:10.845 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:10.846 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.846 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.848 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:10.849 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:10.850 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:48:10.853 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:48:10.854 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:10.855 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:10.856 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:48:10.857 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.858 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.859 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:48:10.861 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:48:10.861 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:48:10.862 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:10.863 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:10.864 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:10.866 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:10.869 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:10.869 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:10.870 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:10.871 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:10.873 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:10.875 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:10.876 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:10.877 +01:00 [DBG] Committing transaction.
2022-11-23 20:48:10.879 +01:00 [DBG] Committed transaction.
2022-11-23 20:48:10.879 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.880 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:10.883 +01:00 [DBG] Disposing transaction.
2022-11-23 20:48:10.884 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:10.885 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:10.886 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:48:10.887 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:48:26.684 +01:00 [DBG] Connection id "0HMMDHDDN3RL5" reset.
2022-11-23 20:48:26.684 +01:00 [DBG] Connection id "0HMMDHDDN3RL6" reset.
2022-11-23 20:48:26.685 +01:00 [DBG] Connection id "0HMMDHDDN3RL5" sending FIN because: "The client closed the connection."
2022-11-23 20:48:26.686 +01:00 [DBG] Connection id "0HMMDHDDN3RL6" sending FIN because: "The client closed the connection."
2022-11-23 20:48:26.689 +01:00 [DBG] Socket connection closed prematurely.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
 ---> Microsoft.AspNetCore.Connections.ConnectionResetException: Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
 ---> System.Net.Sockets.SocketException (10054): Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Http.Connections.Internal.Transports.WebSocketsServerTransport.StartReceiving(WebSocket socket)
2022-11-23 20:48:26.689 +01:00 [DBG] Connection id "0HMMDHDDN3RL5" disconnecting.
2022-11-23 20:48:26.692 +01:00 [DBG] Connection id "0HMMDHDDN3RL6" disconnecting.
2022-11-23 20:48:26.702 +01:00 [DBG] Waiting for the application to finish sending data.
2022-11-23 20:48:26.705 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:48:26.706 +01:00 [DBG] Connection id "0HMMDHDDN3RL5" stopped.
2022-11-23 20:48:26.707 +01:00 [DBG] Socket closed.
2022-11-23 20:48:26.708 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:26.710 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-23 20:48:26.711 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:26.712 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:26.713 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:48:26.719 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:48:26.722 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:26.723 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:26.724 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:26.725 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:26.726 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:26.727 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:26.728 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:48:26.729 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:48:26.731 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:26.732 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:26.734 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:48:26.734 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:26.736 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:26.737 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:48:26.739 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:48:26.740 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:48:26.740 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:26.741 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:26.743 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:26.746 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:26.749 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:26.750 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:26.751 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:26.752 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:26.789 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:26.792 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:26.793 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:26.793 +01:00 [DBG] Committing transaction.
2022-11-23 20:48:26.809 +01:00 [DBG] Committed transaction.
2022-11-23 20:48:26.809 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:26.810 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:26.811 +01:00 [DBG] Disposing transaction.
2022-11-23 20:48:26.812 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:26.813 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:26.814 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:48:26.815 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:48:26.815 +01:00 [DBG] OnConnectedAsync ending.
2022-11-23 20:48:26.816 +01:00 [DBG] Removing connection ktmGeSbFWiz1forUYpN0SQ from the list of connections.
2022-11-23 20:48:26.817 +01:00 [INF] Executed endpoint '/handlerHub'
2022-11-23 20:48:26.817 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/handlerHub?id=ktmGeSbFWiz1forUYpN0SQ - - - 101 - - 16085.4514ms
2022-11-23 20:48:26.818 +01:00 [DBG] Connection id "0HMMDHDDN3RL6" stopped.
2022-11-23 20:48:36.469 +01:00 [DBG] Connection id "0HMMDHDDN3RL7" accepted.
2022-11-23 20:48:36.469 +01:00 [DBG] Connection id "0HMMDHDDN3RL7" started.
2022-11-23 20:48:36.473 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0
2022-11-23 20:48:36.474 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub/negotiate'
2022-11-23 20:48:36.475 +01:00 [DBG] Request matched endpoint '/handlerHub/negotiate'
2022-11-23 20:48:36.477 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:48:36.478 +01:00 [INF] Executing endpoint '/handlerHub/negotiate'
2022-11-23 20:48:36.478 +01:00 [DBG] New connection UYnH-bGhS5lhyWoIbOPnxQ created.
2022-11-23 20:48:36.479 +01:00 [DBG] Sending negotiation response.
2022-11-23 20:48:36.480 +01:00 [INF] Executed endpoint '/handlerHub/negotiate'
2022-11-23 20:48:36.481 +01:00 [DBG] Connection id "0HMMDHDDN3RL7" completed keep alive response.
2022-11-23 20:48:36.482 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 8.7891ms
2022-11-23 20:48:36.501 +01:00 [DBG] Connection id "0HMMDHDDN3RL8" accepted.
2022-11-23 20:48:36.501 +01:00 [DBG] Connection id "0HMMDHDDN3RL8" started.
2022-11-23 20:48:36.503 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/handlerHub?id=4b5kV-UKVVQ_vay_tAPdYA - -
2022-11-23 20:48:36.503 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub'
2022-11-23 20:48:36.505 +01:00 [DBG] Request matched endpoint '/handlerHub'
2022-11-23 20:48:36.505 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:48:36.506 +01:00 [INF] Executing endpoint '/handlerHub'
2022-11-23 20:48:36.507 +01:00 [DBG] Establishing new connection.
2022-11-23 20:48:36.508 +01:00 [DBG] OnConnectedAsync started.
2022-11-23 20:48:36.508 +01:00 [DBG] Socket opened using Sub-Protocol: 'null'.
2022-11-23 20:48:36.529 +01:00 [DBG] Found protocol implementation for requested protocol: json.
2022-11-23 20:48:36.530 +01:00 [DBG] Completed connection handshake. Using HubProtocol 'json'.
2022-11-23 20:48:36.531 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:48:36.533 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:36.534 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:36.536 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:48:36.537 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:48:36.537 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:48:36.538 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.540 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.541 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:48:36.543 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:48:36.544 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:36.544 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:36.545 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:36.549 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:36.553 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:36.555 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:36.556 +01:00 [DBG] Committing transaction.
2022-11-23 20:48:36.598 +01:00 [DBG] Committed transaction.
2022-11-23 20:48:36.599 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.600 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.601 +01:00 [DBG] Disposing transaction.
2022-11-23 20:48:36.602 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:36.603 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:48:36.604 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:48:36.605 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ReportHandlerType", Arguments: [ 1, Shelly ], StreamIds: [  ] }.
2022-11-23 20:48:36.607 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:48:36.608 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:36.609 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:36.610 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.612 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.613 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:48:36.619 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:48:36.621 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:36.623 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:36.624 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:36.624 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.625 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.627 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:36.628 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:36.629 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:48:36.629 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:48:36.632 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:36.634 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:36.636 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:48:36.637 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.639 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.640 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:48:36.642 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:48:36.643 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:48:36.643 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:36.644 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:36.645 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:36.650 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:36.652 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:36.653 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:36.654 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:36.654 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:36.657 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:36.659 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:36.660 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:36.661 +01:00 [DBG] Committing transaction.
2022-11-23 20:48:36.668 +01:00 [DBG] Committed transaction.
2022-11-23 20:48:36.669 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.670 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:36.671 +01:00 [DBG] Disposing transaction.
2022-11-23 20:48:36.671 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:36.672 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:36.673 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:48:36.674 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:48:56.016 +01:00 [DBG] Connection id "0HMMDHDDN3RL8" reset.
2022-11-23 20:48:56.016 +01:00 [DBG] Connection id "0HMMDHDDN3RL7" reset.
2022-11-23 20:48:56.017 +01:00 [DBG] Connection id "0HMMDHDDN3RL8" sending FIN because: "The client closed the connection."
2022-11-23 20:48:56.018 +01:00 [DBG] Socket connection closed prematurely.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
 ---> Microsoft.AspNetCore.Connections.ConnectionResetException: Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
 ---> System.Net.Sockets.SocketException (10054): Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Http.Connections.Internal.Transports.WebSocketsServerTransport.StartReceiving(WebSocket socket)
2022-11-23 20:48:56.018 +01:00 [DBG] Connection id "0HMMDHDDN3RL7" sending FIN because: "The client closed the connection."
2022-11-23 20:48:56.019 +01:00 [DBG] Connection id "0HMMDHDDN3RL8" disconnecting.
2022-11-23 20:48:56.029 +01:00 [DBG] Waiting for the application to finish sending data.
2022-11-23 20:48:56.033 +01:00 [DBG] Connection id "0HMMDHDDN3RL7" disconnecting.
2022-11-23 20:48:56.033 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:48:56.037 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:56.038 +01:00 [DBG] Connection id "0HMMDHDDN3RL7" stopped.
2022-11-23 20:48:56.039 +01:00 [DBG] Socket closed.
2022-11-23 20:48:56.040 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-11-23 20:48:56.043 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:56.046 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:56.048 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:48:56.052 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:48:56.056 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:56.057 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:56.058 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:56.060 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:56.061 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:56.063 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:56.064 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:48:56.065 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:48:56.066 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:56.067 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:56.068 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:48:56.069 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:56.071 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:56.071 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:48:56.073 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:48:56.074 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:48:56.077 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:56.078 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:56.079 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:56.082 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:56.084 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:56.085 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:56.085 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:56.086 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:56.138 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:56.140 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:56.141 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:56.142 +01:00 [DBG] Committing transaction.
2022-11-23 20:48:56.148 +01:00 [DBG] Committed transaction.
2022-11-23 20:48:56.148 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:56.149 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:56.150 +01:00 [DBG] Disposing transaction.
2022-11-23 20:48:56.151 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:56.154 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:56.156 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:48:56.156 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:48:56.157 +01:00 [DBG] OnConnectedAsync ending.
2022-11-23 20:48:56.158 +01:00 [DBG] Removing connection 4b5kV-UKVVQ_vay_tAPdYA from the list of connections.
2022-11-23 20:48:56.158 +01:00 [INF] Executed endpoint '/handlerHub'
2022-11-23 20:48:56.159 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/handlerHub?id=4b5kV-UKVVQ_vay_tAPdYA - - - 101 - - 19656.3138ms
2022-11-23 20:48:56.160 +01:00 [DBG] Connection id "0HMMDHDDN3RL8" stopped.
2022-11-23 20:48:57.943 +01:00 [DBG] Connection id "0HMMDHDDN3RL9" accepted.
2022-11-23 20:48:57.943 +01:00 [DBG] Connection id "0HMMDHDDN3RL9" started.
2022-11-23 20:48:57.949 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0
2022-11-23 20:48:57.949 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub/negotiate'
2022-11-23 20:48:57.950 +01:00 [DBG] Request matched endpoint '/handlerHub/negotiate'
2022-11-23 20:48:57.952 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:48:57.952 +01:00 [INF] Executing endpoint '/handlerHub/negotiate'
2022-11-23 20:48:57.953 +01:00 [DBG] New connection vErgZ0LG8wKZGBmie0xzlg created.
2022-11-23 20:48:57.954 +01:00 [DBG] Sending negotiation response.
2022-11-23 20:48:57.955 +01:00 [INF] Executed endpoint '/handlerHub/negotiate'
2022-11-23 20:48:57.956 +01:00 [DBG] Connection id "0HMMDHDDN3RL9" completed keep alive response.
2022-11-23 20:48:57.957 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 8.0363ms
2022-11-23 20:48:57.979 +01:00 [DBG] Connection id "0HMMDHDDN3RLA" accepted.
2022-11-23 20:48:57.980 +01:00 [DBG] Connection id "0HMMDHDDN3RLA" started.
2022-11-23 20:48:57.981 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/handlerHub?id=n74tSHtDqnGIyWhK9yw9Sg - -
2022-11-23 20:48:57.981 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub'
2022-11-23 20:48:57.982 +01:00 [DBG] Request matched endpoint '/handlerHub'
2022-11-23 20:48:57.983 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:48:57.984 +01:00 [INF] Executing endpoint '/handlerHub'
2022-11-23 20:48:57.985 +01:00 [DBG] Establishing new connection.
2022-11-23 20:48:57.985 +01:00 [DBG] OnConnectedAsync started.
2022-11-23 20:48:57.985 +01:00 [DBG] Socket opened using Sub-Protocol: 'null'.
2022-11-23 20:48:58.007 +01:00 [DBG] Found protocol implementation for requested protocol: json.
2022-11-23 20:48:58.008 +01:00 [DBG] Completed connection handshake. Using HubProtocol 'json'.
2022-11-23 20:48:58.010 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:48:58.011 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:58.012 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:58.013 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:48:58.014 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:48:58.015 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:48:58.016 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.018 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.019 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:48:58.021 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:48:58.022 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:58.022 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:58.024 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:58.036 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:58.038 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:58.041 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:58.042 +01:00 [DBG] Committing transaction.
2022-11-23 20:48:58.048 +01:00 [DBG] Committed transaction.
2022-11-23 20:48:58.048 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.049 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.050 +01:00 [DBG] Disposing transaction.
2022-11-23 20:48:58.051 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:58.052 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:48:58.053 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:48:58.053 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ReportHandlerType", Arguments: [ 1, Shelly ], StreamIds: [  ] }.
2022-11-23 20:48:58.056 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:48:58.057 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:58.058 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:58.058 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.061 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.061 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:48:58.066 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:48:58.068 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:58.069 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:58.072 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:58.073 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.073 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.075 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:58.076 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:58.077 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:48:58.078 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:48:58.079 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:58.080 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:58.081 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:48:58.082 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.084 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.084 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:48:58.086 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:48:58.088 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:48:58.089 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:58.090 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:48:58.091 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:58.096 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:48:58.098 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:58.099 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:48:58.100 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-23 20:48:58.101 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:58.106 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:48:58.107 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:48:58.108 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:48:58.109 +01:00 [DBG] Committing transaction.
2022-11-23 20:48:58.118 +01:00 [DBG] Committed transaction.
2022-11-23 20:48:58.118 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.120 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:48:58.121 +01:00 [DBG] Disposing transaction.
2022-11-23 20:48:58.122 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:58.123 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:48:58.124 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:48:58.125 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:49:43.325 +01:00 [DBG] Connection id "0HMMDHDDN3RL9" reset.
2022-11-23 20:49:43.325 +01:00 [DBG] Connection id "0HMMDHDDN3RLA" reset.
2022-11-23 20:49:43.328 +01:00 [DBG] Connection id "0HMMDHDDN3RL9" sending FIN because: "The client closed the connection."
2022-11-23 20:49:43.329 +01:00 [DBG] Connection id "0HMMDHDDN3RLA" sending FIN because: "The client closed the connection."
2022-11-23 20:49:43.332 +01:00 [DBG] Socket connection closed prematurely.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
 ---> Microsoft.AspNetCore.Connections.ConnectionResetException: Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
 ---> System.Net.Sockets.SocketException (10054): Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Http.Connections.Internal.Transports.WebSocketsServerTransport.StartReceiving(WebSocket socket)
2022-11-23 20:49:43.332 +01:00 [DBG] Connection id "0HMMDHDDN3RL9" disconnecting.
2022-11-23 20:49:43.336 +01:00 [DBG] Connection id "0HMMDHDDN3RLA" disconnecting.
2022-11-23 20:49:43.346 +01:00 [DBG] Waiting for the application to finish sending data.
2022-11-23 20:49:43.348 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:49:43.349 +01:00 [DBG] Connection id "0HMMDHDDN3RL9" stopped.
2022-11-23 20:49:43.349 +01:00 [DBG] Socket closed.
2022-11-23 20:49:43.353 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:49:43.355 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-11-23 20:49:43.357 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:49:43.359 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:49:43.361 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:49:43.363 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:49:43.365 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:49:43.366 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:49:43.366 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:49:43.368 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:49:43.369 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:49:43.370 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:49:43.370 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:49:43.371 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:49:43.372 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:49:43.373 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:49:43.374 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:49:43.375 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:49:43.379 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:49:43.379 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:49:43.381 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:49:43.382 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:49:43.382 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:49:43.383 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:49:43.384 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:49:43.387 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:49:43.391 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:49:43.394 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:49:43.395 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:49:43.396 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:49:43.400 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:49:43.402 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:49:43.403 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:49:43.404 +01:00 [DBG] Committing transaction.
2022-11-23 20:49:43.447 +01:00 [DBG] Committed transaction.
2022-11-23 20:49:43.448 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:49:43.448 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:49:43.449 +01:00 [DBG] Disposing transaction.
2022-11-23 20:49:43.450 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:49:43.451 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:49:43.453 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:49:43.454 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:49:43.455 +01:00 [DBG] OnConnectedAsync ending.
2022-11-23 20:49:43.455 +01:00 [DBG] Removing connection n74tSHtDqnGIyWhK9yw9Sg from the list of connections.
2022-11-23 20:49:43.457 +01:00 [INF] Executed endpoint '/handlerHub'
2022-11-23 20:49:43.458 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/handlerHub?id=n74tSHtDqnGIyWhK9yw9Sg - - - 101 - - 45476.9438ms
2022-11-23 20:49:43.458 +01:00 [DBG] Connection id "0HMMDHDDN3RLA" stopped.
2022-11-23 20:50:59.618 +01:00 [DBG] Connection id "0HMMDHDDN3RLB" accepted.
2022-11-23 20:50:59.621 +01:00 [DBG] Connection id "0HMMDHDDN3RLB" started.
2022-11-23 20:50:59.625 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0
2022-11-23 20:50:59.626 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub/negotiate'
2022-11-23 20:50:59.628 +01:00 [DBG] Request matched endpoint '/handlerHub/negotiate'
2022-11-23 20:50:59.629 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:50:59.630 +01:00 [INF] Executing endpoint '/handlerHub/negotiate'
2022-11-23 20:50:59.632 +01:00 [DBG] New connection G06llmCIVfraYGssN7SZ4Q created.
2022-11-23 20:50:59.633 +01:00 [DBG] Sending negotiation response.
2022-11-23 20:50:59.636 +01:00 [INF] Executed endpoint '/handlerHub/negotiate'
2022-11-23 20:50:59.639 +01:00 [DBG] Connection id "0HMMDHDDN3RLB" completed keep alive response.
2022-11-23 20:50:59.642 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 16.5830ms
2022-11-23 20:50:59.661 +01:00 [DBG] Connection id "0HMMDHDDN3RLC" accepted.
2022-11-23 20:50:59.664 +01:00 [DBG] Connection id "0HMMDHDDN3RLC" started.
2022-11-23 20:50:59.666 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/handlerHub?id=6hMgbgA4jom0bGbbvhRhKw - -
2022-11-23 20:50:59.667 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub'
2022-11-23 20:50:59.668 +01:00 [DBG] Request matched endpoint '/handlerHub'
2022-11-23 20:50:59.669 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:50:59.670 +01:00 [INF] Executing endpoint '/handlerHub'
2022-11-23 20:50:59.670 +01:00 [DBG] Establishing new connection.
2022-11-23 20:50:59.671 +01:00 [DBG] OnConnectedAsync started.
2022-11-23 20:50:59.671 +01:00 [DBG] Socket opened using Sub-Protocol: 'null'.
2022-11-23 20:50:59.693 +01:00 [DBG] Found protocol implementation for requested protocol: json.
2022-11-23 20:50:59.694 +01:00 [DBG] Completed connection handshake. Using HubProtocol 'json'.
2022-11-23 20:50:59.696 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:50:59.697 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:50:59.699 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:50:59.699 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:50:59.700 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:50:59.701 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:50:59.702 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.703 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.704 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:50:59.705 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:50:59.706 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:50:59.707 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:50:59.708 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:50:59.765 +01:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:50:59.767 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:50:59.768 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:50:59.769 +01:00 [DBG] Committing transaction.
2022-11-23 20:50:59.775 +01:00 [DBG] Committed transaction.
2022-11-23 20:50:59.776 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.776 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.777 +01:00 [DBG] Disposing transaction.
2022-11-23 20:50:59.778 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:50:59.779 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:50:59.781 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:50:59.781 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ReportHandlerType", Arguments: [ 1, Shelly ], StreamIds: [  ] }.
2022-11-23 20:50:59.783 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:50:59.785 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:50:59.785 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:50:59.786 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.789 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.790 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:50:59.794 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:50:59.797 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:50:59.798 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:50:59.799 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:50:59.800 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.800 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.802 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:50:59.805 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:50:59.806 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:50:59.806 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:50:59.807 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:50:59.808 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:50:59.809 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:50:59.810 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.812 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.812 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:50:59.814 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:50:59.815 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:50:59.815 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:50:59.816 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:50:59.818 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:50:59.825 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:50:59.828 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:50:59.829 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:50:59.830 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:50:59.831 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:50:59.837 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:50:59.841 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:50:59.844 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:50:59.845 +01:00 [DBG] Committing transaction.
2022-11-23 20:50:59.855 +01:00 [DBG] Committed transaction.
2022-11-23 20:50:59.856 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.857 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:50:59.859 +01:00 [DBG] Disposing transaction.
2022-11-23 20:50:59.860 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:50:59.862 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:50:59.864 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:50:59.866 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:51:20.636 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ElementStatesChanged", Arguments: [ System.Collections.Generic.List`1[smart.core.Models.StateElement] ], StreamIds: [  ] }.
2022-11-23 20:53:29.478 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-23 20:53:29.724 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-23 20:53:29.726 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-23 20:53:29.774 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:53:29.775 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:53:29.775 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:53:29.776 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:53:29.777 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:53:29.777 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-23 20:53:29.855 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:53:29.867 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:29.871 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-23 20:53:29.917 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-23 20:53:29.947 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-23 20:53:29.951 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2022-11-23 20:53:29.953 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:29.958 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:29.962 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:53:29.969 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:53:29.971 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:29.973 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:29.974 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-23 20:53:29.976 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-23 20:53:29.977 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-23 20:53:29.978 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-11-23 20:53:29.978 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:29.982 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:29.982 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:53:29.985 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-23 20:53:29.986 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:29.987 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:30.003 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:53:30.004 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:53:30.005 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:30.006 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:30.007 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-23 20:53:30.009 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-23 20:53:30.013 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:53:30.014 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:30.014 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:30.021 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-11-23 20:53:30.031 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:53:30.073 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-23 20:53:30.118 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-11-23 20:53:30.132 +01:00 [DBG] Hosting starting
2022-11-23 20:53:30.181 +01:00 [INF] Now listening on: http://[::]:5011
2022-11-23 20:53:30.182 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-11-23 20:53:30.183 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-11-23 20:53:30.184 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-11-23 20:53:30.184 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-23 20:53:30.185 +01:00 [INF] Hosting environment: Development
2022-11-23 20:53:30.186 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-11-23 20:53:30.187 +01:00 [DBG] Hosting started
2022-11-23 20:53:35.526 +01:00 [DBG] Connection id "0HMMDHHK4NF1E" accepted.
2022-11-23 20:53:35.527 +01:00 [DBG] Connection id "0HMMDHHK4NF1E" started.
2022-11-23 20:53:35.552 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0
2022-11-23 20:53:35.561 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-11-23 20:53:35.577 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub/negotiate'
2022-11-23 20:53:35.579 +01:00 [DBG] Request matched endpoint '/handlerHub/negotiate'
2022-11-23 20:53:35.587 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:53:35.590 +01:00 [INF] Executing endpoint '/handlerHub/negotiate'
2022-11-23 20:53:35.598 +01:00 [DBG] New connection RU_2lGqz_Ot8FQ8Krkcc8g created.
2022-11-23 20:53:35.602 +01:00 [DBG] Sending negotiation response.
2022-11-23 20:53:35.605 +01:00 [INF] Executed endpoint '/handlerHub/negotiate'
2022-11-23 20:53:35.606 +01:00 [DBG] Connection id "0HMMDHHK4NF1E" completed keep alive response.
2022-11-23 20:53:35.609 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 57.7056ms
2022-11-23 20:53:35.626 +01:00 [DBG] Connection id "0HMMDHHK4NF1F" accepted.
2022-11-23 20:53:35.627 +01:00 [DBG] Connection id "0HMMDHHK4NF1F" started.
2022-11-23 20:53:35.630 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/handlerHub?id=p1hb5RzIsZWxtcppv9iAAQ - -
2022-11-23 20:53:35.631 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub'
2022-11-23 20:53:35.632 +01:00 [DBG] Request matched endpoint '/handlerHub'
2022-11-23 20:53:35.636 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:53:35.637 +01:00 [INF] Executing endpoint '/handlerHub'
2022-11-23 20:53:35.640 +01:00 [DBG] Establishing new connection.
2022-11-23 20:53:35.643 +01:00 [DBG] OnConnectedAsync started.
2022-11-23 20:53:35.645 +01:00 [DBG] Socket opened using Sub-Protocol: 'null'.
2022-11-23 20:53:35.668 +01:00 [DBG] Found protocol implementation for requested protocol: json.
2022-11-23 20:53:35.670 +01:00 [DBG] Completed connection handshake. Using HubProtocol 'json'.
2022-11-23 20:53:35.710 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:53:35.729 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:35.756 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:35.759 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:53:35.762 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:53:35.768 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:53:35.778 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:35.781 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:35.782 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:53:35.790 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:53:35.812 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:53:35.813 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:53:35.824 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:53:35.830 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:53:35.841 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:53:35.844 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:53:35.847 +01:00 [DBG] Committing transaction.
2022-11-23 20:53:35.884 +01:00 [DBG] Committed transaction.
2022-11-23 20:53:35.886 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:35.887 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:35.889 +01:00 [DBG] Disposing transaction.
2022-11-23 20:53:35.894 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:35.897 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:53:35.898 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:53:35.916 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ReportHandlerType", Arguments: [ 1, Shelly ], StreamIds: [  ] }.
2022-11-23 20:53:35.923 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:53:35.961 +01:00 [DBG] Compiling query expression: 
'DbSet<ElementHandler>()
    .Include(h => h.HomeElements)
    .FirstOrDefault(h => h.Id == __handlerId_0 && (int)h.HandlerType == (int)__handlerType_1)'
2022-11-23 20:53:35.983 +01:00 [DBG] Including navigation: 'ElementHandler.HomeElements'.
2022-11-23 20:53:36.090 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ElementHandler>(
    asyncEnumerable: new SingleQueryingEnumerable<ElementHandler>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ElementHandler.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ElementHandler.Connected (bool) Required, 1], [Property: ElementHandler.HandlerType (EHandlerType) Required, 2], [Property: ElementHandler.Name (string) Required, 3], [Property: ElementHandler.SettingsData (string), 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: HomeElement.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: HomeElement.ConnectionInfo (string), 6], [Property: HomeElement.ConnectionValidated (bool) Required, 7], [Property: HomeElement.ElementHandlerId (no field, int) Shadow Required FK Index, 8], [Property: HomeElement.ElementType (EElementType) Required, 9], [Property: HomeElement.Name (string) Required, 10], [Property: HomeElement.SettingsData (string), 11], [Property: HomeElement.StateData (string), 12], [Property: HomeElement.StateTimestamp (DateTime?), 13] }
                3 -> 5
            SELECT t.Id, t.Connected, t.HandlerType, t.Name, t.SettingsData, e0.Id, e0.ConnectionInfo, e0.ConnectionValidated, e0.ElementHandlerId, e0.ElementType, e0.Name, e0.SettingsData, e0.StateData, e0.StateTimestamp
            FROM 
            (
                SELECT TOP(1) e.Id, e.Connected, e.HandlerType, e.Name, e.SettingsData
                FROM ElementHandlers AS e
                WHERE (e.Id == @__handlerId_0) && (e.HandlerType == @__handlerType_1)
            ) AS t
            LEFT JOIN Elements AS e0 ON t.Id == e0.ElementHandlerId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementHandler>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:53:36.110 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:53:36.111 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:53:36.113 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:36.117 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:36.119 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:53:36.125 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:53:36.133 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:36.147 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:36.161 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:53:36.162 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:36.163 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:36.166 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:36.167 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:36.168 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:53:36.169 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:53:36.180 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:53:36.181 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:36.182 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:36.184 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:53:36.189 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:53:36.191 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:53:36.192 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:53:36.192 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:53:36.196 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:53:36.199 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:53:36.200 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:53:36.201 +01:00 [DBG] Committing transaction.
2022-11-23 20:53:36.222 +01:00 [DBG] Committed transaction.
2022-11-23 20:53:36.222 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:36.223 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:36.224 +01:00 [DBG] Disposing transaction.
2022-11-23 20:53:36.225 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:36.227 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:53:36.242 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:53:40.112 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ElementStatesChanged", Arguments: [ System.Collections.Generic.List`1[smart.core.Models.StateElement] ], StreamIds: [  ] }.
2022-11-23 20:53:46.397 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:53:46.400 +01:00 [DBG] Compiling query expression: 
'DbSet<HomeElement>()
    .FirstOrDefault(e => e.Id == __item_Id_0)'
2022-11-23 20:53:46.404 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<HomeElement>(
    asyncEnumerable: new SingleQueryingEnumerable<HomeElement>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: HomeElement.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: HomeElement.ConnectionInfo (string), 1], [Property: HomeElement.ConnectionValidated (bool) Required, 2], [Property: HomeElement.ElementHandlerId (no field, int) Shadow Required FK Index, 3], [Property: HomeElement.ElementType (EElementType) Required, 4], [Property: HomeElement.Name (string) Required, 5], [Property: HomeElement.SettingsData (string), 6], [Property: HomeElement.StateData (string), 7], [Property: HomeElement.StateTimestamp (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.ConnectionInfo, e.ConnectionValidated, e.ElementHandlerId, e.ElementType, e.Name, e.SettingsData, e.StateData, e.StateTimestamp
            FROM Elements AS e
            WHERE e.Id == @__item_Id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, HomeElement>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:53:46.408 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:53:46.408 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:53:46.409 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:46.410 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:46.411 +01:00 [DBG] Executing DbCommand [Parameters=[@__item_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`ConnectionInfo`, `e`.`ConnectionValidated`, `e`.`ElementHandlerId`, `e`.`ElementType`, `e`.`Name`, `e`.`SettingsData`, `e`.`StateData`, `e`.`StateTimestamp`
FROM `Elements` AS `e`
WHERE `e`.`Id` = @__item_Id_0
LIMIT 1
2022-11-23 20:53:46.416 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__item_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`ConnectionInfo`, `e`.`ConnectionValidated`, `e`.`ElementHandlerId`, `e`.`ElementType`, `e`.`Name`, `e`.`SettingsData`, `e`.`StateData`, `e`.`StateTimestamp`
FROM `Elements` AS `e`
WHERE `e`.`Id` = @__item_Id_0
LIMIT 1
2022-11-23 20:53:46.418 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:46.419 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:53:46.419 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:46.420 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:48.180 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:53:48.181 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:53:48.183 +01:00 [DBG] The unchanged property 'HomeElement.StateData' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:53:48.184 +01:00 [DBG] An entity of type 'HomeElement' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:48.185 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:53:48.186 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:48.188 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:48.188 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:53:48.190 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:53:48.193 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:53:48.194 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-23 20:53:48.195 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Elements` SET `StateData` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:53:48.198 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Elements` SET `StateData` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:53:48.200 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:53:48.200 +01:00 [DBG] Committing transaction.
2022-11-23 20:53:48.241 +01:00 [DBG] Committed transaction.
2022-11-23 20:53:48.242 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:48.243 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:53:48.244 +01:00 [DBG] Disposing transaction.
2022-11-23 20:53:48.245 +01:00 [DBG] An entity of type 'HomeElement' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:53:48.246 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:53:48.247 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:54:11.422 +01:00 [DBG] Connection id "0HMMDHHK4NF1E" reset.
2022-11-23 20:54:11.422 +01:00 [DBG] Connection id "0HMMDHHK4NF1F" reset.
2022-11-23 20:54:11.425 +01:00 [DBG] Connection id "0HMMDHHK4NF1E" sending FIN because: "The client closed the connection."
2022-11-23 20:54:11.426 +01:00 [DBG] Connection id "0HMMDHHK4NF1F" sending FIN because: "The client closed the connection."
2022-11-23 20:54:11.427 +01:00 [DBG] Connection id "0HMMDHHK4NF1E" disconnecting.
2022-11-23 20:54:11.430 +01:00 [DBG] Connection id "0HMMDHHK4NF1F" disconnecting.
2022-11-23 20:54:11.430 +01:00 [DBG] Socket connection closed prematurely.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
 ---> Microsoft.AspNetCore.Connections.ConnectionResetException: Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
 ---> System.Net.Sockets.SocketException (10054): Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Http.Connections.Internal.Transports.WebSocketsServerTransport.StartReceiving(WebSocket socket)
2022-11-23 20:54:11.435 +01:00 [DBG] Connection id "0HMMDHHK4NF1E" stopped.
2022-11-23 20:54:11.452 +01:00 [DBG] Waiting for the application to finish sending data.
2022-11-23 20:54:11.453 +01:00 [DBG] Socket closed.
2022-11-23 20:54:11.455 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:54:11.456 +01:00 [DBG] Compiling query expression: 
'DbSet<ElementHandler>()
    .FirstOrDefault(h => h.Id == __handlerId_0)'
2022-11-23 20:54:11.462 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ElementHandler>(
    asyncEnumerable: new SingleQueryingEnumerable<ElementHandler>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ElementHandler.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ElementHandler.Connected (bool) Required, 1], [Property: ElementHandler.HandlerType (EHandlerType) Required, 2], [Property: ElementHandler.Name (string) Required, 3], [Property: ElementHandler.SettingsData (string), 4] }
            SELECT TOP(1) e.Id, e.Connected, e.HandlerType, e.Name, e.SettingsData
            FROM ElementHandlers AS e
            WHERE e.Id == @__handlerId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementHandler>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:54:11.466 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:54:11.468 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-23 20:54:11.469 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:11.471 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:11.472 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:54:11.476 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:54:11.478 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:11.479 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:54:11.480 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:11.481 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:11.482 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:11.483 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:11.483 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:54:11.484 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:54:11.485 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:54:11.486 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:11.487 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:54:11.488 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:11.490 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:11.492 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:54:11.494 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:54:11.497 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:54:11.498 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:54:11.501 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-11-23 20:54:11.502 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:54:11.505 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:54:11.507 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:54:11.509 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:54:11.509 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:54:11.510 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:54:11.601 +01:00 [INF] Executed DbCommand (91ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:54:11.604 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:54:11.605 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:54:11.606 +01:00 [DBG] Committing transaction.
2022-11-23 20:54:11.641 +01:00 [DBG] Committed transaction.
2022-11-23 20:54:11.642 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:11.642 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:11.643 +01:00 [DBG] Disposing transaction.
2022-11-23 20:54:11.644 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:11.646 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:11.647 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:54:11.648 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:54:11.649 +01:00 [DBG] OnConnectedAsync ending.
2022-11-23 20:54:11.652 +01:00 [DBG] Removing connection p1hb5RzIsZWxtcppv9iAAQ from the list of connections.
2022-11-23 20:54:11.654 +01:00 [INF] Executed endpoint '/handlerHub'
2022-11-23 20:54:11.655 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/handlerHub?id=p1hb5RzIsZWxtcppv9iAAQ - - - 101 - - 36025.8118ms
2022-11-23 20:54:11.656 +01:00 [DBG] Connection id "0HMMDHHK4NF1F" stopped.
2022-11-23 20:54:13.435 +01:00 [DBG] Connection id "0HMMDHHK4NF1G" accepted.
2022-11-23 20:54:13.435 +01:00 [DBG] Connection id "0HMMDHHK4NF1G" started.
2022-11-23 20:54:13.440 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0
2022-11-23 20:54:13.441 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub/negotiate'
2022-11-23 20:54:13.442 +01:00 [DBG] Request matched endpoint '/handlerHub/negotiate'
2022-11-23 20:54:13.444 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:54:13.446 +01:00 [INF] Executing endpoint '/handlerHub/negotiate'
2022-11-23 20:54:13.447 +01:00 [DBG] New connection D3vGTU8mBeC_9JVLSb0i8A created.
2022-11-23 20:54:13.448 +01:00 [DBG] Sending negotiation response.
2022-11-23 20:54:13.448 +01:00 [INF] Executed endpoint '/handlerHub/negotiate'
2022-11-23 20:54:13.449 +01:00 [DBG] Connection id "0HMMDHHK4NF1G" completed keep alive response.
2022-11-23 20:54:13.450 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/handlerHub/negotiate?negotiateVersion=1 - 0 - 200 316 application/json 9.8234ms
2022-11-23 20:54:13.470 +01:00 [DBG] Connection id "0HMMDHHK4NF1H" accepted.
2022-11-23 20:54:13.471 +01:00 [DBG] Connection id "0HMMDHHK4NF1H" started.
2022-11-23 20:54:13.473 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/handlerHub?id=iBFSuWXHRkXQDBCAFQFKmA - -
2022-11-23 20:54:13.474 +01:00 [DBG] 1 candidate(s) found for the request path '/handlerHub'
2022-11-23 20:54:13.474 +01:00 [DBG] Request matched endpoint '/handlerHub'
2022-11-23 20:54:13.476 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:54:13.476 +01:00 [INF] Executing endpoint '/handlerHub'
2022-11-23 20:54:13.477 +01:00 [DBG] Establishing new connection.
2022-11-23 20:54:13.478 +01:00 [DBG] OnConnectedAsync started.
2022-11-23 20:54:13.478 +01:00 [DBG] Socket opened using Sub-Protocol: 'null'.
2022-11-23 20:54:13.499 +01:00 [DBG] Found protocol implementation for requested protocol: json.
2022-11-23 20:54:13.500 +01:00 [DBG] Completed connection handshake. Using HubProtocol 'json'.
2022-11-23 20:54:13.501 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:54:13.503 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.504 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.506 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:54:13.506 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:54:13.507 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:54:13.508 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.510 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.510 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:54:13.512 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:54:13.513 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:54:13.514 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:54:13.515 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:54:13.519 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:54:13.521 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:54:13.522 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:54:13.524 +01:00 [DBG] Committing transaction.
2022-11-23 20:54:13.551 +01:00 [DBG] Committed transaction.
2022-11-23 20:54:13.551 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.552 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.553 +01:00 [DBG] Disposing transaction.
2022-11-23 20:54:13.554 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.555 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:54:13.556 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:54:13.558 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ReportHandlerType", Arguments: [ 1, Shelly ], StreamIds: [  ] }.
2022-11-23 20:54:13.559 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:54:13.562 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:54:13.563 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-23 20:54:13.564 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.566 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.567 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:54:13.571 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__handlerId_0='?' (DbType = Int32), @__handlerType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e0`.`Id`, `e0`.`ConnectionInfo`, `e0`.`ConnectionValidated`, `e0`.`ElementHandlerId`, `e0`.`ElementType`, `e0`.`Name`, `e0`.`SettingsData`, `e0`.`StateData`, `e0`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE (`e`.`Id` = @__handlerId_0) AND (`e`.`HandlerType` = @__handlerType_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e0` ON `t`.`Id` = `e0`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:54:13.574 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.575 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.576 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:54:13.576 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.580 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.582 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.583 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.584 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:54:13.585 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:54:13.585 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:54:13.587 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.589 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:54:13.589 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.591 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.592 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:54:13.594 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:54:13.596 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:54:13.596 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:54:13.597 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:54:13.598 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:54:13.601 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:54:13.602 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:54:13.603 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:54:13.603 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:54:13.604 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:54:13.607 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:54:13.609 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:54:13.612 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:54:13.612 +01:00 [DBG] Committing transaction.
2022-11-23 20:54:13.621 +01:00 [DBG] Committed transaction.
2022-11-23 20:54:13.621 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.622 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.623 +01:00 [DBG] Disposing transaction.
2022-11-23 20:54:13.623 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.624 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.628 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:54:13.630 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:54:13.714 +01:00 [DBG] Received hub invocation: InvocationMessage { InvocationId: "", Target: "ElementStatesChanged", Arguments: [ System.Collections.Generic.List`1[smart.core.Models.StateElement] ], StreamIds: [  ] }.
2022-11-23 20:54:13.716 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:54:13.718 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:54:13.719 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:54:13.719 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.721 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.722 +01:00 [DBG] Executing DbCommand [Parameters=[@__item_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`ConnectionInfo`, `e`.`ConnectionValidated`, `e`.`ElementHandlerId`, `e`.`ElementType`, `e`.`Name`, `e`.`SettingsData`, `e`.`StateData`, `e`.`StateTimestamp`
FROM `Elements` AS `e`
WHERE `e`.`Id` = @__item_Id_0
LIMIT 1
2022-11-23 20:54:13.725 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__item_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`ConnectionInfo`, `e`.`ConnectionValidated`, `e`.`ElementHandlerId`, `e`.`ElementType`, `e`.`Name`, `e`.`SettingsData`, `e`.`StateData`, `e`.`StateTimestamp`
FROM `Elements` AS `e`
WHERE `e`.`Id` = @__item_Id_0
LIMIT 1
2022-11-23 20:54:13.726 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:13.727 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:54:13.728 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:13.729 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:17.101 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:54:17.102 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:54:17.103 +01:00 [DBG] The unchanged property 'HomeElement.StateData' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:54:17.105 +01:00 [DBG] An entity of type 'HomeElement' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:17.106 +01:00 [DBG] The unchanged property 'HomeElement.StateTimestamp' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:54:17.107 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:54:17.108 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:17.110 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:17.111 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:54:17.112 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:54:17.113 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:54:17.114 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:54:17.114 +01:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Elements` SET `StateData` = @p0, `StateTimestamp` = @p1
WHERE `Id` = @p2;
SELECT ROW_COUNT();
2022-11-23 20:54:17.119 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Elements` SET `StateData` = @p0, `StateTimestamp` = @p1
WHERE `Id` = @p2;
SELECT ROW_COUNT();
2022-11-23 20:54:17.121 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:54:17.121 +01:00 [DBG] Committing transaction.
2022-11-23 20:54:17.161 +01:00 [DBG] Committed transaction.
2022-11-23 20:54:17.161 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:17.162 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:54:17.163 +01:00 [DBG] Disposing transaction.
2022-11-23 20:54:17.164 +01:00 [DBG] An entity of type 'HomeElement' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:54:17.165 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-11-23 20:54:17.166 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:55:28.438 +01:00 [DBG] Connection id "0HMMDHHK4NF1G" received FIN.
2022-11-23 20:55:28.439 +01:00 [DBG] Connection id "0HMMDHHK4NF1G" sending FIN because: "The client closed the connection."
2022-11-23 20:55:28.440 +01:00 [DBG] Connection id "0HMMDHHK4NF1G" disconnecting.
2022-11-23 20:55:28.443 +01:00 [DBG] Connection id "0HMMDHHK4NF1G" stopped.
2022-11-23 20:58:25.215 +01:00 [DBG] Connection id "0HMMDHHK4NF1I" accepted.
2022-11-23 20:58:25.216 +01:00 [DBG] Connection id "0HMMDHHK4NF1I" started.
2022-11-23 20:58:25.217 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 33
2022-11-23 20:58:25.217 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:58:25.218 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Put (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:58:25.219 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:58:25.220 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:58:25.285 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:58:25.287 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __tokenUserId_Value_0)'
2022-11-23 20:58:25.289 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-11-23 20:58:25.300 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__tokenUserId_Value_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:58:25.304 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:25.305 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:25.306 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:25.319 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:25.320 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:25.326 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:25.330 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:25.336 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:25.345 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:25.346 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:25.347 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:25.348 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:25.393 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:58:25.403 +01:00 [INF] Route matched with {action = "Put", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(smart.contract.ElementCommandDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:58:25.405 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:58:25.406 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:58:25.407 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:58:25.408 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:58:25.410 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:58:25.411 +01:00 [INF] Authorization failed for the request at filter 'bp.net.Auth.Server.Attributes.AuthorizeAttribute'.
2022-11-23 20:58:25.413 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-11-23 20:58:25.417 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Put (smart.api) in 5.0751ms
2022-11-23 20:58:25.418 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:58:25.419 +01:00 [DBG] Connection id "0HMMDHHK4NF1I" completed keep alive response.
2022-11-23 20:58:25.420 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:58:25.421 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 33 - 401 - application/json;+charset=utf-8 204.1008ms
2022-11-23 20:58:25.422 +01:00 [DBG] Connection id "0HMMDHHK4NF1I", Request id "0HMMDHHK4NF1I:00000001": started reading request body.
2022-11-23 20:58:25.423 +01:00 [DBG] Connection id "0HMMDHHK4NF1I", Request id "0HMMDHHK4NF1I:00000001": done reading request body.
2022-11-23 20:58:28.719 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51
2022-11-23 20:58:28.719 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-23 20:58:28.720 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-23 20:58:28.721 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-23 20:58:28.722 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:58:28.723 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-23 20:58:28.725 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-23 20:58:28.727 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:58:28.728 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:58:28.729 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:58:28.730 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:58:28.731 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:58:28.734 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-23 20:58:28.735 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-23 20:58:28.738 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-23 20:58:28.740 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-23 20:58:28.741 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:58:28.743 +01:00 [DBG] Connection id "0HMMDHHK4NF1I", Request id "0HMMDHHK4NF1I:00000002": started reading request body.
2022-11-23 20:58:28.744 +01:00 [DBG] Connection id "0HMMDHHK4NF1I", Request id "0HMMDHHK4NF1I:00000002": done reading request body.
2022-11-23 20:58:28.747 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-23 20:58:28.748 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-23 20:58:28.749 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-23 20:58:28.750 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-23 20:58:28.756 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-23 20:58:28.764 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:58:28.766 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.RefreshTokens)
    .FirstOrDefault(x => x.Username == __model_Username_0)'
2022-11-23 20:58:28.767 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-11-23 20:58:28.772 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Username == @__model_Username_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:58:28.776 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:28.777 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:28.778 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:28.785 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:28.785 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:28.790 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:28.792 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:28.793 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:28.794 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:28.796 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:28.797 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:28.798 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:29.032 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:29.034 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:58:29.034 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:58:29.038 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:29.041 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:29.044 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:29.047 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:58:29.047 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:29.049 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:29.050 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:58:29.052 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:58:29.053 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:58:29.054 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:29.055 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-23 20:58:29.055 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:58:29.059 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:58:29.064 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:58:29.066 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:29.068 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:29.069 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:29.071 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-23 20:58:29.076 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-23 20:58:29.079 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:29.080 +01:00 [DBG] Committing transaction.
2022-11-23 20:58:29.115 +01:00 [DBG] Committed transaction.
2022-11-23 20:58:29.115 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:29.116 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:29.117 +01:00 [DBG] Disposing transaction.
2022-11-23 20:58:29.118 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:29.120 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:29.121 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:58:29.125 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-23 20:58:29.128 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-23 20:58:29.129 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-23 20:58:29.129 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-23 20:58:29.130 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-23 20:58:29.131 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-23 20:58:29.137 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 404.196ms
2022-11-23 20:58:29.138 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-23 20:58:29.139 +01:00 [DBG] Connection id "0HMMDHHK4NF1I" completed keep alive response.
2022-11-23 20:58:29.140 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:58:29.141 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51 - 200 - application/json;+charset=utf-8 422.1352ms
2022-11-23 20:58:30.310 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 33
2022-11-23 20:58:30.311 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:58:30.312 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Put (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:58:30.313 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:58:30.313 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:58:30.315 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:58:30.316 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:30.317 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:30.317 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.319 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.320 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:30.324 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:30.327 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:30.328 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:30.329 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:30.331 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:30.332 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:30.332 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.333 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.338 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __id_0)'
2022-11-23 20:58:30.341 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-11-23 20:58:30.346 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__id_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:58:30.350 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:30.350 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:30.352 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.354 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.356 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:30.360 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:30.362 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:30.363 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.364 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.365 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:58:30.366 +01:00 [INF] Route matched with {action = "Put", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(smart.contract.ElementCommandDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:58:30.368 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:58:30.369 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:58:30.369 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:58:30.373 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:58:30.374 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:58:30.375 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:58:30.376 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:58:30.377 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto' ...
2022-11-23 20:58:30.378 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto' using the name '' in request data ...
2022-11-23 20:58:30.379 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:58:30.381 +01:00 [DBG] Connection id "0HMMDHHK4NF1I", Request id "0HMMDHHK4NF1I:00000003": started reading request body.
2022-11-23 20:58:30.382 +01:00 [DBG] Connection id "0HMMDHHK4NF1I", Request id "0HMMDHHK4NF1I:00000003": done reading request body.
2022-11-23 20:58:30.385 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.ElementCommandDto'
2022-11-23 20:58:30.386 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:58:30.388 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:58:30.389 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.ElementCommandDto' ...
2022-11-23 20:58:30.391 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:58:30.393 +01:00 [DBG] Compiling query expression: 
'DbSet<ElementHandler>()
    .Include(h => h.HomeElements)
    .FirstOrDefault(h => h.HomeElements
        .Any(e => e.Id == __dto_Id_0))'
2022-11-23 20:58:30.397 +01:00 [DBG] Including navigation: 'ElementHandler.HomeElements'.
2022-11-23 20:58:30.403 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ElementHandler>(
    asyncEnumerable: new SingleQueryingEnumerable<ElementHandler>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ElementHandler.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ElementHandler.Connected (bool) Required, 1], [Property: ElementHandler.HandlerType (EHandlerType) Required, 2], [Property: ElementHandler.Name (string) Required, 3], [Property: ElementHandler.SettingsData (string), 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: HomeElement.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: HomeElement.ConnectionInfo (string), 6], [Property: HomeElement.ConnectionValidated (bool) Required, 7], [Property: HomeElement.ElementHandlerId (no field, int) Shadow Required FK Index, 8], [Property: HomeElement.ElementType (EElementType) Required, 9], [Property: HomeElement.Name (string) Required, 10], [Property: HomeElement.SettingsData (string), 11], [Property: HomeElement.StateData (string), 12], [Property: HomeElement.StateTimestamp (DateTime?), 13] }
                3 -> 5
            SELECT t.Id, t.Connected, t.HandlerType, t.Name, t.SettingsData, e1.Id, e1.ConnectionInfo, e1.ConnectionValidated, e1.ElementHandlerId, e1.ElementType, e1.Name, e1.SettingsData, e1.StateData, e1.StateTimestamp
            FROM 
            (
                SELECT TOP(1) e.Id, e.Connected, e.HandlerType, e.Name, e.SettingsData
                FROM ElementHandlers AS e
                WHERE EXISTS (
                    SELECT 1
                    FROM Elements AS e0
                    WHERE ((e.Id != NULL) && (e.Id == e0.ElementHandlerId)) && (e0.Id == @__dto_Id_0))
            ) AS t
            LEFT JOIN Elements AS e1 ON t.Id == e1.ElementHandlerId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ElementHandler>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-23 20:58:30.410 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:30.411 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:30.412 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.414 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.415 +01:00 [DBG] Executing DbCommand [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e1`.`Id`, `e1`.`ConnectionInfo`, `e1`.`ConnectionValidated`, `e1`.`ElementHandlerId`, `e1`.`ElementType`, `e1`.`Name`, `e1`.`SettingsData`, `e1`.`StateData`, `e1`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE EXISTS (
        SELECT 1
        FROM `Elements` AS `e0`
        WHERE (`e`.`Id` = `e0`.`ElementHandlerId`) AND (`e0`.`Id` = @__dto_Id_0))
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e1` ON `t`.`Id` = `e1`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:58:30.422 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e1`.`Id`, `e1`.`ConnectionInfo`, `e1`.`ConnectionValidated`, `e1`.`ElementHandlerId`, `e1`.`ElementType`, `e1`.`Name`, `e1`.`SettingsData`, `e1`.`StateData`, `e1`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE EXISTS (
        SELECT 1
        FROM `Elements` AS `e0`
        WHERE (`e`.`Id` = `e0`.`ElementHandlerId`) AND (`e0`.`Id` = @__dto_Id_0))
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e1` ON `t`.`Id` = `e1`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:58:30.424 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:30.426 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:30.427 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:30.428 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.429 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:30.433 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-11-23 20:58:30.435 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Put (smart.api) in 60.6005ms
2022-11-23 20:58:30.437 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:58:30.438 +01:00 [DBG] Connection id "0HMMDHHK4NF1I" completed keep alive response.
2022-11-23 20:58:30.439 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:58:30.440 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 33 - 200 0 - 129.8514ms
2022-11-23 20:58:34.183 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 34
2022-11-23 20:58:34.184 +01:00 [DBG] 1 candidate(s) found for the request path '/Element'
2022-11-23 20:58:34.185 +01:00 [DBG] Endpoint 'smart.api.Controllers.ElementController.Put (smart.api)' with route pattern 'Element' is valid for the request path '/Element'
2022-11-23 20:58:34.186 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:58:34.187 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-23 20:58:34.188 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:58:34.190 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:34.191 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:34.192 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.193 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.194 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:34.200 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:34.202 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:34.203 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:34.204 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:34.205 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:34.206 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:34.207 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.208 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.209 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:34.210 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:34.211 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.212 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.215 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:34.218 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-23 20:58:34.220 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:34.221 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.222 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.223 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:58:34.223 +01:00 [INF] Route matched with {action = "Put", controller = "Element"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(smart.contract.ElementCommandDto) on controller smart.api.Controllers.ElementController (smart.api).
2022-11-23 20:58:34.224 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-23 20:58:34.225 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-23 20:58:34.226 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-23 20:58:34.228 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-23 20:58:34.229 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-23 20:58:34.232 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:58:34.232 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ElementController (smart.api)
2022-11-23 20:58:34.233 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto' ...
2022-11-23 20:58:34.234 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto' using the name '' in request data ...
2022-11-23 20:58:34.235 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-23 20:58:34.236 +01:00 [DBG] Connection id "0HMMDHHK4NF1I", Request id "0HMMDHHK4NF1I:00000004": started reading request body.
2022-11-23 20:58:34.236 +01:00 [DBG] Connection id "0HMMDHHK4NF1I", Request id "0HMMDHHK4NF1I:00000004": done reading request body.
2022-11-23 20:58:34.237 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.ElementCommandDto'
2022-11-23 20:58:34.238 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:58:34.239 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:58:34.240 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.ElementCommandDto' ...
2022-11-23 20:58:34.240 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.ElementCommandDto'.
2022-11-23 20:58:34.242 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:34.242 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:34.243 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.245 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.246 +01:00 [DBG] Executing DbCommand [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e1`.`Id`, `e1`.`ConnectionInfo`, `e1`.`ConnectionValidated`, `e1`.`ElementHandlerId`, `e1`.`ElementType`, `e1`.`Name`, `e1`.`SettingsData`, `e1`.`StateData`, `e1`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE EXISTS (
        SELECT 1
        FROM `Elements` AS `e0`
        WHERE (`e`.`Id` = `e0`.`ElementHandlerId`) AND (`e0`.`Id` = @__dto_Id_0))
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e1` ON `t`.`Id` = `e1`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:58:34.250 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Connected`, `t`.`HandlerType`, `t`.`Name`, `t`.`SettingsData`, `e1`.`Id`, `e1`.`ConnectionInfo`, `e1`.`ConnectionValidated`, `e1`.`ElementHandlerId`, `e1`.`ElementType`, `e1`.`Name`, `e1`.`SettingsData`, `e1`.`StateData`, `e1`.`StateTimestamp`
FROM (
    SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
    FROM `ElementHandlers` AS `e`
    WHERE EXISTS (
        SELECT 1
        FROM `Elements` AS `e0`
        WHERE (`e`.`Id` = `e0`.`ElementHandlerId`) AND (`e0`.`Id` = @__dto_Id_0))
    LIMIT 1
) AS `t`
LEFT JOIN `Elements` AS `e1` ON `t`.`Id` = `e1`.`ElementHandlerId`
ORDER BY `t`.`Id`
2022-11-23 20:58:34.252 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:34.253 +01:00 [DBG] Context 'SmartContext' started tracking 'HomeElement' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:34.254 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:34.255 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.255 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:34.257 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-11-23 20:58:34.257 +01:00 [INF] Executed action smart.api.Controllers.ElementController.Put (smart.api) in 25.7714ms
2022-11-23 20:58:34.258 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ElementController.Put (smart.api)'
2022-11-23 20:58:34.261 +01:00 [DBG] Connection id "0HMMDHHK4NF1I" completed keep alive response.
2022-11-23 20:58:34.262 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:58:34.263 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5011/Element application/json;+charset=utf-8 34 - 200 0 - 79.6279ms
2022-11-23 20:58:45.692 +01:00 [DBG] Connection id "0HMMDHHK4NF1H" reset.
2022-11-23 20:58:45.693 +01:00 [DBG] Connection id "0HMMDHHK4NF1H" sending FIN because: "The client closed the connection."
2022-11-23 20:58:45.693 +01:00 [DBG] Socket connection closed prematurely.
System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
 ---> Microsoft.AspNetCore.Connections.ConnectionResetException: Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
 ---> System.Net.Sockets.SocketException (10054): Eine vorhandene Verbindung wurde vom Remotehost geschlossen.
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.GetReadAsyncResult()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1UpgradeMessageBody.ReadAsyncInternalAwaited(ValueTask`1 readTask, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.ReadAtLeastAsyncCore(Memory`1 buffer, Int32 minimumBytes, Boolean throwOnEndOfStream, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Http.Connections.Internal.Transports.WebSocketsServerTransport.StartReceiving(WebSocket socket)
2022-11-23 20:58:45.694 +01:00 [DBG] Connection id "0HMMDHHK4NF1H" disconnecting.
2022-11-23 20:58:45.706 +01:00 [DBG] Waiting for the application to finish sending data.
2022-11-23 20:58:45.709 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-23 20:58:45.711 +01:00 [DBG] Socket closed.
2022-11-23 20:58:45.713 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:45.714 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-23 20:58:45.715 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:45.717 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:45.717 +01:00 [DBG] Executing DbCommand [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:58:45.719 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__handlerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `e`.`Id`, `e`.`Connected`, `e`.`HandlerType`, `e`.`Name`, `e`.`SettingsData`
FROM `ElementHandlers` AS `e`
WHERE `e`.`Id` = @__handlerId_0
LIMIT 1
2022-11-23 20:58:45.721 +01:00 [DBG] Context 'SmartContext' started tracking 'ElementHandler' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:45.722 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:45.723 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:45.724 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:45.726 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.LogItem'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:45.730 +01:00 [DBG] Context 'SmartContext' started tracking 'LogItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:45.731 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-23 20:58:45.732 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-23 20:58:45.733 +01:00 [DBG] The unchanged property 'ElementHandler.Connected' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:58:45.735 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:45.737 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-23 20:58:45.738 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:45.740 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:45.741 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-23 20:58:45.743 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-23 20:58:45.744 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-23 20:58:45.745 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:45.746 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:45.747 +01:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:58:45.749 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ElementHandlers` SET `Connected` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2022-11-23 20:58:45.750 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:45.751 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-23 20:58:45.752 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-23 20:58:45.752 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:58:45.755 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Log` (`ElementName`, `HandlerName`, `MetaInfo`, `Timestamp`, `Type`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Log`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-23 20:58:45.759 +01:00 [DBG] The foreign key property 'LogItem.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-23 20:58:45.760 +01:00 [DBG] A data reader was disposed.
2022-11-23 20:58:45.761 +01:00 [DBG] Committing transaction.
2022-11-23 20:58:45.794 +01:00 [DBG] Committed transaction.
2022-11-23 20:58:45.795 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:45.796 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-23 20:58:45.797 +01:00 [DBG] Disposing transaction.
2022-11-23 20:58:45.798 +01:00 [DBG] An entity of type 'LogItem' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:45.799 +01:00 [DBG] An entity of type 'ElementHandler' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-23 20:58:45.800 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-23 20:58:45.801 +01:00 [DBG] 'SmartContext' disposed.
2022-11-23 20:58:45.802 +01:00 [DBG] OnConnectedAsync ending.
2022-11-23 20:58:45.802 +01:00 [DBG] Removing connection iBFSuWXHRkXQDBCAFQFKmA from the list of connections.
2022-11-23 20:58:45.803 +01:00 [INF] Executed endpoint '/handlerHub'
2022-11-23 20:58:45.804 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/handlerHub?id=iBFSuWXHRkXQDBCAFQFKmA - - - 101 - - 272331.4557ms
2022-11-23 20:58:45.805 +01:00 [DBG] Connection id "0HMMDHHK4NF1H" stopped.
2022-11-24 22:03:51.450 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-24 22:03:51.759 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-24 22:03:51.762 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-24 22:03:51.824 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-24 22:03:51.824 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-24 22:03:51.825 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-24 22:03:51.826 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-24 22:03:51.826 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-24 22:03:51.827 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-24 22:03:51.917 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-24 22:03:51.955 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:51.960 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-24 22:03:52.029 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-24 22:03:52.090 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-24 22:03:52.093 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2022-11-24 22:03:52.095 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.102 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.106 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-24 22:03:52.114 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-24 22:03:52.116 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.118 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.120 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-24 22:03:52.122 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-24 22:03:52.123 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-24 22:03:52.124 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-11-24 22:03:52.124 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.131 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.132 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-24 22:03:52.135 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-24 22:03:52.137 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.137 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.160 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-24 22:03:52.161 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-24 22:03:52.162 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.164 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.165 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-24 22:03:52.168 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-24 22:03:52.171 +01:00 [DBG] A data reader was disposed.
2022-11-24 22:03:52.171 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.172 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-24 22:03:52.178 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-11-24 22:03:52.190 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-24 22:03:52.248 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-24 22:03:52.310 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-11-24 22:03:52.325 +01:00 [DBG] Hosting starting
2022-11-24 22:03:52.410 +01:00 [INF] Now listening on: http://[::]:5011
2022-11-24 22:03:52.410 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-11-24 22:03:52.411 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-11-24 22:03:52.412 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-11-24 22:03:52.413 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-24 22:03:52.414 +01:00 [INF] Hosting environment: Development
2022-11-24 22:03:52.414 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-11-24 22:03:52.418 +01:00 [DBG] Hosting started
2022-11-26 19:11:37.868 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-26 19:11:38.286 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-26 19:11:38.288 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-26 19:11:38.349 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:11:38.350 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:11:38.351 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:11:38.352 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:11:38.353 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:11:38.354 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:11:38.470 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 19:11:38.494 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.498 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-26 19:11:38.591 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-26 19:11:38.645 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-26 19:11:38.648 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2022-11-26 19:11:38.650 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.659 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.665 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-26 19:11:38.679 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-26 19:11:38.681 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.683 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.684 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-26 19:11:38.687 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-26 19:11:38.688 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-26 19:11:38.689 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-11-26 19:11:38.689 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.692 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.693 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-26 19:11:38.694 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-26 19:11:38.696 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.696 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.719 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 19:11:38.720 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 19:11:38.721 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.722 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.723 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-26 19:11:38.726 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-26 19:11:38.729 +01:00 [DBG] A data reader was disposed.
2022-11-26 19:11:38.729 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.730 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:11:38.742 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-11-26 19:11:38.752 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 19:11:38.848 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-26 19:11:38.915 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-11-26 19:11:38.940 +01:00 [DBG] Hosting starting
2022-11-26 19:11:39.059 +01:00 [INF] Now listening on: http://[::]:5011
2022-11-26 19:11:39.060 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-11-26 19:11:39.060 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-11-26 19:11:39.061 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-11-26 19:11:39.061 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-26 19:11:39.062 +01:00 [INF] Hosting environment: Development
2022-11-26 19:11:39.063 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-11-26 19:11:39.064 +01:00 [DBG] Hosting started
2022-11-26 19:11:47.269 +01:00 [DBG] Connection id "0HMMFR6NBM4ME" accepted.
2022-11-26 19:11:47.271 +01:00 [DBG] Connection id "0HMMFR6NBM4ME" started.
2022-11-26 19:11:47.316 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate text/plain;+charset=utf-8 41
2022-11-26 19:11:47.332 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-11-26 19:11:47.354 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 19:11:47.357 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 19:11:47.359 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 19:11:47.369 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 19:11:47.372 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 19:11:47.390 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 19:11:47.395 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 19:11:47.405 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 19:11:47.407 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 19:11:47.411 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 19:11:47.413 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 19:11:47.417 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 19:11:47.418 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 19:11:47.439 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 19:11:47.441 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 19:11:47.448 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'text/plain; charset=utf-8'.
2022-11-26 19:11:47.449 +01:00 [DBG] No input formatter was found to support the content type 'text/plain; charset=utf-8' for use with the [FromBody] attribute.
2022-11-26 19:11:47.452 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 19:11:47.453 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 19:11:47.454 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 19:11:47.460 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 19:11:47.462 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter'.
2022-11-26 19:11:47.464 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 19:11:47.467 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 19:11:47.468 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-11-26 19:11:47.471 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-11-26 19:11:47.472 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-11-26 19:11:47.500 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 82.4377ms
2022-11-26 19:11:47.501 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 19:11:47.502 +01:00 [DBG] Connection id "0HMMFR6NBM4ME" completed keep alive response.
2022-11-26 19:11:47.511 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate text/plain;+charset=utf-8 41 - 415 - application/problem+json;+charset=utf-8 195.9257ms
2022-11-26 19:11:47.513 +01:00 [DBG] Connection id "0HMMFR6NBM4ME", Request id "0HMMFR6NBM4ME:00000001": started reading request body.
2022-11-26 19:11:47.515 +01:00 [DBG] Connection id "0HMMFR6NBM4ME", Request id "0HMMFR6NBM4ME:00000001": done reading request body.
2022-11-26 19:12:42.809 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 19:12:42.811 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 19:12:42.812 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 19:12:42.814 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 19:12:42.816 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2022-11-26 19:12:42.817 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2022-11-26 19:12:42.818 +01:00 [DBG] Connection id "0HMMFR6NBM4ME" completed keep alive response.
2022-11-26 19:12:42.820 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 405 0 - 11.0004ms
2022-11-26 19:13:15.692 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 19:13:15.693 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 19:13:15.694 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 19:13:15.696 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 19:13:15.696 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2022-11-26 19:13:15.697 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2022-11-26 19:13:15.698 +01:00 [DBG] Connection id "0HMMFR6NBM4ME" completed keep alive response.
2022-11-26 19:13:15.699 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 405 0 - 7.0360ms
2022-11-26 19:13:41.982 +01:00 [DBG] Connection id "0HMMFR6NBM4ME" received FIN.
2022-11-26 19:13:42.004 +01:00 [DBG] Connection id "0HMMFR6NBM4ME" disconnecting.
2022-11-26 19:13:42.013 +01:00 [DBG] Connection id "0HMMFR6NBM4ME" stopped.
2022-11-26 19:13:42.021 +01:00 [DBG] Connection id "0HMMFR6NBM4ME" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-11-26 19:16:36.367 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-26 19:16:36.684 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-26 19:16:36.687 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-26 19:16:36.761 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:16:36.762 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:16:36.763 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:16:36.764 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:16:36.766 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:16:36.767 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-26 19:16:36.921 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 19:16:36.948 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:36.952 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-26 19:16:37.027 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-26 19:16:37.068 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-26 19:16:37.072 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2022-11-26 19:16:37.073 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.082 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.087 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-26 19:16:37.096 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-26 19:16:37.098 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.100 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.101 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-26 19:16:37.103 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-26 19:16:37.104 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-26 19:16:37.105 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-11-26 19:16:37.106 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.110 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.115 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-26 19:16:37.118 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-26 19:16:37.119 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.120 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.138 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 19:16:37.138 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 19:16:37.139 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.145 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.146 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-26 19:16:37.151 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-26 19:16:37.154 +01:00 [DBG] A data reader was disposed.
2022-11-26 19:16:37.154 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.157 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:37.164 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-11-26 19:16:37.176 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 19:16:37.231 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-26 19:16:37.293 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-11-26 19:16:37.314 +01:00 [DBG] Hosting starting
2022-11-26 19:16:37.388 +01:00 [INF] Now listening on: http://[::]:5011
2022-11-26 19:16:37.389 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-11-26 19:16:37.390 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-11-26 19:16:37.391 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-11-26 19:16:37.392 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-26 19:16:37.393 +01:00 [INF] Hosting environment: Development
2022-11-26 19:16:37.393 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-11-26 19:16:37.395 +01:00 [DBG] Hosting started
2022-11-26 19:16:45.217 +01:00 [DBG] Connection id "0HMMFR9G54L5F" accepted.
2022-11-26 19:16:45.219 +01:00 [DBG] Connection id "0HMMFR9G54L5F" started.
2022-11-26 19:16:45.247 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 19:16:45.256 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-11-26 19:16:45.278 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 19:16:45.279 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 19:16:45.289 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 19:16:45.290 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 19:16:45.291 +01:00 [INF] CORS policy execution successful.
2022-11-26 19:16:45.292 +01:00 [DBG] The request is a preflight request.
2022-11-26 19:16:45.301 +01:00 [DBG] Connection id "0HMMFR9G54L5F" completed keep alive response.
2022-11-26 19:16:45.303 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 56.3490ms
2022-11-26 19:16:45.306 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 19:16:45.310 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 19:16:45.312 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 19:16:45.314 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 19:16:45.315 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 19:16:45.316 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 19:16:45.317 +01:00 [INF] CORS policy execution successful.
2022-11-26 19:16:45.320 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 19:16:45.335 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 19:16:45.340 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 19:16:45.341 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 19:16:45.342 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 19:16:45.345 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 19:16:45.346 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 19:16:45.348 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 19:16:45.350 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 19:16:45.354 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 19:16:45.356 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 19:16:45.358 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 19:16:45.395 +01:00 [DBG] Connection id "0HMMFR9G54L5F", Request id "0HMMFR9G54L5F:00000002": started reading request body.
2022-11-26 19:16:45.396 +01:00 [DBG] Connection id "0HMMFR9G54L5F", Request id "0HMMFR9G54L5F:00000002": done reading request body.
2022-11-26 19:16:45.401 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 19:16:45.402 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 19:16:45.403 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 19:16:45.405 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 19:16:45.416 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 19:16:45.506 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 19:16:45.564 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.RefreshTokens)
    .FirstOrDefault(x => x.Username == __model_Username_0)'
2022-11-26 19:16:45.664 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-11-26 19:16:45.860 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Username == @__model_Username_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-26 19:16:45.891 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 19:16:45.892 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 19:16:45.904 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:45.907 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:45.909 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 19:16:45.923 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 19:16:45.956 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 19:16:45.979 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 19:16:45.998 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 19:16:46.001 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 19:16:46.005 +01:00 [DBG] A data reader was disposed.
2022-11-26 19:16:46.007 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:46.008 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:46.828 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 19:16:46.831 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 19:16:46.833 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 19:16:46.843 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 19:16:46.854 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 19:16:46.862 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 19:16:46.867 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 19:16:46.876 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:46.881 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:46.884 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 19:16:46.901 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 19:16:46.925 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 19:16:46.933 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 19:16:46.934 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 19:16:46.937 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 19:16:46.976 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 19:16:47.007 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 19:16:47.010 +01:00 [DBG] A data reader was disposed.
2022-11-26 19:16:47.018 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 19:16:47.018 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 19:16:47.019 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 19:16:47.022 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 19:16:47.024 +01:00 [DBG] A data reader was disposed.
2022-11-26 19:16:47.026 +01:00 [DBG] Committing transaction.
2022-11-26 19:16:47.035 +01:00 [DBG] Committed transaction.
2022-11-26 19:16:47.037 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:47.038 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 19:16:47.040 +01:00 [DBG] Disposing transaction.
2022-11-26 19:16:47.043 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 19:16:47.044 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 19:16:47.046 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 19:16:47.050 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 19:16:47.053 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 19:16:47.053 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 19:16:47.054 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 19:16:47.055 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 19:16:47.056 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 19:16:47.082 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 1733.7116ms
2022-11-26 19:16:47.084 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 19:16:47.086 +01:00 [DBG] Connection id "0HMMFR9G54L5F" completed keep alive response.
2022-11-26 19:16:47.092 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 19:16:47.094 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 1787.7169ms
2022-11-26 20:35:26.068 +01:00 [DBG] Connection id "0HMMFR9G54L5G" accepted.
2022-11-26 20:35:26.068 +01:00 [DBG] Connection id "0HMMFR9G54L5F" received FIN.
2022-11-26 20:35:26.072 +01:00 [DBG] Connection id "0HMMFR9G54L5G" started.
2022-11-26 20:35:26.101 +01:00 [DBG] Connection id "0HMMFR9G54L5F" disconnecting.
2022-11-26 20:35:26.101 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:35:26.102 +01:00 [DBG] Connection id "0HMMFR9G54L5F" sending FIN because: "The client closed the connection."
2022-11-26 20:35:26.103 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:35:26.106 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:35:26.107 +01:00 [DBG] Connection id "0HMMFR9G54L5F" stopped.
2022-11-26 20:35:26.108 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:35:26.108 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:35:26.109 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:35:26.109 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:35:26.110 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:35:26.111 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 9.4796ms
2022-11-26 20:35:26.111 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:35:26.112 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:35:26.113 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:35:26.114 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:35:26.114 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:35:26.115 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:35:26.118 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:35:26.121 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:35:26.121 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:35:26.123 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:35:26.124 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:35:26.125 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:35:26.126 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:35:26.127 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:35:26.128 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:35:26.129 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:35:26.130 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:35:26.130 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:35:26.133 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:35:26.134 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000002": started reading request body.
2022-11-26 20:35:26.135 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000002": done reading request body.
2022-11-26 20:35:26.135 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:35:26.136 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:35:26.137 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:35:26.137 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:35:26.138 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:35:26.140 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:35:26.143 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:35:26.144 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:35:26.145 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:35:26.152 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:35:26.153 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:35:26.158 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:35:26.161 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.163 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.164 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.166 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.167 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.170 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:35:26.170 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:35:26.171 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:35:26.276 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.277 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:35:26.278 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:35:26.279 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.280 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.281 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.283 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:35:26.283 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:35:26.285 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:35:26.286 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:35:26.287 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:35:26.288 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:35:26.289 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:35:26.290 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:35:26.290 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:35:26.293 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:35:26.296 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:35:26.297 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:35:26.297 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:35:26.298 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:35:26.299 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:35:26.304 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:35:26.306 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:35:26.307 +01:00 [DBG] Committing transaction.
2022-11-26 20:35:26.351 +01:00 [DBG] Committed transaction.
2022-11-26 20:35:26.352 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:35:26.352 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:35:26.353 +01:00 [DBG] Disposing transaction.
2022-11-26 20:35:26.354 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.355 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:35:26.356 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:35:26.357 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:35:26.359 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:35:26.359 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:35:26.360 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:35:26.361 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:35:26.362 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:35:26.363 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 234.7758ms
2022-11-26 20:35:26.364 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:35:26.364 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:35:26.365 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:35:26.366 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 254.4166ms
2022-11-26 20:38:25.447 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:38:25.450 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:38:25.451 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:38:25.451 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:38:25.452 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:38:25.453 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:38:25.453 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:38:25.454 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:38:25.455 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 7.5427ms
2022-11-26 20:38:25.457 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:38:25.458 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:38:25.459 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:38:25.460 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:38:25.461 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:38:25.461 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:38:25.462 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:38:25.463 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:38:25.464 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:38:25.465 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:38:25.466 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:38:25.467 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:38:25.469 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:38:25.470 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:38:25.471 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:38:25.471 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:38:25.474 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:38:25.475 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:38:25.476 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:38:25.477 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000004": started reading request body.
2022-11-26 20:38:25.478 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000004": done reading request body.
2022-11-26 20:38:25.479 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:38:25.480 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:38:25.480 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:38:25.481 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:38:25.482 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:38:25.483 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:38:25.485 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:38:25.485 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:38:25.486 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:38:25.489 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:38:25.490 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:38:25.494 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:38:25.496 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.497 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.498 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.499 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.500 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.501 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.504 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:38:25.505 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:38:25.505 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:38:25.607 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.608 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:38:25.609 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:38:25.611 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.612 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.614 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.615 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:38:25.616 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:38:25.618 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:38:25.619 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:38:25.620 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:38:25.621 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:38:25.623 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:38:25.623 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:38:25.624 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:38:25.688 +01:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:38:25.691 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:38:25.692 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:38:25.693 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:38:25.694 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:38:25.695 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:38:25.699 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:38:25.701 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:38:25.702 +01:00 [DBG] Committing transaction.
2022-11-26 20:38:25.708 +01:00 [DBG] Committed transaction.
2022-11-26 20:38:25.708 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:38:25.709 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:38:25.710 +01:00 [DBG] Disposing transaction.
2022-11-26 20:38:25.711 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.713 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:38:25.714 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:38:25.715 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:38:25.719 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:38:25.719 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:38:25.720 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:38:25.721 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:38:25.722 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:38:25.723 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 252.8701ms
2022-11-26 20:38:25.724 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:38:25.725 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:38:25.726 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:38:25.727 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 269.5460ms
2022-11-26 20:40:05.676 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:40:05.678 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:40:05.679 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:40:05.680 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:40:05.681 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:40:05.681 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:40:05.682 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:40:05.683 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:40:05.684 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 8.0833ms
2022-11-26 20:40:05.686 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:40:05.687 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:40:05.687 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:40:05.688 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:40:05.689 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:40:05.690 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:40:05.692 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:40:05.693 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:40:05.693 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:40:05.695 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:40:05.696 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:40:05.697 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:40:05.698 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:40:05.699 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:40:05.700 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:40:05.701 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:40:05.702 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:40:05.702 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:40:05.704 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:40:05.705 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000006": started reading request body.
2022-11-26 20:40:05.707 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000006": done reading request body.
2022-11-26 20:40:05.708 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:40:05.709 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:40:05.710 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:40:05.711 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:40:05.712 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:40:05.714 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:40:05.716 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:40:05.716 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:40:05.717 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:05.719 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:05.720 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:40:05.725 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:40:05.728 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.729 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.730 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.731 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.732 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.733 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.734 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.735 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:40:05.735 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:05.736 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:05.840 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.841 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:40:05.842 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:40:05.843 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.844 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.846 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.847 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:40:05.847 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:05.849 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:05.849 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:40:05.851 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:40:05.851 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:40:05.852 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:40:05.853 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:40:05.854 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:40:05.873 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:40:05.875 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:40:05.877 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:40:05.877 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:40:05.878 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:40:05.879 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:40:05.881 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:40:05.883 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:40:05.883 +01:00 [DBG] Committing transaction.
2022-11-26 20:40:05.916 +01:00 [DBG] Committed transaction.
2022-11-26 20:40:05.917 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:05.917 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:05.918 +01:00 [DBG] Disposing transaction.
2022-11-26 20:40:05.919 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.920 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:05.921 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:40:05.922 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:40:05.924 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:40:05.924 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:40:05.925 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:40:05.926 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:40:05.927 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:40:05.928 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 227.8167ms
2022-11-26 20:40:05.929 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:40:05.930 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:40:05.930 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:40:05.931 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 245.1607ms
2022-11-26 20:40:13.844 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:40:13.845 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:40:13.845 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:40:13.846 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:40:13.847 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:40:13.847 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:40:13.848 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:40:13.849 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:40:13.850 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 5.6498ms
2022-11-26 20:40:13.850 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:40:13.851 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:40:13.852 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:40:13.854 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:40:13.854 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:40:13.855 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:40:13.855 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:40:13.856 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:40:13.857 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:40:13.858 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:40:13.859 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:40:13.860 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:40:13.862 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:40:13.863 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:40:13.864 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:40:13.865 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:40:13.866 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:40:13.867 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:40:13.870 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:40:13.871 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000008": started reading request body.
2022-11-26 20:40:13.872 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000008": done reading request body.
2022-11-26 20:40:13.873 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:40:13.873 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:40:13.874 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:40:13.875 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:40:13.875 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:40:13.877 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:40:13.878 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:40:13.878 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:40:13.879 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:13.881 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:13.882 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:40:13.888 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:40:13.890 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:13.891 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:13.892 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:13.893 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:13.894 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:14.107 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:14.108 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:14.109 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:14.110 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:40:14.111 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:14.111 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:14.214 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:14.216 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:40:14.218 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:40:14.219 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:14.222 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:14.225 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:14.226 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:40:14.227 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:14.229 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:14.232 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:40:14.234 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:40:14.235 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:40:14.236 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:40:14.236 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:40:14.237 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:40:14.306 +01:00 [INF] Executed DbCommand (69ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:40:14.309 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:40:14.310 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:40:14.311 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:40:14.312 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:40:14.313 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:40:14.316 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:40:14.320 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:40:14.320 +01:00 [DBG] Committing transaction.
2022-11-26 20:40:14.326 +01:00 [DBG] Committed transaction.
2022-11-26 20:40:14.326 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:14.327 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:40:14.328 +01:00 [DBG] Disposing transaction.
2022-11-26 20:40:14.329 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:14.330 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:40:14.332 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:40:14.334 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:40:14.336 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:40:14.337 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:40:14.338 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:40:14.339 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:40:14.340 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:40:14.341 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 477.4468ms
2022-11-26 20:40:14.342 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:40:14.343 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:40:14.344 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:40:14.345 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 494.5264ms
2022-11-26 20:41:12.165 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:41:12.168 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:41:12.169 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:41:12.169 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:41:12.170 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:41:12.171 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:41:12.171 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:41:12.172 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:41:12.173 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 8.2909ms
2022-11-26 20:41:12.176 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:41:12.177 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:41:12.177 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:41:12.178 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:41:12.180 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:41:12.181 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:41:12.181 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:41:12.182 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:41:12.184 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:41:12.185 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:41:12.186 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:41:12.187 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:41:12.189 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:41:12.191 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:41:12.192 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:41:12.193 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:41:12.194 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:41:12.195 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:41:12.197 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:41:12.198 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000000A": started reading request body.
2022-11-26 20:41:12.199 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000000A": done reading request body.
2022-11-26 20:41:12.200 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:41:12.200 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:41:12.201 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:41:12.202 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:41:12.203 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:41:12.204 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:41:12.207 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:41:12.208 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:41:12.209 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:41:12.211 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:41:12.212 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:41:12.216 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:41:12.219 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.220 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.223 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.224 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.226 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.227 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.229 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.230 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.231 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.233 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:41:12.233 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:41:12.234 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:41:12.336 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.337 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:41:12.338 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:41:12.339 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.340 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.342 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.343 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:41:12.344 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:41:12.346 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:41:12.347 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:41:12.349 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:41:12.350 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:41:12.352 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:41:12.353 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-26 20:41:12.355 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:41:12.359 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:41:12.362 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:41:12.364 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:41:12.364 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:41:12.365 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:41:12.366 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:41:12.369 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:41:12.372 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:41:12.372 +01:00 [DBG] Committing transaction.
2022-11-26 20:41:12.405 +01:00 [DBG] Committed transaction.
2022-11-26 20:41:12.405 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:41:12.406 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:41:12.407 +01:00 [DBG] Disposing transaction.
2022-11-26 20:41:12.408 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.410 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:41:12.411 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:41:12.412 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:41:12.415 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:41:12.416 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:41:12.417 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:41:12.417 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:41:12.419 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:41:12.421 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 228.3823ms
2022-11-26 20:41:12.422 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:41:12.423 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:41:12.424 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:41:12.424 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 248.4985ms
2022-11-26 20:43:56.806 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:43:56.809 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:43:56.810 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:43:56.810 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:43:56.811 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:43:56.811 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:43:56.812 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:43:56.813 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:43:56.814 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 7.7990ms
2022-11-26 20:43:56.817 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:43:56.817 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:43:56.818 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:43:56.819 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:43:56.820 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:43:56.820 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:43:56.821 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:43:56.822 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:43:56.822 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:43:56.824 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:43:56.826 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:43:56.827 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:43:56.829 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:43:56.830 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:43:56.831 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:43:56.831 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:43:56.832 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:43:56.833 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:43:56.834 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:43:56.835 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000000C": started reading request body.
2022-11-26 20:43:56.836 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000000C": done reading request body.
2022-11-26 20:43:56.837 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:43:56.837 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:43:56.838 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:43:56.839 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:43:56.841 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:43:56.842 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:43:56.843 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:43:56.844 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:43:56.845 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:43:56.846 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:43:56.847 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:43:56.851 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:43:56.853 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.854 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.856 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.857 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.859 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.860 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.862 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.864 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.865 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.866 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.867 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:43:56.868 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:43:56.869 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:43:56.970 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.971 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:43:56.972 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:43:56.973 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.974 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.975 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:56.976 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:43:56.977 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:43:56.978 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:43:56.980 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:43:56.981 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:43:56.982 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:43:56.983 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:43:56.983 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:43:56.984 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:43:56.987 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:43:56.989 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:43:56.990 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:43:56.991 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:43:56.991 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:43:56.992 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:43:56.995 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:43:56.997 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:43:56.998 +01:00 [DBG] Committing transaction.
2022-11-26 20:43:57.031 +01:00 [DBG] Committed transaction.
2022-11-26 20:43:57.032 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:43:57.033 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:43:57.034 +01:00 [DBG] Disposing transaction.
2022-11-26 20:43:57.034 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:57.035 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:43:57.037 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:43:57.038 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:43:57.039 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:43:57.039 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:43:57.040 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:43:57.042 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:43:57.043 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:43:57.044 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 213.1712ms
2022-11-26 20:43:57.045 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:43:57.046 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:43:57.046 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:43:57.047 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 230.2650ms
2022-11-26 20:44:14.782 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:44:14.782 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:44:14.783 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:44:14.784 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:44:14.784 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:44:14.785 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:44:14.786 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:44:14.786 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:44:14.787 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 5.5516ms
2022-11-26 20:44:14.788 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:44:14.788 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:44:14.789 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:44:14.790 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:44:14.791 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:44:14.791 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:44:14.792 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:44:14.793 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:44:14.794 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:44:14.795 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:44:14.797 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:44:14.798 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:44:14.799 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:44:14.800 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:44:14.801 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:44:14.802 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:44:14.803 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:44:14.804 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:44:14.805 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:44:14.808 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000000E": started reading request body.
2022-11-26 20:44:14.809 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000000E": done reading request body.
2022-11-26 20:44:14.809 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:44:14.810 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:44:14.811 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:44:14.812 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:44:14.813 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:44:14.814 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:44:14.815 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:44:14.816 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:44:14.816 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:44:14.818 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:44:14.819 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:44:14.824 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:44:14.827 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.828 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.829 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.830 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.831 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.832 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.833 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.834 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.835 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.837 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.838 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.839 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:44:14.840 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:44:14.841 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:44:14.942 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.944 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:44:14.945 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:44:14.946 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.947 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.948 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:14.949 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:44:14.949 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:44:14.951 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:44:14.951 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:44:14.953 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:44:14.954 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:44:14.955 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:44:14.955 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:44:14.956 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:44:15.022 +01:00 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:44:15.024 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:44:15.025 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:44:15.025 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:44:15.026 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:44:15.027 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:44:15.030 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:44:15.031 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:44:15.032 +01:00 [DBG] Committing transaction.
2022-11-26 20:44:15.061 +01:00 [DBG] Committed transaction.
2022-11-26 20:44:15.062 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:44:15.063 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:44:15.063 +01:00 [DBG] Disposing transaction.
2022-11-26 20:44:15.064 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:15.065 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:44:15.066 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:44:15.067 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:44:15.069 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:44:15.069 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:44:15.070 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:44:15.071 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:44:15.072 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:44:15.073 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 271.3507ms
2022-11-26 20:44:15.073 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:44:15.074 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:44:15.075 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:44:15.076 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 287.6105ms
2022-11-26 20:45:38.018 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:45:38.021 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:45:38.022 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:45:38.023 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:45:38.023 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:45:38.024 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:45:38.025 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:45:38.025 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:45:38.027 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 7.9135ms
2022-11-26 20:45:38.029 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:45:38.030 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:45:38.030 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:45:38.031 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:45:38.032 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:45:38.034 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:45:38.034 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:45:38.035 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:45:38.036 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:45:38.038 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:45:38.039 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:45:38.040 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:45:38.041 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:45:38.042 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:45:38.043 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:45:38.044 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:45:38.045 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:45:38.046 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:45:38.047 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:45:38.049 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000010": started reading request body.
2022-11-26 20:45:38.050 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000010": done reading request body.
2022-11-26 20:45:38.051 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:45:38.052 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:45:38.052 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:45:38.053 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:45:38.054 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:45:38.055 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:45:38.057 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:45:38.057 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:45:38.058 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:45:38.059 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:45:38.060 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:45:38.064 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:45:38.067 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.068 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.069 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.070 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.071 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.072 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.073 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.074 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.075 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.076 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.077 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.078 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.082 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:45:38.083 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:45:38.084 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:45:38.187 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.189 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:45:38.190 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:45:38.190 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.191 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.192 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.194 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:45:38.194 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:45:38.196 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:45:38.196 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:45:38.198 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:45:38.198 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:45:38.199 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:45:38.200 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:45:38.201 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:45:38.206 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:45:38.207 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:45:38.208 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:45:38.209 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:45:38.210 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:45:38.211 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:45:38.214 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:45:38.215 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:45:38.216 +01:00 [DBG] Committing transaction.
2022-11-26 20:45:38.250 +01:00 [DBG] Committed transaction.
2022-11-26 20:45:38.250 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:45:38.251 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:45:38.252 +01:00 [DBG] Disposing transaction.
2022-11-26 20:45:38.253 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.254 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:45:38.255 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:45:38.256 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:45:38.257 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:45:38.258 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:45:38.259 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:45:38.259 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:45:38.260 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:45:38.261 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 218.0868ms
2022-11-26 20:45:38.262 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:45:38.263 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:45:38.263 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:45:38.266 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 236.5158ms
2022-11-26 20:46:09.992 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:46:09.994 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:46:09.995 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:46:09.996 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:46:09.996 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:46:09.997 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:46:09.998 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:46:09.998 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:46:10.001 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 7.6924ms
2022-11-26 20:46:10.004 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:46:10.004 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:46:10.005 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:46:10.006 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:46:10.007 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:46:10.008 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:46:10.008 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:46:10.009 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:46:10.010 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:46:10.011 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:46:10.012 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:46:10.013 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:46:10.015 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:46:10.016 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:46:10.017 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:46:10.020 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:46:10.021 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:46:10.022 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:46:10.023 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:46:10.024 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000012": started reading request body.
2022-11-26 20:46:10.025 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000012": done reading request body.
2022-11-26 20:46:10.026 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:46:10.027 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:46:10.027 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:46:10.028 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:46:10.029 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:46:10.030 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:46:10.031 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:46:10.032 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:46:10.033 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:10.038 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:10.039 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:46:10.044 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:46:10.046 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.047 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.048 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.051 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.052 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.053 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.054 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.055 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.056 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.057 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.058 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.059 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.060 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.061 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:46:10.062 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:10.063 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:10.166 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.167 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:46:10.168 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:46:10.169 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.170 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.171 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.172 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:46:10.173 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:10.175 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:10.176 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:46:10.177 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:46:10.178 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:46:10.179 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:46:10.179 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:46:10.180 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:46:10.183 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:46:10.185 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:46:10.186 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:46:10.186 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:46:10.187 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:46:10.188 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:46:10.192 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:46:10.194 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:46:10.194 +01:00 [DBG] Committing transaction.
2022-11-26 20:46:10.229 +01:00 [DBG] Committed transaction.
2022-11-26 20:46:10.230 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:10.231 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:10.231 +01:00 [DBG] Disposing transaction.
2022-11-26 20:46:10.232 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.233 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:10.234 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:46:10.236 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:46:10.238 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:46:10.239 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:46:10.240 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:46:10.241 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:46:10.242 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:46:10.243 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 226.1187ms
2022-11-26 20:46:10.244 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:46:10.245 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:46:10.246 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:46:10.247 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 243.5057ms
2022-11-26 20:46:15.549 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:46:15.550 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:46:15.551 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:46:15.551 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:46:15.552 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:46:15.553 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:46:15.553 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:46:15.554 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:46:15.554 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 5.1771ms
2022-11-26 20:46:15.555 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:46:15.556 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:46:15.557 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:46:15.558 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:46:15.559 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:46:15.559 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:46:15.560 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:46:15.561 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:46:15.561 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:46:15.563 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:46:15.564 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:46:15.565 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:46:15.567 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:46:15.568 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:46:15.569 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:46:15.569 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:46:15.570 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:46:15.571 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:46:15.575 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:46:15.576 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000014": started reading request body.
2022-11-26 20:46:15.577 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000014": done reading request body.
2022-11-26 20:46:15.578 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:46:15.578 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:46:15.579 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:46:15.580 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:46:15.581 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:46:15.582 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:46:15.583 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:46:15.584 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:46:15.584 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:15.586 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:15.588 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:46:15.592 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:46:15.594 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.595 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.596 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.597 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.598 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.599 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.600 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.601 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.604 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.606 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.607 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.608 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.610 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.611 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.613 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:46:15.614 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:15.615 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:15.718 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.719 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:46:15.720 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:46:15.720 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.722 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.723 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.724 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:46:15.725 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:15.726 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:15.727 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:46:15.730 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:46:15.731 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:46:15.732 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:46:15.732 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:46:15.733 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:46:15.779 +01:00 [INF] Executed DbCommand (46ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:46:15.781 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:46:15.782 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:46:15.783 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:46:15.784 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:46:15.784 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:46:15.787 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:46:15.791 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:46:15.791 +01:00 [DBG] Committing transaction.
2022-11-26 20:46:15.799 +01:00 [DBG] Committed transaction.
2022-11-26 20:46:15.799 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:15.800 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:46:15.801 +01:00 [DBG] Disposing transaction.
2022-11-26 20:46:15.802 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.803 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:46:15.804 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:46:15.806 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:46:15.808 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:46:15.809 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:46:15.810 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:46:15.811 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:46:15.812 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:46:15.813 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 244.8258ms
2022-11-26 20:46:15.814 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:46:15.816 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:46:15.817 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:46:15.818 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 262.4396ms
2022-11-26 20:48:01.566 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:48:01.569 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:48:01.570 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:48:01.570 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:48:01.571 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:48:01.572 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:48:01.572 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:48:01.573 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:48:01.575 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 8.9531ms
2022-11-26 20:48:01.577 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:48:01.577 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:48:01.578 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:48:01.579 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:48:01.580 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:48:01.580 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:48:01.581 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:48:01.582 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:48:01.584 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:48:01.586 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:48:01.586 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:48:01.587 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:48:01.589 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:48:01.590 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:48:01.591 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:48:01.591 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:48:01.592 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:48:01.593 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:48:01.594 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:48:01.595 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000016": started reading request body.
2022-11-26 20:48:01.596 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000016": done reading request body.
2022-11-26 20:48:01.597 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:48:01.598 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:48:01.600 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:48:01.601 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:48:01.602 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:48:01.603 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:48:01.605 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:48:01.605 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:48:01.606 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:01.607 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:01.608 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:48:01.613 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:48:01.617 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.618 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.619 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.620 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.621 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.622 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.623 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.624 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.625 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.625 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.627 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.628 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.631 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.632 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.633 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.634 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:48:01.634 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:01.635 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:01.738 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.739 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:48:01.740 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:48:01.741 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.743 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.745 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.746 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:48:01.747 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:01.749 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:01.749 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:48:01.751 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:48:01.751 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:48:01.754 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:48:01.754 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:48:01.755 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:48:01.758 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:48:01.760 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:48:01.761 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:48:01.762 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:48:01.762 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:48:01.763 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:48:01.766 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:48:01.767 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:48:01.769 +01:00 [DBG] Committing transaction.
2022-11-26 20:48:01.797 +01:00 [DBG] Committed transaction.
2022-11-26 20:48:01.798 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:01.798 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:01.800 +01:00 [DBG] Disposing transaction.
2022-11-26 20:48:01.800 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.801 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:01.802 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:48:01.803 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:48:01.805 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:48:01.805 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:48:01.806 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:48:01.807 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:48:01.808 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:48:01.809 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 217.7611ms
2022-11-26 20:48:01.809 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:48:01.810 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:48:01.811 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:48:01.812 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 235.1131ms
2022-11-26 20:48:39.168 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:48:39.171 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:48:39.171 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:48:39.172 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:48:39.173 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:48:39.173 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:48:39.174 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:48:39.175 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:48:39.176 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 8.3984ms
2022-11-26 20:48:39.179 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:48:39.180 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:48:39.181 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:48:39.182 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:48:39.183 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:48:39.183 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:48:39.184 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:48:39.186 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:48:39.187 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:48:39.188 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:48:39.189 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:48:39.191 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:48:39.192 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:48:39.193 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:48:39.195 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:48:39.195 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:48:39.196 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:48:39.197 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:48:39.198 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:48:39.199 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000018": started reading request body.
2022-11-26 20:48:39.200 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000018": done reading request body.
2022-11-26 20:48:39.202 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:48:39.202 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:48:39.203 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:48:39.204 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:48:39.204 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:48:39.206 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:48:39.207 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:48:39.208 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:48:39.209 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:39.210 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:39.211 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:48:39.215 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:48:39.218 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.219 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.220 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.221 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.222 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.223 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.224 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.226 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.227 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.228 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.229 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.230 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.231 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.233 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.234 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.235 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.236 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:48:39.237 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:39.237 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:39.338 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.340 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:48:39.341 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:48:39.342 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.343 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.344 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.345 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:48:39.346 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:39.348 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:39.349 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:48:39.350 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:48:39.351 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:48:39.352 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:48:39.353 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:48:39.354 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:48:39.359 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:48:39.362 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:48:39.364 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:48:39.366 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:48:39.367 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-26 20:48:39.368 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:48:39.374 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:48:39.380 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:48:39.381 +01:00 [DBG] Committing transaction.
2022-11-26 20:48:39.416 +01:00 [DBG] Committed transaction.
2022-11-26 20:48:39.417 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:39.418 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:48:39.419 +01:00 [DBG] Disposing transaction.
2022-11-26 20:48:39.420 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.422 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:48:39.423 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:48:39.424 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:48:39.427 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:48:39.427 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:48:39.428 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:48:39.429 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:48:39.430 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:48:39.431 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 236.9396ms
2022-11-26 20:48:39.432 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:48:39.435 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:48:39.436 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:48:39.436 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 256.8786ms
2022-11-26 20:50:21.111 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:50:21.115 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:50:21.116 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:50:21.117 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:50:21.118 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:50:21.118 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:50:21.119 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:50:21.120 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:50:21.121 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 9.6009ms
2022-11-26 20:50:21.126 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 36
2022-11-26 20:50:21.127 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:50:21.127 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:50:21.129 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:50:21.129 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:50:21.130 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:50:21.131 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:50:21.132 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:50:21.132 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:50:21.134 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:50:21.135 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:50:21.136 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:50:21.137 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:50:21.138 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:50:21.139 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:50:21.145 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:50:21.146 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:50:21.147 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:50:21.148 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:50:21.150 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000001A": started reading request body.
2022-11-26 20:50:21.151 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000001A": done reading request body.
2022-11-26 20:50:21.152 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:50:21.152 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:50:21.153 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:50:21.154 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:50:21.155 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:50:21.157 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:50:21.159 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:50:21.159 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:50:21.160 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:50:21.162 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:50:21.163 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:50:21.167 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:50:21.169 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:50:21.169 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:50:21.170 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:50:21.294 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 154.9998ms
2022-11-26 20:50:21.296 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:50:21.360 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:50:21.361 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:50:21.361 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 36 - 400 - application/json 235.9569ms
2022-11-26 20:51:38.880 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:51:38.887 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:51:38.888 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:51:38.889 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:51:38.890 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:51:38.890 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:51:38.892 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:51:38.893 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:51:38.894 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 13.3596ms
2022-11-26 20:51:38.898 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:51:38.898 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:51:38.899 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:51:38.901 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:51:38.901 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:51:38.902 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:51:38.903 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:51:38.904 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:51:38.905 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:51:38.906 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:51:38.907 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:51:38.908 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:51:38.910 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:51:38.911 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:51:38.916 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:51:38.917 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:51:38.918 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:51:38.919 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:51:38.920 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:51:38.921 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000001C": started reading request body.
2022-11-26 20:51:38.922 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000001C": done reading request body.
2022-11-26 20:51:38.923 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:51:38.923 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:51:38.924 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:51:38.925 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:51:38.926 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:51:38.927 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:51:38.930 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:51:38.930 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:51:38.931 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:38.932 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:38.933 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:51:38.938 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:51:38.940 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.941 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.942 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.944 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.947 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.948 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.949 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.950 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.951 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.952 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.954 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.955 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.956 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.957 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.958 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.960 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.961 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:38.962 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:51:38.963 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:38.963 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:39.070 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:39.072 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:51:39.073 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:51:39.074 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:39.075 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:39.076 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:39.077 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:51:39.078 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:39.079 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:39.080 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:51:39.082 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:51:39.083 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:51:39.084 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:51:39.084 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:51:39.085 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:51:39.133 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:51:39.137 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:51:39.139 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:51:39.140 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:51:39.140 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:51:39.141 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:51:39.147 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:51:39.150 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:51:39.151 +01:00 [DBG] Committing transaction.
2022-11-26 20:51:39.153 +01:00 [DBG] Committed transaction.
2022-11-26 20:51:39.154 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:39.155 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:39.156 +01:00 [DBG] Disposing transaction.
2022-11-26 20:51:39.156 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:39.158 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:39.163 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:51:39.165 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:51:39.167 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:51:39.167 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:51:39.169 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:51:39.170 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:51:39.171 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:51:39.172 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 255.9408ms
2022-11-26 20:51:39.173 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:51:39.174 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:51:39.178 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:51:39.179 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 281.1978ms
2022-11-26 20:51:42.685 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:51:42.685 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:51:42.686 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:51:42.687 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:51:42.688 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:51:42.689 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:51:42.689 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:51:42.690 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:51:42.691 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:51:42.692 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:51:42.693 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:51:42.695 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:51:42.697 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:51:42.698 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:51:42.699 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:51:42.700 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:51:42.701 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:51:42.701 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:51:42.703 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:51:42.704 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000001D": started reading request body.
2022-11-26 20:51:42.704 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000001D": done reading request body.
2022-11-26 20:51:42.706 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:51:42.706 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:51:42.707 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:51:42.708 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:51:42.709 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:51:42.715 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:51:42.717 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:51:42.717 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:51:42.718 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:42.719 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:42.720 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:51:42.724 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:51:42.728 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.729 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.730 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.731 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.732 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.733 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.734 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.735 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.736 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.737 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.738 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.744 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.745 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.746 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.747 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.748 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.749 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.750 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.751 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:51:42.752 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:42.753 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:42.859 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.862 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:51:42.863 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:51:42.863 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.865 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.866 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.867 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:51:42.868 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:42.869 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:42.870 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:51:42.871 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:51:42.872 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:51:42.873 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:51:42.874 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:51:42.875 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:51:42.878 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:51:42.885 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:51:42.886 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:51:42.887 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:51:42.888 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:51:42.889 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:51:42.891 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:51:42.893 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:51:42.894 +01:00 [DBG] Committing transaction.
2022-11-26 20:51:42.933 +01:00 [DBG] Committed transaction.
2022-11-26 20:51:42.933 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:42.934 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:51:42.935 +01:00 [DBG] Disposing transaction.
2022-11-26 20:51:42.936 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.937 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:51:42.938 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:51:42.939 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:51:42.941 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:51:42.942 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:51:42.942 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:51:42.943 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:51:42.944 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:51:42.946 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 247.3962ms
2022-11-26 20:51:42.947 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:51:42.948 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:51:42.949 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:51:42.949 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 264.8838ms
2022-11-26 20:52:15.338 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:52:15.341 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:52:15.342 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:52:15.343 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:52:15.343 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:52:15.344 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:52:15.345 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:52:15.345 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:52:15.346 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 8.4628ms
2022-11-26 20:52:15.349 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:52:15.350 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:52:15.351 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:52:15.352 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:15.352 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:52:15.353 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:52:15.358 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:52:15.359 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:15.360 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:52:15.361 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:52:15.362 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:52:15.363 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:52:15.364 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:52:15.365 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:52:15.367 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:52:15.368 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:52:15.369 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:52:15.371 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:52:15.373 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:52:15.374 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000001F": started reading request body.
2022-11-26 20:52:15.375 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:0000001F": done reading request body.
2022-11-26 20:52:15.375 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:52:15.376 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:15.377 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:15.377 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:52:15.378 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:15.379 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:52:15.381 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:15.381 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:15.382 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:15.387 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:15.389 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:52:15.392 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:52:15.394 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.395 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.396 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.397 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.399 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.401 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.402 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.403 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.404 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.405 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.406 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.407 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.408 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.409 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.410 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.411 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.412 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.413 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.414 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.415 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:15.417 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:15.418 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:15.523 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.528 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:52:15.529 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:52:15.529 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.530 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.532 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.533 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:52:15.534 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:15.535 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:15.536 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:52:15.538 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:52:15.539 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:52:15.542 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:15.542 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:15.543 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:52:15.546 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:52:15.548 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:52:15.549 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:15.550 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:15.550 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:15.551 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:52:15.554 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:52:15.560 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:15.561 +01:00 [DBG] Committing transaction.
2022-11-26 20:52:15.592 +01:00 [DBG] Committed transaction.
2022-11-26 20:52:15.593 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:15.594 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:15.595 +01:00 [DBG] Disposing transaction.
2022-11-26 20:52:15.595 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.597 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:15.599 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:52:15.600 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:52:15.601 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:52:15.602 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:52:15.604 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:52:15.605 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:52:15.606 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:52:15.607 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 240.0681ms
2022-11-26 20:52:15.608 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:15.609 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:52:15.610 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:52:15.610 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 261.2069ms
2022-11-26 20:52:19.664 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:52:19.665 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:52:19.665 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:52:19.666 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:19.667 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:52:19.668 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:52:19.668 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:52:19.670 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:19.673 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:52:19.675 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:52:19.677 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:52:19.679 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:52:19.680 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:52:19.681 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:52:19.682 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:52:19.683 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:52:19.684 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:52:19.686 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:52:19.687 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:52:19.689 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000020": started reading request body.
2022-11-26 20:52:19.689 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000020": done reading request body.
2022-11-26 20:52:19.690 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:52:19.691 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:19.692 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:19.693 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:52:19.693 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:19.694 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:52:19.696 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:19.696 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:19.697 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:19.698 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:19.699 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:52:19.705 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:52:19.707 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.709 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.710 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.711 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.712 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.713 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.714 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.716 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.717 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.718 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.719 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.721 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.722 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.723 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.724 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.725 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.726 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.727 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.728 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.729 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.730 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:19.733 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:19.733 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:19.836 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.838 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:52:19.838 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:52:19.839 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.840 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.842 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.843 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:52:19.844 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:19.845 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:19.846 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:52:19.847 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:52:19.848 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:52:19.849 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:19.849 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:19.850 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:52:19.854 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:52:19.859 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:52:19.860 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:19.860 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:19.861 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:19.862 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:52:19.864 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:52:19.866 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:19.866 +01:00 [DBG] Committing transaction.
2022-11-26 20:52:19.902 +01:00 [DBG] Committed transaction.
2022-11-26 20:52:19.903 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:19.904 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:19.905 +01:00 [DBG] Disposing transaction.
2022-11-26 20:52:19.905 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.907 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:19.908 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:52:19.909 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:52:19.910 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:52:19.911 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:52:19.912 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:52:19.912 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:52:19.913 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:52:19.920 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 238.3282ms
2022-11-26 20:52:19.921 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:19.922 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:52:19.923 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:52:19.923 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 259.6550ms
2022-11-26 20:52:21.759 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:52:21.760 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:52:21.761 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:52:21.761 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:52:21.762 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:52:21.762 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:52:21.763 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:52:21.764 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:52:21.764 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 5.2804ms
2022-11-26 20:52:21.765 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:52:21.766 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:52:21.766 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:52:21.767 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:21.768 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:52:21.769 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:52:21.769 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:52:21.770 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:21.771 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:52:21.772 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:52:21.773 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:52:21.774 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:52:21.776 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:52:21.778 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:52:21.779 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:52:21.780 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:52:21.781 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:52:21.783 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:52:21.785 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:52:21.785 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000022": started reading request body.
2022-11-26 20:52:21.786 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000022": done reading request body.
2022-11-26 20:52:21.787 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:52:21.788 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:21.789 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:21.790 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:52:21.791 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:21.792 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:52:21.793 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:21.794 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:21.794 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:21.796 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:21.801 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:52:21.806 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:52:21.809 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.811 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.814 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.815 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.816 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.818 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.819 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.820 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.822 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.824 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.825 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.827 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.833 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.835 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.836 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.838 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.839 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.840 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.842 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.845 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.846 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.847 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:21.848 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:21.849 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:21.955 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.957 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:52:21.958 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:52:21.958 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.960 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.961 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:21.962 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:52:21.963 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:21.965 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:21.966 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:52:21.967 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:52:21.969 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:52:21.970 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:21.971 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:21.972 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:52:22.013 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:52:22.016 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:52:22.018 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:22.018 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:22.019 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:22.020 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:52:22.025 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:52:22.027 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:22.028 +01:00 [DBG] Committing transaction.
2022-11-26 20:52:22.033 +01:00 [DBG] Committed transaction.
2022-11-26 20:52:22.035 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:22.036 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:22.037 +01:00 [DBG] Disposing transaction.
2022-11-26 20:52:22.038 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:22.040 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:22.042 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:52:22.043 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:52:22.047 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:52:22.048 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:52:22.049 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:52:22.050 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:52:22.051 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:52:22.052 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 273.0332ms
2022-11-26 20:52:22.053 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:22.055 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:52:22.055 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:52:22.056 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 291.1466ms
2022-11-26 20:52:26.188 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:52:26.190 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:52:26.191 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:52:26.192 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:26.193 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:52:26.193 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:52:26.194 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:52:26.195 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:26.195 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:52:26.197 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:52:26.198 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:52:26.199 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:52:26.200 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:52:26.201 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:52:26.202 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:52:26.203 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:52:26.205 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:52:26.206 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:52:26.207 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:52:26.208 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000023": started reading request body.
2022-11-26 20:52:26.209 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000023": done reading request body.
2022-11-26 20:52:26.210 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:52:26.211 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:26.211 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:26.212 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:52:26.213 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:52:26.214 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:52:26.216 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:26.216 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:26.217 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:26.222 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:26.225 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:52:26.228 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:52:26.230 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.231 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.232 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.233 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.236 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.237 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.238 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.239 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.240 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.241 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.242 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.243 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.244 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.245 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.246 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.247 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.248 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.255 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.256 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.257 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.258 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.259 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.260 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:26.261 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:26.261 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:26.365 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.366 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:52:26.367 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:52:26.367 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.368 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.370 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.371 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:52:26.371 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:26.373 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:26.373 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:52:26.376 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:52:26.377 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:52:26.378 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:26.378 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:26.379 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:52:26.383 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:52:26.384 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:52:26.385 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:26.386 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:52:26.386 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:52:26.387 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:52:26.390 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:52:26.394 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:52:26.394 +01:00 [DBG] Committing transaction.
2022-11-26 20:52:26.432 +01:00 [DBG] Committed transaction.
2022-11-26 20:52:26.433 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:26.434 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:52:26.434 +01:00 [DBG] Disposing transaction.
2022-11-26 20:52:26.435 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.436 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:52:26.438 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:52:26.438 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:52:26.440 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:52:26.441 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:52:26.442 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:52:26.442 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:52:26.444 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:52:26.444 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 242.3766ms
2022-11-26 20:52:26.445 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:52:26.446 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:52:26.447 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:52:26.447 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 259.1721ms
2022-11-26 20:53:01.002 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:53:01.003 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:53:01.003 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:53:01.004 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:53:01.005 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:53:01.005 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:53:01.006 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:53:01.006 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:53:01.007 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 5.8855ms
2022-11-26 20:53:01.011 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:53:01.012 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:53:01.012 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:53:01.013 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:53:01.014 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:53:01.014 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:53:01.015 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:53:01.016 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:53:01.016 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:53:01.018 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:53:01.019 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:53:01.020 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:53:01.022 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:53:01.023 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:53:01.030 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:53:01.031 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:53:01.032 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:53:01.032 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:53:01.033 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:53:01.034 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000025": started reading request body.
2022-11-26 20:53:01.035 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000025": done reading request body.
2022-11-26 20:53:01.036 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:53:01.037 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:53:01.038 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:53:01.039 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:53:01.044 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:53:01.045 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:53:01.046 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:53:01.047 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:53:01.047 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:53:01.049 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:53:01.050 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:53:01.054 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:53:01.057 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.058 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.059 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.060 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.061 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.062 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.063 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.064 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.065 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.066 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.067 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.068 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.069 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.073 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.074 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.075 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.076 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.077 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.078 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.079 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.080 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.081 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.082 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.083 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:53:01.084 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:53:01.085 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:53:01.190 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.191 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:53:01.192 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:53:01.193 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.194 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.195 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.196 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:53:01.197 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:53:01.198 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:53:01.199 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:53:01.200 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:53:01.201 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:53:01.202 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:53:01.202 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:53:01.203 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:53:01.206 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:53:01.208 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:53:01.214 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:53:01.214 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:53:01.215 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:53:01.216 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:53:01.219 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:53:01.220 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:53:01.221 +01:00 [DBG] Committing transaction.
2022-11-26 20:53:01.261 +01:00 [DBG] Committed transaction.
2022-11-26 20:53:01.262 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:53:01.263 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:53:01.264 +01:00 [DBG] Disposing transaction.
2022-11-26 20:53:01.264 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.265 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:53:01.267 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:53:01.267 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:53:01.269 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:53:01.270 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:53:01.277 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:53:01.277 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:53:01.278 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:53:01.279 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 249.0816ms
2022-11-26 20:53:01.280 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:53:01.281 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:53:01.281 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:53:01.282 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 271.2373ms
2022-11-26 20:54:44.666 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:54:44.669 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:54:44.670 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:54:44.671 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:54:44.672 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:54:44.672 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:54:44.673 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:54:44.674 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:54:44.674 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 8.0929ms
2022-11-26 20:54:44.677 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:54:44.682 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:54:44.683 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:54:44.684 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:54:44.685 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:54:44.685 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:54:44.686 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:54:44.687 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:54:44.688 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:54:44.689 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:54:44.690 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:54:44.691 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:54:44.695 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:54:44.696 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:54:44.697 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:54:44.697 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:54:44.698 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:54:44.699 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:54:44.700 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:54:44.701 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000027": started reading request body.
2022-11-26 20:54:44.702 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000027": done reading request body.
2022-11-26 20:54:44.703 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:54:44.704 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:54:44.704 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:54:44.705 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:54:44.706 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:54:44.707 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:54:44.713 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:54:44.714 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:54:44.714 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:54:44.716 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:54:44.717 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:54:44.720 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:54:44.722 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.725 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.726 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.727 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.728 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.729 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.730 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.731 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.732 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.733 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.734 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.736 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.737 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.738 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.741 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.742 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.745 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.746 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.748 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.749 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.751 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.752 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.754 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.756 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.757 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:54:44.757 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:54:44.758 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:54:44.864 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.867 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:54:44.867 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:54:44.868 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.869 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.871 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.872 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:54:44.872 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:54:44.874 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:54:44.875 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:54:44.876 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:54:44.877 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:54:44.879 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:54:44.879 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:54:44.880 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:54:44.883 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:54:44.884 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:54:44.885 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:54:44.886 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:54:44.887 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:54:44.888 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:54:44.890 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:54:44.895 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:54:44.895 +01:00 [DBG] Committing transaction.
2022-11-26 20:54:44.939 +01:00 [DBG] Committed transaction.
2022-11-26 20:54:44.940 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:54:44.941 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:54:44.943 +01:00 [DBG] Disposing transaction.
2022-11-26 20:54:44.944 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.945 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:54:44.946 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:54:44.947 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:54:44.949 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:54:44.949 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:54:44.950 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:54:44.951 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:54:44.951 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:54:44.952 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 255.583ms
2022-11-26 20:54:44.958 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:54:44.959 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:54:44.960 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:54:44.961 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 283.8871ms
2022-11-26 20:56:07.395 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 20:56:07.398 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:56:07.399 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 20:56:07.400 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:56:07.401 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:56:07.402 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:56:07.403 +01:00 [DBG] The request is a preflight request.
2022-11-26 20:56:07.404 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:56:07.407 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 12.3191ms
2022-11-26 20:56:07.408 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 20:56:07.409 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 20:56:07.411 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 20:56:07.412 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:56:07.413 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 20:56:07.413 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 20:56:07.414 +01:00 [INF] CORS policy execution successful.
2022-11-26 20:56:07.415 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:56:07.415 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 20:56:07.417 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 20:56:07.419 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 20:56:07.420 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 20:56:07.426 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 20:56:07.427 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 20:56:07.428 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:56:07.429 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 20:56:07.430 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:56:07.430 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 20:56:07.431 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 20:56:07.432 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000029": started reading request body.
2022-11-26 20:56:07.433 +01:00 [DBG] Connection id "0HMMFR9G54L5G", Request id "0HMMFR9G54L5G:00000029": done reading request body.
2022-11-26 20:56:07.434 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 20:56:07.435 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:56:07.435 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:56:07.436 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 20:56:07.438 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 20:56:07.439 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 20:56:07.441 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:56:07.441 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:56:07.442 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:56:07.444 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:56:07.444 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:56:07.448 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 20:56:07.450 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.451 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.454 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.455 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.456 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.457 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.458 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.459 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.461 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.462 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.463 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.464 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.465 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.466 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.468 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.470 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.471 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.472 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.473 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.474 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.475 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.476 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.477 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.478 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.479 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.480 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:56:07.480 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:56:07.481 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:56:07.587 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.588 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 20:56:07.589 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 20:56:07.590 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.591 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.592 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.593 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 20:56:07.594 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:56:07.595 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:56:07.596 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 20:56:07.597 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 20:56:07.598 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 20:56:07.599 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:56:07.600 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:56:07.601 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:56:07.650 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 20:56:07.653 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 20:56:07.655 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:56:07.656 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 20:56:07.657 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 20:56:07.658 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:56:07.663 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 20:56:07.665 +01:00 [DBG] A data reader was disposed.
2022-11-26 20:56:07.672 +01:00 [DBG] Committing transaction.
2022-11-26 20:56:07.678 +01:00 [DBG] Committed transaction.
2022-11-26 20:56:07.678 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:56:07.680 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 20:56:07.681 +01:00 [DBG] Disposing transaction.
2022-11-26 20:56:07.682 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.684 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 20:56:07.685 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 20:56:07.687 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 20:56:07.689 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 20:56:07.690 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 20:56:07.691 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 20:56:07.693 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 20:56:07.695 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 20:56:07.696 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 268.4267ms
2022-11-26 20:56:07.699 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 20:56:07.699 +01:00 [DBG] Connection id "0HMMFR9G54L5G" completed keep alive response.
2022-11-26 20:56:07.700 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 20:56:07.701 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 292.9061ms
2022-11-26 21:11:15.376 +01:00 [DBG] Connection id "0HMMFR9G54L5G" received FIN.
2022-11-26 21:11:15.384 +01:00 [DBG] Connection id "0HMMFR9G54L5H" accepted.
2022-11-26 21:11:15.411 +01:00 [DBG] Connection id "0HMMFR9G54L5G" disconnecting.
2022-11-26 21:11:15.413 +01:00 [DBG] Connection id "0HMMFR9G54L5H" started.
2022-11-26 21:11:15.415 +01:00 [DBG] Connection id "0HMMFR9G54L5G" sending FIN because: "The client closed the connection."
2022-11-26 21:11:15.416 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 21:11:15.419 +01:00 [DBG] Connection id "0HMMFR9G54L5G" stopped.
2022-11-26 21:11:15.419 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:11:15.420 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 21:11:15.421 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:11:15.422 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:11:15.423 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:11:15.423 +01:00 [DBG] The request is a preflight request.
2022-11-26 21:11:15.424 +01:00 [DBG] Connection id "0HMMFR9G54L5H" completed keep alive response.
2022-11-26 21:11:15.425 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 8.8288ms
2022-11-26 21:11:15.427 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 21:11:15.428 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:11:15.429 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 21:11:15.431 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:11:15.432 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:11:15.432 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:11:15.433 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:11:15.433 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:11:15.434 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 21:11:15.435 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 21:11:15.436 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 21:11:15.437 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 21:11:15.439 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 21:11:15.440 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 21:11:15.443 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:11:15.443 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:11:15.444 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:11:15.445 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 21:11:15.446 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 21:11:15.447 +01:00 [DBG] Connection id "0HMMFR9G54L5H", Request id "0HMMFR9G54L5H:00000002": started reading request body.
2022-11-26 21:11:15.448 +01:00 [DBG] Connection id "0HMMFR9G54L5H", Request id "0HMMFR9G54L5H:00000002": done reading request body.
2022-11-26 21:11:15.449 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 21:11:15.449 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:11:15.450 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:11:15.451 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:11:15.451 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:11:15.453 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 21:11:15.454 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:11:15.455 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:11:15.455 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:15.464 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:15.465 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:11:15.469 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:11:15.471 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.476 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.477 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.478 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.479 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.480 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.481 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.482 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.483 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.484 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.485 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.486 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.491 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.492 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.493 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.494 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.495 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.497 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.499 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.500 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.501 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.503 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.504 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.505 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.506 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.507 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.508 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:11:15.509 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:15.509 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:15.612 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.614 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 21:11:15.614 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 21:11:15.615 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.616 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.617 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.618 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 21:11:15.619 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:15.620 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:15.621 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 21:11:15.623 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 21:11:15.624 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 21:11:15.624 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:11:15.625 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:11:15.628 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:11:15.631 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:11:15.633 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 21:11:15.634 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:11:15.635 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:11:15.635 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:11:15.636 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:11:15.639 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:11:15.640 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:11:15.642 +01:00 [DBG] Committing transaction.
2022-11-26 21:11:15.680 +01:00 [DBG] Committed transaction.
2022-11-26 21:11:15.681 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:15.681 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:15.682 +01:00 [DBG] Disposing transaction.
2022-11-26 21:11:15.683 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.684 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:15.685 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 21:11:15.686 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 21:11:15.688 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 21:11:15.692 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 21:11:15.693 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 21:11:15.693 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 21:11:15.695 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 21:11:15.695 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 252.9172ms
2022-11-26 21:11:15.696 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:11:15.697 +01:00 [DBG] Connection id "0HMMFR9G54L5H" completed keep alive response.
2022-11-26 21:11:15.699 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 21:11:15.700 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 272.8987ms
2022-11-26 21:11:34.225 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 21:11:34.226 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:11:34.227 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 21:11:34.227 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:11:34.228 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:11:34.229 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:11:34.229 +01:00 [DBG] The request is a preflight request.
2022-11-26 21:11:34.230 +01:00 [DBG] Connection id "0HMMFR9G54L5H" completed keep alive response.
2022-11-26 21:11:34.231 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 5.3569ms
2022-11-26 21:11:34.231 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 21:11:34.232 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:11:34.232 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 21:11:34.234 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:11:34.234 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:11:34.235 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:11:34.235 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:11:34.240 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:11:34.240 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 21:11:34.242 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 21:11:34.243 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 21:11:34.244 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 21:11:34.246 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 21:11:34.247 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 21:11:34.248 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:11:34.249 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:11:34.249 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:11:34.251 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 21:11:34.254 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 21:11:34.255 +01:00 [DBG] Connection id "0HMMFR9G54L5H", Request id "0HMMFR9G54L5H:00000004": started reading request body.
2022-11-26 21:11:34.256 +01:00 [DBG] Connection id "0HMMFR9G54L5H", Request id "0HMMFR9G54L5H:00000004": done reading request body.
2022-11-26 21:11:34.258 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 21:11:34.259 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:11:34.260 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:11:34.261 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:11:34.262 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:11:34.264 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 21:11:34.265 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:11:34.265 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:11:34.266 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:34.274 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:34.275 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:11:34.279 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:11:34.283 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.284 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.285 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.286 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.287 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.288 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.290 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.291 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.292 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.293 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.294 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.295 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.296 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.297 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.300 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.301 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.303 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.304 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.305 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.306 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.307 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.308 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.309 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.311 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.312 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.313 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.321 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.323 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:11:34.323 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:34.324 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:34.432 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.433 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 21:11:34.434 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 21:11:34.435 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.438 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.440 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.441 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 21:11:34.442 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:34.443 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:34.444 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 21:11:34.446 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 21:11:34.447 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 21:11:34.448 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:11:34.448 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:11:34.449 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:11:34.457 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:11:34.459 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 21:11:34.460 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:11:34.461 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:11:34.461 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:11:34.462 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:11:34.465 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:11:34.468 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:11:34.469 +01:00 [DBG] Committing transaction.
2022-11-26 21:11:34.510 +01:00 [DBG] Committed transaction.
2022-11-26 21:11:34.510 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:34.511 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:11:34.517 +01:00 [DBG] Disposing transaction.
2022-11-26 21:11:34.518 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.520 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:11:34.521 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 21:11:34.522 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 21:11:34.524 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 21:11:34.524 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 21:11:34.525 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 21:11:34.526 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 21:11:34.527 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 21:11:34.533 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 284.7747ms
2022-11-26 21:11:34.533 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:11:34.534 +01:00 [DBG] Connection id "0HMMFR9G54L5H" completed keep alive response.
2022-11-26 21:11:34.535 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 21:11:34.536 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 304.7097ms
2022-11-26 21:14:45.174 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 21:14:45.177 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:14:45.178 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 21:14:45.178 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:14:45.179 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:14:45.180 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:14:45.180 +01:00 [DBG] The request is a preflight request.
2022-11-26 21:14:45.181 +01:00 [DBG] Connection id "0HMMFR9G54L5H" completed keep alive response.
2022-11-26 21:14:45.182 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 7.6199ms
2022-11-26 21:14:45.184 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 21:14:45.184 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:14:45.185 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 21:14:45.186 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:14:45.187 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:14:45.187 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:14:45.188 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:14:45.189 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:14:45.190 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 21:14:45.193 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 21:14:45.194 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 21:14:45.195 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 21:14:45.197 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 21:14:45.198 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 21:14:45.199 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:14:45.200 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:14:45.201 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:14:45.201 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 21:14:45.202 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 21:14:45.203 +01:00 [DBG] Connection id "0HMMFR9G54L5H", Request id "0HMMFR9G54L5H:00000006": started reading request body.
2022-11-26 21:14:45.204 +01:00 [DBG] Connection id "0HMMFR9G54L5H", Request id "0HMMFR9G54L5H:00000006": done reading request body.
2022-11-26 21:14:45.205 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 21:14:45.206 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:14:45.206 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:14:45.209 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:14:45.211 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:14:45.212 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 21:14:45.214 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:14:45.214 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:14:45.215 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:14:45.218 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:14:45.218 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:14:45.222 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:14:45.226 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.227 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.228 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.229 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.230 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.231 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.232 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.233 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.234 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.235 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.236 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.239 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.241 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.242 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.243 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.244 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.245 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.246 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.247 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.248 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.249 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.251 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.252 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.254 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.255 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.256 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.258 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.259 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.260 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:14:45.261 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:14:45.261 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:14:45.363 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.364 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 21:14:45.366 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 21:14:45.366 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.369 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.370 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.372 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 21:14:45.373 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:14:45.375 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:14:45.377 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 21:14:45.378 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 21:14:45.379 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 21:14:45.381 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:14:45.381 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:14:45.382 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:14:45.385 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:14:45.387 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 21:14:45.388 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:14:45.388 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:14:45.389 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:14:45.390 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:14:45.394 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:14:45.396 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:14:45.397 +01:00 [DBG] Committing transaction.
2022-11-26 21:14:45.426 +01:00 [DBG] Committed transaction.
2022-11-26 21:14:45.427 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:14:45.428 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:14:45.429 +01:00 [DBG] Disposing transaction.
2022-11-26 21:14:45.429 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.431 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:14:45.432 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 21:14:45.433 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 21:14:45.435 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 21:14:45.435 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 21:14:45.436 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 21:14:45.437 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 21:14:45.438 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 21:14:45.441 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 241.6198ms
2022-11-26 21:14:45.442 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:14:45.442 +01:00 [DBG] Connection id "0HMMFR9G54L5H" completed keep alive response.
2022-11-26 21:14:45.443 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 21:14:45.444 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 260.1680ms
2022-11-26 21:16:28.767 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 21:16:28.769 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:16:28.770 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 21:16:28.771 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:16:28.772 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:16:28.772 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:16:28.773 +01:00 [DBG] The request is a preflight request.
2022-11-26 21:16:28.773 +01:00 [DBG] Connection id "0HMMFR9G54L5H" completed keep alive response.
2022-11-26 21:16:28.774 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 7.8037ms
2022-11-26 21:16:28.778 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 21:16:28.779 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:16:28.780 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 21:16:28.783 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:16:28.784 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:16:28.784 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:16:28.785 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:16:28.786 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:16:28.786 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 21:16:28.788 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 21:16:28.789 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 21:16:28.790 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 21:16:28.791 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 21:16:28.792 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 21:16:28.793 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:16:28.794 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:16:28.795 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:16:28.796 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 21:16:28.798 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 21:16:28.800 +01:00 [DBG] Connection id "0HMMFR9G54L5H", Request id "0HMMFR9G54L5H:00000008": started reading request body.
2022-11-26 21:16:28.800 +01:00 [DBG] Connection id "0HMMFR9G54L5H", Request id "0HMMFR9G54L5H:00000008": done reading request body.
2022-11-26 21:16:28.801 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 21:16:28.802 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:16:28.803 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:16:28.804 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:16:28.805 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:16:28.807 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 21:16:28.809 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:16:28.809 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:16:28.811 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:16:28.814 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:16:28.815 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:16:28.819 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:16:28.821 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.822 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.823 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.825 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.826 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.829 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.830 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.831 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.832 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.833 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.834 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.835 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.836 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.837 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.838 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.839 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.840 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.841 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.842 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.845 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.846 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.847 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.849 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.850 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.851 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.852 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.853 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.854 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.855 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.856 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:16:28.857 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:16:28.858 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:16:28.966 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.968 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 21:16:28.968 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 21:16:28.969 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.970 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.971 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:28.973 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 21:16:28.974 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:16:28.975 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:16:28.976 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 21:16:28.978 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 21:16:28.978 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 21:16:28.979 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:16:28.980 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:16:28.982 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:16:29.025 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:16:29.028 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 21:16:29.029 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:16:29.029 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:16:29.030 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:16:29.031 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:16:29.034 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:16:29.035 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:16:29.036 +01:00 [DBG] Committing transaction.
2022-11-26 21:16:29.044 +01:00 [DBG] Committed transaction.
2022-11-26 21:16:29.045 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:16:29.046 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:16:29.047 +01:00 [DBG] Disposing transaction.
2022-11-26 21:16:29.047 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:29.048 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:16:29.050 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 21:16:29.051 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 21:16:29.052 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 21:16:29.053 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 21:16:29.054 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 21:16:29.055 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 21:16:29.055 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 21:16:29.056 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 263.3771ms
2022-11-26 21:16:29.059 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:16:29.060 +01:00 [DBG] Connection id "0HMMFR9G54L5H" completed keep alive response.
2022-11-26 21:16:29.061 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 21:16:29.061 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 283.8807ms
2022-11-26 21:22:01.272 +01:00 [DBG] Connection id "0HMMFR9G54L5H" received FIN.
2022-11-26 21:22:01.276 +01:00 [DBG] Connection id "0HMMFR9G54L5H" disconnecting.
2022-11-26 21:22:01.280 +01:00 [DBG] Connection id "0HMMFR9G54L5H" sending FIN because: "The client closed the connection."
2022-11-26 21:22:01.289 +01:00 [DBG] Connection id "0HMMFR9G54L5H" stopped.
2022-11-26 21:23:49.656 +01:00 [DBG] Connection id "0HMMFR9G54L5I" accepted.
2022-11-26 21:23:49.658 +01:00 [DBG] Connection id "0HMMFR9G54L5I" started.
2022-11-26 21:23:49.659 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 21:23:49.660 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:23:49.661 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 21:23:49.662 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:23:49.663 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:23:49.663 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:23:49.664 +01:00 [DBG] The request is a preflight request.
2022-11-26 21:23:49.665 +01:00 [DBG] Connection id "0HMMFR9G54L5I" completed keep alive response.
2022-11-26 21:23:49.665 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 5.9687ms
2022-11-26 21:23:49.668 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 21:23:49.669 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:23:49.670 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 21:23:49.676 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:23:49.677 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:23:49.678 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:23:49.678 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:23:49.679 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:23:49.680 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 21:23:49.683 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 21:23:49.684 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 21:23:49.685 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 21:23:49.691 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 21:23:49.692 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 21:23:49.693 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:23:49.694 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:23:49.695 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:23:49.696 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 21:23:49.697 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 21:23:49.698 +01:00 [DBG] Connection id "0HMMFR9G54L5I", Request id "0HMMFR9G54L5I:00000002": started reading request body.
2022-11-26 21:23:49.699 +01:00 [DBG] Connection id "0HMMFR9G54L5I", Request id "0HMMFR9G54L5I:00000002": done reading request body.
2022-11-26 21:23:49.700 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 21:23:49.700 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:23:49.702 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:23:49.703 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:23:49.704 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:23:49.705 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 21:23:49.706 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:23:49.707 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:23:49.708 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:23:49.711 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:23:49.713 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:23:49.718 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:23:49.722 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.723 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.724 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.725 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.726 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.728 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.729 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.730 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.734 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.735 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.736 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.738 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.739 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.740 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.742 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.743 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.745 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.746 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.747 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.753 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.755 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.756 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.759 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.761 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.762 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.765 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.767 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.769 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.770 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.771 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.773 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:23:49.773 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:23:49.774 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:23:49.878 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.880 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 21:23:49.880 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 21:23:49.881 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.884 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.885 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.887 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 21:23:49.888 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:23:49.890 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:23:49.891 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 21:23:49.894 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 21:23:49.895 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 21:23:49.897 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:23:49.898 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:23:49.901 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:23:49.906 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:23:49.909 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 21:23:49.910 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:23:49.911 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:23:49.911 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:23:49.912 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:23:49.916 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:23:49.920 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:23:49.921 +01:00 [DBG] Committing transaction.
2022-11-26 21:23:49.967 +01:00 [DBG] Committed transaction.
2022-11-26 21:23:49.967 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:23:49.968 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:23:49.969 +01:00 [DBG] Disposing transaction.
2022-11-26 21:23:49.970 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.972 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:23:49.973 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 21:23:49.974 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 21:23:49.976 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 21:23:49.977 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 21:23:49.978 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 21:23:49.983 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 21:23:49.984 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 21:23:49.985 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 292.2313ms
2022-11-26 21:23:49.986 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:23:49.987 +01:00 [DBG] Connection id "0HMMFR9G54L5I" completed keep alive response.
2022-11-26 21:23:49.988 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 21:23:49.990 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 321.0459ms
2022-11-26 21:24:30.277 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 21:24:30.280 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:24:30.281 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 21:24:30.282 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:24:30.283 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:24:30.283 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:24:30.284 +01:00 [DBG] The request is a preflight request.
2022-11-26 21:24:30.285 +01:00 [DBG] Connection id "0HMMFR9G54L5I" completed keep alive response.
2022-11-26 21:24:30.287 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 9.8208ms
2022-11-26 21:24:30.290 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 21:24:30.290 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:24:30.291 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 21:24:30.292 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:24:30.293 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:24:30.294 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:24:30.294 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:24:30.295 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:24:30.296 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 21:24:30.297 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 21:24:30.299 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 21:24:30.300 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 21:24:30.304 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 21:24:30.304 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 21:24:30.306 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:24:30.306 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:24:30.307 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:24:30.308 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 21:24:30.309 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 21:24:30.310 +01:00 [DBG] Connection id "0HMMFR9G54L5I", Request id "0HMMFR9G54L5I:00000004": started reading request body.
2022-11-26 21:24:30.311 +01:00 [DBG] Connection id "0HMMFR9G54L5I", Request id "0HMMFR9G54L5I:00000004": done reading request body.
2022-11-26 21:24:30.311 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 21:24:30.312 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:24:30.313 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:24:30.314 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:24:30.315 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:24:30.316 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 21:24:30.323 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:24:30.323 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:24:30.324 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:24:30.326 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:24:30.327 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:24:30.330 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:24:30.334 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.335 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.336 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.337 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.339 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.340 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.341 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.342 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.343 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.344 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.345 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.346 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.349 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.350 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.351 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.353 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.354 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.355 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.356 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.357 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.358 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.359 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.360 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.361 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.368 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.369 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.371 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.372 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.373 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.374 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.375 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.376 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:24:30.376 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:24:30.378 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:24:30.485 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.491 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 21:24:30.491 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 21:24:30.492 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.493 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.494 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.495 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 21:24:30.496 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:24:30.498 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:24:30.498 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 21:24:30.500 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 21:24:30.501 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 21:24:30.503 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:24:30.503 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:24:30.504 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:24:30.507 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:24:30.509 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 21:24:30.510 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:24:30.511 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:24:30.511 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:24:30.512 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:24:30.515 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:24:30.518 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:24:30.519 +01:00 [DBG] Committing transaction.
2022-11-26 21:24:30.556 +01:00 [DBG] Committed transaction.
2022-11-26 21:24:30.556 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:24:30.557 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:24:30.558 +01:00 [DBG] Disposing transaction.
2022-11-26 21:24:30.559 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.560 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:24:30.561 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 21:24:30.562 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 21:24:30.563 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 21:24:30.564 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 21:24:30.565 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 21:24:30.566 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 21:24:30.567 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 21:24:30.568 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 262.3454ms
2022-11-26 21:24:30.569 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:24:30.569 +01:00 [DBG] Connection id "0HMMFR9G54L5I" completed keep alive response.
2022-11-26 21:24:30.570 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 21:24:30.571 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 281.3612ms
2022-11-26 21:28:15.392 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-26 21:28:15.395 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:28:15.395 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-26 21:28:15.396 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:28:15.397 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:28:15.398 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:28:15.399 +01:00 [DBG] The request is a preflight request.
2022-11-26 21:28:15.399 +01:00 [DBG] Connection id "0HMMFR9G54L5I" completed keep alive response.
2022-11-26 21:28:15.400 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 8.6188ms
2022-11-26 21:28:15.405 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-26 21:28:15.405 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-26 21:28:15.406 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-26 21:28:15.408 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:28:15.408 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-26 21:28:15.409 +01:00 [DBG] The request has an origin header: 'http://localhost:53482'.
2022-11-26 21:28:15.410 +01:00 [INF] CORS policy execution successful.
2022-11-26 21:28:15.411 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:28:15.411 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-26 21:28:15.413 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-26 21:28:15.414 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-26 21:28:15.415 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-26 21:28:15.416 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-26 21:28:15.417 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-26 21:28:15.419 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:28:15.425 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-26 21:28:15.426 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:28:15.426 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-26 21:28:15.427 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-26 21:28:15.429 +01:00 [DBG] Connection id "0HMMFR9G54L5I", Request id "0HMMFR9G54L5I:00000006": started reading request body.
2022-11-26 21:28:15.429 +01:00 [DBG] Connection id "0HMMFR9G54L5I", Request id "0HMMFR9G54L5I:00000006": done reading request body.
2022-11-26 21:28:15.430 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-26 21:28:15.431 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:28:15.432 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:28:15.433 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-26 21:28:15.434 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-26 21:28:15.436 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-26 21:28:15.438 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:28:15.438 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:28:15.439 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:28:15.442 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:28:15.445 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:28:15.449 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-26 21:28:15.456 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.457 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.458 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.459 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.460 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.461 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.463 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.464 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.467 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.468 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.469 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.470 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.471 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.472 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.473 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.474 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.475 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.476 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.477 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.478 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.480 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.482 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.483 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.484 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.486 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.488 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.489 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.490 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.491 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.492 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.493 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.494 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.495 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:28:15.498 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:28:15.499 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:28:15.604 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.606 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-26 21:28:15.607 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-26 21:28:15.608 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.609 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.610 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.612 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-26 21:28:15.613 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:28:15.615 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:28:15.616 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-26 21:28:15.617 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-26 21:28:15.618 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-26 21:28:15.619 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:28:15.620 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-26 21:28:15.621 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:28:15.629 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-26 21:28:15.631 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-26 21:28:15.633 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:28:15.634 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-26 21:28:15.635 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-26 21:28:15.637 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:28:15.646 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-26 21:28:15.648 +01:00 [DBG] A data reader was disposed.
2022-11-26 21:28:15.649 +01:00 [DBG] Committing transaction.
2022-11-26 21:28:15.682 +01:00 [DBG] Committed transaction.
2022-11-26 21:28:15.682 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:28:15.683 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-26 21:28:15.684 +01:00 [DBG] Disposing transaction.
2022-11-26 21:28:15.685 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.688 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-26 21:28:15.690 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-26 21:28:15.691 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-26 21:28:15.694 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-26 21:28:15.694 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-26 21:28:15.696 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-26 21:28:15.696 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-26 21:28:15.698 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-26 21:28:15.701 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 282.5085ms
2022-11-26 21:28:15.702 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-26 21:28:15.703 +01:00 [DBG] Connection id "0HMMFR9G54L5I" completed keep alive response.
2022-11-26 21:28:15.703 +01:00 [DBG] 'SmartContext' disposed.
2022-11-26 21:28:15.704 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 299.3768ms
2022-11-26 21:31:16.887 +01:00 [DBG] Connection id "0HMMFR9G54L5I" reset.
2022-11-26 21:31:16.894 +01:00 [DBG] Connection id "0HMMFR9G54L5I" sending FIN because: "The client closed the connection."
2022-11-26 21:31:16.900 +01:00 [DBG] Connection id "0HMMFR9G54L5I" disconnecting.
2022-11-26 21:31:16.905 +01:00 [DBG] Connection id "0HMMFR9G54L5I" stopped.
2022-11-27 19:10:27.676 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-27 19:10:28.054 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-27 19:10:28.058 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-27 19:10:28.171 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 19:10:28.172 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 19:10:28.173 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 19:10:28.174 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 19:10:28.175 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 19:10:28.177 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 19:10:28.321 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 19:10:28.343 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.349 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-27 19:10:28.428 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-27 19:10:28.487 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-27 19:10:28.491 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2022-11-27 19:10:28.493 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.498 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.506 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-27 19:10:28.516 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-27 19:10:28.519 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.521 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.523 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-27 19:10:28.525 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-27 19:10:28.526 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-27 19:10:28.527 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-11-27 19:10:28.528 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.531 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.532 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-27 19:10:28.534 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-27 19:10:28.535 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.536 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.559 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:10:28.560 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:10:28.561 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.562 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.563 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-27 19:10:28.567 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-27 19:10:28.571 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:10:28.571 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.572 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:10:28.579 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-11-27 19:10:28.595 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 19:10:28.651 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-27 19:10:28.712 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-11-27 19:10:28.727 +01:00 [DBG] Hosting starting
2022-11-27 19:10:28.804 +01:00 [INF] Now listening on: http://[::]:5011
2022-11-27 19:10:28.805 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-11-27 19:10:28.805 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-11-27 19:10:28.806 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-11-27 19:10:28.807 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-27 19:10:28.807 +01:00 [INF] Hosting environment: Development
2022-11-27 19:10:28.808 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-11-27 19:10:28.810 +01:00 [DBG] Hosting started
2022-11-27 19:12:09.786 +01:00 [DBG] Connection id "0HMMGKBJ90R7E" accepted.
2022-11-27 19:12:09.787 +01:00 [DBG] Connection id "0HMMGKBJ90R7E" started.
2022-11-27 19:12:09.848 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-27 19:12:09.859 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-11-27 19:12:09.889 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:12:09.890 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-27 19:12:09.910 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:12:09.912 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:12:09.913 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:12:09.916 +01:00 [DBG] The request is a preflight request.
2022-11-27 19:12:09.930 +01:00 [DBG] Connection id "0HMMGKBJ90R7E" completed keep alive response.
2022-11-27 19:12:09.941 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 94.7833ms
2022-11-27 19:12:09.946 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-27 19:12:09.959 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:12:09.961 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-27 19:12:09.963 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:12:09.965 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:12:09.966 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:12:09.967 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:12:09.970 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:12:09.992 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-27 19:12:09.995 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-27 19:12:09.997 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-27 19:12:09.998 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-27 19:12:09.999 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-27 19:12:10.000 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-27 19:12:10.004 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:12:10.005 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:12:10.011 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:12:10.014 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-27 19:12:10.016 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-27 19:12:10.049 +01:00 [DBG] Connection id "0HMMGKBJ90R7E", Request id "0HMMGKBJ90R7E:00000002": started reading request body.
2022-11-27 19:12:10.050 +01:00 [DBG] Connection id "0HMMGKBJ90R7E", Request id "0HMMGKBJ90R7E:00000002": done reading request body.
2022-11-27 19:12:10.056 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-27 19:12:10.056 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:12:10.058 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:12:10.058 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:12:10.068 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:12:10.145 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 19:12:10.207 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.RefreshTokens)
    .FirstOrDefault(x => x.Username == __model_Username_0)'
2022-11-27 19:12:10.230 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-11-27 19:12:10.421 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Username == @__model_Username_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-11-27 19:12:10.443 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:12:10.444 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:12:10.459 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:12:10.466 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:12:10.470 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:12:10.479 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:12:10.502 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.525 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.539 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.540 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.541 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.542 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.543 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.544 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.545 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.545 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.547 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.548 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.549 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.550 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.553 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.554 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.555 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.556 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.558 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.559 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.560 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.560 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.561 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.562 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.563 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.565 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.565 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.566 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.567 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.568 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.569 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.570 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.571 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:10.573 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:12:10.575 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:12:10.578 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:12:11.449 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:11.453 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-27 19:12:11.455 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-27 19:12:11.463 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:11.477 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:11.481 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:11.491 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-27 19:12:11.499 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:12:11.506 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:12:11.508 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-27 19:12:11.548 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-27 19:12:11.571 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-27 19:12:11.583 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:12:11.584 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:12:11.586 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:12:11.591 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:12:11.602 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-27 19:12:11.604 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:12:11.611 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:12:11.612 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:12:11.613 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:12:11.616 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:12:11.618 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:12:11.621 +01:00 [DBG] Committing transaction.
2022-11-27 19:12:11.670 +01:00 [DBG] Committed transaction.
2022-11-27 19:12:11.673 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:12:11.674 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:12:11.675 +01:00 [DBG] Disposing transaction.
2022-11-27 19:12:11.678 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:11.679 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:12:11.682 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-27 19:12:11.690 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-27 19:12:11.692 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-27 19:12:11.693 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-27 19:12:11.693 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-27 19:12:11.694 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-27 19:12:11.695 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-27 19:12:11.727 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 1724.0889ms
2022-11-27 19:12:11.729 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:12:11.735 +01:00 [DBG] Connection id "0HMMGKBJ90R7E" completed keep alive response.
2022-11-27 19:12:11.737 +01:00 [DBG] 'SmartContext' disposed.
2022-11-27 19:12:11.739 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 1793.1165ms
2022-11-27 19:17:13.184 +01:00 [DBG] Connection id "0HMMGKBJ90R7E" received FIN.
2022-11-27 19:17:13.187 +01:00 [DBG] Connection id "0HMMGKBJ90R7E" disconnecting.
2022-11-27 19:17:13.188 +01:00 [DBG] Connection id "0HMMGKBJ90R7E" sending FIN because: "The client closed the connection."
2022-11-27 19:17:13.191 +01:00 [DBG] Connection id "0HMMGKBJ90R7E" stopped.
2022-11-27 19:23:35.614 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" accepted.
2022-11-27 19:23:35.614 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" started.
2022-11-27 19:23:35.616 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-27 19:23:35.616 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:23:35.617 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-27 19:23:35.622 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:23:35.625 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:23:35.626 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:23:35.626 +01:00 [DBG] The request is a preflight request.
2022-11-27 19:23:35.627 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" completed keep alive response.
2022-11-27 19:23:35.627 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 11.5569ms
2022-11-27 19:23:35.630 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-27 19:23:35.630 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:23:35.631 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-27 19:23:35.632 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:23:35.632 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:23:35.633 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:23:35.634 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:23:35.636 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:23:35.637 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-27 19:23:35.638 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-27 19:23:35.639 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-27 19:23:35.639 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-27 19:23:35.641 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-27 19:23:35.641 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-27 19:23:35.642 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:23:35.643 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:23:35.644 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:23:35.645 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-27 19:23:35.645 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-27 19:23:35.646 +01:00 [DBG] Connection id "0HMMGKBJ90R7F", Request id "0HMMGKBJ90R7F:00000002": started reading request body.
2022-11-27 19:23:35.647 +01:00 [DBG] Connection id "0HMMGKBJ90R7F", Request id "0HMMGKBJ90R7F:00000002": done reading request body.
2022-11-27 19:23:35.648 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-27 19:23:35.652 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:23:35.653 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:23:35.654 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:23:35.654 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:23:35.656 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 19:23:35.660 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:23:35.660 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:23:35.661 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:23:35.670 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:23:35.671 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:23:35.675 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:23:35.678 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.683 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.684 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.685 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.686 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.687 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.689 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.690 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.691 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.692 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.693 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.694 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.695 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.696 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.697 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.698 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.699 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.701 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.701 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.702 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.704 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.705 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.706 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.707 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.708 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.712 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.714 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.715 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.717 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.718 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.719 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.720 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.721 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.722 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.726 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:23:35.726 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:23:35.727 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:23:35.830 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.832 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-27 19:23:35.834 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-27 19:23:35.835 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.837 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.838 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.839 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-27 19:23:35.840 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:23:35.842 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:23:35.842 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-27 19:23:35.844 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-27 19:23:35.845 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-27 19:23:35.846 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:23:35.846 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:23:35.851 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:23:35.900 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:23:35.903 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-27 19:23:35.904 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:23:35.904 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:23:35.905 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:23:35.907 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:23:35.910 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:23:35.915 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:23:35.916 +01:00 [DBG] Committing transaction.
2022-11-27 19:23:35.919 +01:00 [DBG] Committed transaction.
2022-11-27 19:23:35.920 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:23:35.921 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:23:35.923 +01:00 [DBG] Disposing transaction.
2022-11-27 19:23:35.924 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.930 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:23:35.932 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-27 19:23:35.933 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-27 19:23:35.936 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-27 19:23:35.937 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-27 19:23:35.938 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-27 19:23:35.939 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-27 19:23:35.940 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-27 19:23:35.942 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 299.8164ms
2022-11-27 19:23:35.943 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:23:35.944 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" completed keep alive response.
2022-11-27 19:23:35.945 +01:00 [DBG] 'SmartContext' disposed.
2022-11-27 19:23:35.946 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 316.5514ms
2022-11-27 19:24:59.950 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-27 19:24:59.952 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:24:59.952 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-27 19:24:59.953 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:24:59.954 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:24:59.954 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:24:59.955 +01:00 [DBG] The request is a preflight request.
2022-11-27 19:24:59.955 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" completed keep alive response.
2022-11-27 19:24:59.956 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 7.5076ms
2022-11-27 19:24:59.958 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-27 19:24:59.959 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:24:59.959 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-27 19:24:59.960 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:24:59.965 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:24:59.965 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:24:59.966 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:24:59.966 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:24:59.967 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-27 19:24:59.968 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-27 19:24:59.969 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-27 19:24:59.970 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-27 19:24:59.971 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-27 19:24:59.972 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-27 19:24:59.974 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:24:59.975 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:24:59.976 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:24:59.977 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-27 19:24:59.978 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-27 19:24:59.978 +01:00 [DBG] Connection id "0HMMGKBJ90R7F", Request id "0HMMGKBJ90R7F:00000004": started reading request body.
2022-11-27 19:24:59.979 +01:00 [DBG] Connection id "0HMMGKBJ90R7F", Request id "0HMMGKBJ90R7F:00000004": done reading request body.
2022-11-27 19:24:59.980 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-27 19:24:59.980 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:24:59.981 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:24:59.982 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:24:59.982 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:24:59.984 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 19:24:59.986 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:24:59.986 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:24:59.987 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:24:59.989 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:24:59.990 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:24:59.994 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:24:59.998 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:24:59.999 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.000 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.001 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.002 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.003 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.004 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.006 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.007 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.008 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.009 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.010 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.011 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.012 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.013 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.014 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.015 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.016 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.017 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.019 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.019 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.021 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.026 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.027 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.029 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.030 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.031 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.032 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.033 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.034 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.035 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.036 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.037 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.038 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.041 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.043 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:25:00.043 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:00.044 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:00.152 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.154 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-27 19:25:00.154 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-27 19:25:00.155 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.157 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.158 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.159 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-27 19:25:00.160 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:00.163 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:00.166 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-27 19:25:00.169 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-27 19:25:00.170 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-27 19:25:00.171 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:25:00.172 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:25:00.173 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:25:00.192 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:25:00.198 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-27 19:25:00.199 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:25:00.201 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:25:00.202 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:25:00.203 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:25:00.206 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:25:00.208 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:25:00.209 +01:00 [DBG] Committing transaction.
2022-11-27 19:25:00.247 +01:00 [DBG] Committed transaction.
2022-11-27 19:25:00.248 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:00.249 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:00.250 +01:00 [DBG] Disposing transaction.
2022-11-27 19:25:00.250 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.252 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:00.253 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-27 19:25:00.256 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-27 19:25:00.261 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-27 19:25:00.261 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-27 19:25:00.262 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-27 19:25:00.262 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-27 19:25:00.263 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-27 19:25:00.264 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 289.9241ms
2022-11-27 19:25:00.265 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:25:00.266 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" completed keep alive response.
2022-11-27 19:25:00.266 +01:00 [DBG] 'SmartContext' disposed.
2022-11-27 19:25:00.268 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 309.4017ms
2022-11-27 19:25:44.202 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-27 19:25:44.204 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:25:44.205 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-27 19:25:44.206 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:25:44.206 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:25:44.207 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:25:44.207 +01:00 [DBG] The request is a preflight request.
2022-11-27 19:25:44.208 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" completed keep alive response.
2022-11-27 19:25:44.209 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 7.4928ms
2022-11-27 19:25:44.213 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-27 19:25:44.214 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:25:44.215 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-27 19:25:44.216 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:25:44.217 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:25:44.217 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:25:44.218 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:25:44.219 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:25:44.220 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-27 19:25:44.221 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-27 19:25:44.226 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-27 19:25:44.227 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-27 19:25:44.228 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-27 19:25:44.229 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-27 19:25:44.229 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:25:44.230 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:25:44.231 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:25:44.232 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-27 19:25:44.233 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-27 19:25:44.234 +01:00 [DBG] Connection id "0HMMGKBJ90R7F", Request id "0HMMGKBJ90R7F:00000006": started reading request body.
2022-11-27 19:25:44.234 +01:00 [DBG] Connection id "0HMMGKBJ90R7F", Request id "0HMMGKBJ90R7F:00000006": done reading request body.
2022-11-27 19:25:44.235 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-27 19:25:44.235 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:25:44.236 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:25:44.237 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:25:44.238 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:25:44.239 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 19:25:44.241 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:25:44.242 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:25:44.242 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:44.244 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:44.245 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:25:44.248 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:25:44.250 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.250 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.251 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.252 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.257 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.258 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.258 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.259 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.260 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.261 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.262 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.262 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.263 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.264 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.265 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.265 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.266 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.267 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.268 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.269 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.270 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.270 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.271 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.272 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.273 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.273 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.275 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.276 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.277 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.277 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.278 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.279 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.280 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.281 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.282 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.283 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.284 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:25:44.285 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:44.286 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:44.394 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.395 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-27 19:25:44.396 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-27 19:25:44.397 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.398 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.399 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.400 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-27 19:25:44.400 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:44.402 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:44.403 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-27 19:25:44.405 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-27 19:25:44.406 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-27 19:25:44.408 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:25:44.409 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-27 19:25:44.410 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:25:44.413 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:25:44.415 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-27 19:25:44.416 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:25:44.417 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:25:44.417 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:25:44.418 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:25:44.426 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:25:44.429 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:25:44.430 +01:00 [DBG] Committing transaction.
2022-11-27 19:25:44.466 +01:00 [DBG] Committed transaction.
2022-11-27 19:25:44.467 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:44.468 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:25:44.469 +01:00 [DBG] Disposing transaction.
2022-11-27 19:25:44.469 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.472 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:25:44.473 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-27 19:25:44.474 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-27 19:25:44.477 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-27 19:25:44.478 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-27 19:25:44.479 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-27 19:25:44.479 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-27 19:25:44.480 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-27 19:25:44.482 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 252.3651ms
2022-11-27 19:25:44.483 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:25:44.483 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" completed keep alive response.
2022-11-27 19:25:44.484 +01:00 [DBG] 'SmartContext' disposed.
2022-11-27 19:25:44.485 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 271.6819ms
2022-11-27 19:31:16.611 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" received FIN.
2022-11-27 19:31:16.616 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" disconnecting.
2022-11-27 19:31:16.618 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" sending FIN because: "The client closed the connection."
2022-11-27 19:31:16.622 +01:00 [DBG] Connection id "0HMMGKBJ90R7F" stopped.
2022-11-27 19:31:26.598 +01:00 [DBG] Connection id "0HMMGKBJ90R7G" accepted.
2022-11-27 19:31:26.599 +01:00 [DBG] Connection id "0HMMGKBJ90R7G" started.
2022-11-27 19:31:26.600 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-27 19:31:26.600 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:31:26.601 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-27 19:31:26.601 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:31:26.602 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:31:26.602 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:31:26.603 +01:00 [DBG] The request is a preflight request.
2022-11-27 19:31:26.603 +01:00 [DBG] Connection id "0HMMGKBJ90R7G" completed keep alive response.
2022-11-27 19:31:26.604 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 4.2739ms
2022-11-27 19:31:26.604 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-27 19:31:26.605 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:31:26.605 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-27 19:31:26.606 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:31:26.607 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:31:26.607 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:31:26.608 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:31:26.608 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:31:26.609 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-27 19:31:26.610 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-27 19:31:26.611 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-27 19:31:26.616 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-27 19:31:26.617 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-27 19:31:26.618 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-27 19:31:26.619 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:31:26.620 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:31:26.621 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:31:26.621 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-27 19:31:26.623 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-27 19:31:26.624 +01:00 [DBG] Connection id "0HMMGKBJ90R7G", Request id "0HMMGKBJ90R7G:00000002": started reading request body.
2022-11-27 19:31:26.625 +01:00 [DBG] Connection id "0HMMGKBJ90R7G", Request id "0HMMGKBJ90R7G:00000002": done reading request body.
2022-11-27 19:31:26.625 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-27 19:31:26.626 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:31:26.627 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:31:26.627 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:31:26.628 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:31:26.629 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 19:31:26.631 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:31:26.631 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:31:26.632 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:31:26.635 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:31:26.638 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:31:26.641 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:31:26.642 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.647 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.648 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.649 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.650 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.651 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.652 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.653 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.654 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.655 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.656 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.656 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.657 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.658 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.662 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.664 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.665 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.665 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.666 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.667 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.668 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.669 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.670 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.671 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.672 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.672 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.673 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.674 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.675 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.676 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.677 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.677 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.678 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.679 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.680 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.681 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.681 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.682 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:31:26.683 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:31:26.683 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:31:26.793 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.794 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-27 19:31:26.795 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-27 19:31:26.796 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.802 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.803 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.804 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-27 19:31:26.805 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:31:26.807 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:31:26.808 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-27 19:31:26.809 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-27 19:31:26.810 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-27 19:31:26.811 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:31:26.811 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:31:26.812 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:31:26.816 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:31:26.819 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-27 19:31:26.820 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:31:26.820 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:31:26.821 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:31:26.822 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:31:26.824 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:31:26.826 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:31:26.826 +01:00 [DBG] Committing transaction.
2022-11-27 19:31:26.869 +01:00 [DBG] Committed transaction.
2022-11-27 19:31:26.870 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:31:26.871 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:31:26.872 +01:00 [DBG] Disposing transaction.
2022-11-27 19:31:26.873 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.876 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:31:26.881 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-27 19:31:26.882 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-27 19:31:26.884 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-27 19:31:26.885 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-27 19:31:26.887 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-27 19:31:26.888 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-27 19:31:26.889 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-27 19:31:26.890 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 271.0668ms
2022-11-27 19:31:26.891 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:31:26.892 +01:00 [DBG] Connection id "0HMMGKBJ90R7G" completed keep alive response.
2022-11-27 19:31:26.892 +01:00 [DBG] 'SmartContext' disposed.
2022-11-27 19:31:26.893 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 288.8379ms
2022-11-27 19:32:06.686 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-27 19:32:06.689 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:32:06.690 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-27 19:32:06.690 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:32:06.691 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:32:06.691 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:32:06.692 +01:00 [DBG] The request is a preflight request.
2022-11-27 19:32:06.692 +01:00 [DBG] Connection id "0HMMGKBJ90R7G" completed keep alive response.
2022-11-27 19:32:06.700 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 13.6916ms
2022-11-27 19:32:06.701 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-27 19:32:06.701 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:32:06.702 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-27 19:32:06.704 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:32:06.705 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:32:06.706 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:32:06.707 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:32:06.707 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:32:06.708 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-27 19:32:06.711 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-27 19:32:06.712 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-27 19:32:06.713 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-27 19:32:06.715 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-27 19:32:06.716 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-27 19:32:06.717 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:32:06.717 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:32:06.718 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:32:06.719 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-27 19:32:06.720 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-27 19:32:06.720 +01:00 [DBG] Connection id "0HMMGKBJ90R7G", Request id "0HMMGKBJ90R7G:00000004": started reading request body.
2022-11-27 19:32:06.721 +01:00 [DBG] Connection id "0HMMGKBJ90R7G", Request id "0HMMGKBJ90R7G:00000004": done reading request body.
2022-11-27 19:32:06.722 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-27 19:32:06.722 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:32:06.723 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:32:06.724 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:32:06.724 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:32:06.730 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 19:32:06.732 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:32:06.732 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:32:06.733 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:32:06.735 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:32:06.736 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:32:06.739 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:32:06.741 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.741 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.742 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.743 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.744 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.745 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.746 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.747 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.747 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.748 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.749 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.750 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.751 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.751 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.752 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.753 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.754 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.754 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.755 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.757 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.758 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.759 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.759 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.760 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.761 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.762 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.763 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.764 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.765 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.765 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.766 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.767 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.768 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.769 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.770 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.771 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.777 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.777 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.779 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:32:06.779 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:32:06.780 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:32:06.887 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.889 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-27 19:32:06.890 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-27 19:32:06.891 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.892 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.893 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.894 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-27 19:32:06.894 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:32:06.896 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:32:06.897 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-27 19:32:06.898 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-27 19:32:06.899 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-27 19:32:06.901 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:32:06.903 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-27 19:32:06.904 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:32:06.907 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:32:06.909 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-27 19:32:06.909 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:32:06.910 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:32:06.911 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:32:06.912 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:32:06.916 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:32:06.919 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:32:06.920 +01:00 [DBG] Committing transaction.
2022-11-27 19:32:06.959 +01:00 [DBG] Committed transaction.
2022-11-27 19:32:06.959 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:32:06.960 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:32:06.961 +01:00 [DBG] Disposing transaction.
2022-11-27 19:32:06.962 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.964 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:32:06.965 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-27 19:32:06.966 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-27 19:32:06.969 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-27 19:32:06.969 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-27 19:32:06.970 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-27 19:32:06.971 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-27 19:32:06.972 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-27 19:32:06.972 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 255.6798ms
2022-11-27 19:32:06.973 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:32:06.974 +01:00 [DBG] Connection id "0HMMGKBJ90R7G" completed keep alive response.
2022-11-27 19:32:06.975 +01:00 [DBG] 'SmartContext' disposed.
2022-11-27 19:32:06.976 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 274.8944ms
2022-11-27 19:37:17.277 +01:00 [DBG] Connection id "0HMMGKBJ90R7G" received FIN.
2022-11-27 19:37:17.280 +01:00 [DBG] Connection id "0HMMGKBJ90R7G" sending FIN because: "The client closed the connection."
2022-11-27 19:37:17.280 +01:00 [DBG] Connection id "0HMMGKBJ90R7G" disconnecting.
2022-11-27 19:37:17.283 +01:00 [DBG] Connection id "0HMMGKBJ90R7G" stopped.
2022-11-27 19:49:25.845 +01:00 [DBG] Connection id "0HMMGKBJ90R7H" accepted.
2022-11-27 19:49:25.881 +01:00 [DBG] Connection id "0HMMGKBJ90R7H" started.
2022-11-27 19:49:25.882 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - -
2022-11-27 19:49:25.883 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:49:25.884 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2022-11-27 19:49:25.885 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:49:25.886 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:49:25.887 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:49:25.888 +01:00 [DBG] The request is a preflight request.
2022-11-27 19:49:25.888 +01:00 [DBG] Connection id "0HMMGKBJ90R7H" completed keep alive response.
2022-11-27 19:49:25.889 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5011/Auth/authenticate - - - 204 - - 7.2271ms
2022-11-27 19:49:25.893 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41
2022-11-27 19:49:25.894 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-11-27 19:49:25.895 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-11-27 19:49:25.896 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:49:25.896 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-27 19:49:25.897 +01:00 [DBG] The request has an origin header: 'http://localhost:51159'.
2022-11-27 19:49:25.897 +01:00 [INF] CORS policy execution successful.
2022-11-27 19:49:25.898 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:49:25.899 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-11-27 19:49:25.901 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-11-27 19:49:25.902 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-27 19:49:25.903 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-27 19:49:25.904 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-11-27 19:49:25.905 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-27 19:49:25.909 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:49:25.911 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-11-27 19:49:25.912 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:49:25.913 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-11-27 19:49:25.914 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-11-27 19:49:25.915 +01:00 [DBG] Connection id "0HMMGKBJ90R7H", Request id "0HMMGKBJ90R7H:00000002": started reading request body.
2022-11-27 19:49:25.916 +01:00 [DBG] Connection id "0HMMGKBJ90R7H", Request id "0HMMGKBJ90R7H:00000002": done reading request body.
2022-11-27 19:49:25.917 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-11-27 19:49:25.917 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:49:25.918 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:49:25.919 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-11-27 19:49:25.920 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-11-27 19:49:25.921 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 19:49:25.923 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:49:25.923 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:49:25.924 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:49:25.928 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:49:25.931 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:49:25.934 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-11-27 19:49:25.936 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.937 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.939 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.940 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.941 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.942 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.943 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.944 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.945 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.946 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.947 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.947 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.948 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.949 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.950 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.951 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.953 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.954 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.955 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.955 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.956 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.957 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.958 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.959 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.960 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.961 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.962 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.963 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.964 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.965 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.966 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.967 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.968 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.971 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.974 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.976 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.977 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.978 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.979 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:25.980 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:49:25.981 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:49:25.982 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:49:26.094 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:26.096 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-11-27 19:49:26.097 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-11-27 19:49:26.098 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:26.099 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:26.101 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:26.103 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-11-27 19:49:26.104 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:49:26.106 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:49:26.108 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-11-27 19:49:26.112 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-11-27 19:49:26.113 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-11-27 19:49:26.114 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:49:26.115 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-27 19:49:26.116 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:49:26.167 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-11-27 19:49:26.170 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-11-27 19:49:26.171 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:49:26.172 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 19:49:26.173 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-11-27 19:49:26.175 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:49:26.178 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-11-27 19:49:26.179 +01:00 [DBG] A data reader was disposed.
2022-11-27 19:49:26.180 +01:00 [DBG] Committing transaction.
2022-11-27 19:49:26.187 +01:00 [DBG] Committed transaction.
2022-11-27 19:49:26.188 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:49:26.189 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 19:49:26.190 +01:00 [DBG] Disposing transaction.
2022-11-27 19:49:26.191 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:26.192 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-11-27 19:49:26.194 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-11-27 19:49:26.195 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-11-27 19:49:26.196 +01:00 [DBG] No information found on request to perform content negotiation.
2022-11-27 19:49:26.197 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-11-27 19:49:26.198 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-11-27 19:49:26.198 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-11-27 19:49:26.203 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-11-27 19:49:26.204 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 295.9665ms
2022-11-27 19:49:26.205 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-11-27 19:49:26.206 +01:00 [DBG] Connection id "0HMMGKBJ90R7H" completed keep alive response.
2022-11-27 19:49:26.207 +01:00 [DBG] 'SmartContext' disposed.
2022-11-27 19:49:26.208 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 41 - 200 - application/json;+charset=utf-8 315.4344ms
2022-11-27 19:50:00.899 +01:00 [DBG] Connection id "0HMMGKBJ90R7H" reset.
2022-11-27 19:50:00.904 +01:00 [DBG] Connection id "0HMMGKBJ90R7H" sending FIN because: "The client closed the connection."
2022-11-27 19:50:00.907 +01:00 [DBG] Connection id "0HMMGKBJ90R7H" disconnecting.
2022-11-27 19:50:00.910 +01:00 [DBG] Connection id "0HMMGKBJ90R7H" stopped.
2022-11-27 20:24:55.951 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-27 20:24:56.464 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-27 20:24:56.467 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-11-27 20:24:56.556 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 20:24:56.557 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 20:24:56.558 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 20:24:56.559 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 20:24:56.560 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 20:24:56.561 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-27 20:24:56.724 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 20:24:56.747 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:56.753 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-27 20:24:56.989 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-27 20:24:57.052 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-27 20:24:57.057 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (4ms).
2022-11-27 20:24:57.060 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.066 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.071 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-27 20:24:57.087 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-27 20:24:57.089 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.092 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.093 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-11-27 20:24:57.097 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-11-27 20:24:57.099 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-11-27 20:24:57.099 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-11-27 20:24:57.100 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.103 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.105 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-27 20:24:57.114 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-11-27 20:24:57.116 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.117 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.148 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-27 20:24:57.149 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-11-27 20:24:57.150 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.151 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.160 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-27 20:24:57.164 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-11-27 20:24:57.166 +01:00 [DBG] A data reader was disposed.
2022-11-27 20:24:57.167 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.168 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-11-27 20:24:57.177 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-11-27 20:24:57.198 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-11-27 20:24:57.267 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-27 20:24:57.349 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-11-27 20:24:57.384 +01:00 [DBG] Hosting starting
2022-11-27 20:24:57.498 +01:00 [INF] Now listening on: http://[::]:5011
2022-11-27 20:24:57.499 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-11-27 20:24:57.500 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-11-27 20:24:57.500 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-11-27 20:24:57.501 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-27 20:24:57.502 +01:00 [INF] Hosting environment: Development
2022-11-27 20:24:57.503 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-11-27 20:24:57.505 +01:00 [DBG] Hosting started
2022-12-01 19:29:57.595 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-12-01 19:29:57.883 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 19:29:57.884 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 19:29:57.937 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:29:57.938 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:29:57.939 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:29:57.939 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:29:57.940 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:29:57.941 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:29:58.033 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 19:29:58.433 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.437 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-12-01 19:29:58.512 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-12-01 19:29:58.566 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-12-01 19:29:58.569 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (4ms).
2022-12-01 19:29:58.572 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.583 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.588 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 19:29:58.597 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 19:29:58.599 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.603 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.604 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-12-01 19:29:58.606 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-12-01 19:29:58.608 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-12-01 19:29:58.613 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (4ms).
2022-12-01 19:29:58.613 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.616 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.617 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 19:29:58.619 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 19:29:58.620 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.621 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.646 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:29:58.647 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-12-01 19:29:58.648 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.649 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.651 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-12-01 19:29:58.654 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-12-01 19:29:58.657 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:29:58.658 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.659 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:29:58.669 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-12-01 19:29:58.683 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 19:29:58.751 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-12-01 19:29:58.816 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-12-01 19:29:58.837 +01:00 [DBG] Hosting starting
2022-12-01 19:29:58.926 +01:00 [INF] Now listening on: http://[::]:5011
2022-12-01 19:29:58.928 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-12-01 19:29:58.934 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-12-01 19:29:58.934 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-12-01 19:29:58.937 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-12-01 19:29:58.939 +01:00 [INF] Hosting environment: Development
2022-12-01 19:29:58.943 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-12-01 19:29:58.946 +01:00 [DBG] Hosting started
2022-12-01 19:46:20.858 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-12-01 19:46:21.183 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 19:46:21.185 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 19:46:21.248 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:46:21.249 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:46:21.249 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:46:21.250 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:46:21.251 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:46:21.251 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 19:46:21.354 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 19:46:21.372 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.377 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-12-01 19:46:21.439 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-12-01 19:46:21.483 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-12-01 19:46:21.490 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2022-12-01 19:46:21.493 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.499 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.504 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 19:46:21.512 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 19:46:21.514 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.519 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.522 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-12-01 19:46:21.525 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-12-01 19:46:21.526 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-12-01 19:46:21.527 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-12-01 19:46:21.528 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.530 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.531 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 19:46:21.538 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 19:46:21.540 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.540 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.560 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:21.561 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:21.567 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.568 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.569 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-12-01 19:46:21.572 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-12-01 19:46:21.578 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:21.579 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.580 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:21.586 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-12-01 19:46:21.601 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 19:46:21.651 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-12-01 19:46:21.724 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-12-01 19:46:21.741 +01:00 [DBG] Hosting starting
2022-12-01 19:46:21.815 +01:00 [INF] Now listening on: http://[::]:5011
2022-12-01 19:46:21.816 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-12-01 19:46:21.816 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-12-01 19:46:21.817 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-12-01 19:46:21.818 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-12-01 19:46:21.818 +01:00 [INF] Hosting environment: Development
2022-12-01 19:46:21.819 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-12-01 19:46:21.821 +01:00 [DBG] Hosting started
2022-12-01 19:46:40.813 +01:00 [DBG] Connection id "0HMMJPHHAA45S" accepted.
2022-12-01 19:46:40.815 +01:00 [DBG] Connection id "0HMMJPHHAA45S" started.
2022-12-01 19:46:40.868 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51
2022-12-01 19:46:40.883 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-12-01 19:46:40.913 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-12-01 19:46:40.916 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-12-01 19:46:40.917 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 19:46:40.995 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 19:46:40.998 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 19:46:41.020 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-12-01 19:46:41.028 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 19:46:41.029 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 19:46:41.031 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 19:46:41.032 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 19:46:41.034 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 19:46:41.037 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 19:46:41.040 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 19:46:41.057 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 19:46:41.059 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-12-01 19:46:41.061 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 19:46:41.092 +01:00 [DBG] Connection id "0HMMJPHHAA45S", Request id "0HMMJPHHAA45S:00000001": started reading request body.
2022-12-01 19:46:41.093 +01:00 [DBG] Connection id "0HMMJPHHAA45S", Request id "0HMMJPHHAA45S:00000001": done reading request body.
2022-12-01 19:46:41.098 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-12-01 19:46:41.099 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 19:46:41.100 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 19:46:41.105 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 19:46:41.121 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 19:46:41.238 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 19:46:41.375 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.RefreshTokens)
    .FirstOrDefault(x => x.Username == __model_Username_0)'
2022-12-01 19:46:41.396 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 19:46:41.612 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Username == @__model_Username_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 19:46:41.635 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:41.636 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:41.665 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:41.669 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:41.671 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:46:41.681 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:46:41.699 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.721 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.739 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.741 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.743 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.744 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.746 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.747 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.749 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.750 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.751 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.752 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.758 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.759 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.760 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.761 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.762 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.763 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.764 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.765 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.766 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.767 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.768 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.770 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.771 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.772 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.774 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.776 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.777 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.778 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.779 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.780 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.781 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.782 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.783 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.786 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.787 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.788 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.789 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.791 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:41.793 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:41.795 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:41.796 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:42.685 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.688 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 19:46:42.701 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 19:46:42.709 +01:00 [DBG] 1 entities were added and 3 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.713 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.717 +01:00 [DBG] An entity of type 'RefreshToken' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.718 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Modified"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.721 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.722 +01:00 [DBG] An entity of type 'RefreshToken' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.723 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Modified"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.724 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.725 +01:00 [DBG] An entity of type 'RefreshToken' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.726 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Modified"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.743 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.748 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.753 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 19:46:42.765 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:42.768 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:42.769 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 19:46:42.816 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 19:46:42.845 +01:00 [DBG] Executing update commands individually as the number of batchable commands (3) is smaller than the minimum batch size (4).
2022-12-01 19:46:42.850 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:42.855 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2022-12-01 19:46:42.860 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `RefreshToken`
WHERE `Id` = @p0;
SELECT ROW_COUNT();
2022-12-01 19:46:42.910 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `RefreshToken`
WHERE `Id` = @p0;
SELECT ROW_COUNT();
2022-12-01 19:46:42.914 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:42.914 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:42.915 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:42.916 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `RefreshToken`
WHERE `Id` = @p0;
SELECT ROW_COUNT();
2022-12-01 19:46:42.918 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `RefreshToken`
WHERE `Id` = @p0;
SELECT ROW_COUNT();
2022-12-01 19:46:42.919 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:42.923 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:42.923 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:42.924 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 19:46:42.927 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 19:46:42.933 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:42.934 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:42.934 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:42.935 +01:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `RefreshToken`
WHERE `Id` = @p5;
SELECT ROW_COUNT();
2022-12-01 19:46:42.937 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM `RefreshToken`
WHERE `Id` = @p5;
SELECT ROW_COUNT();
2022-12-01 19:46:42.939 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:42.944 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:42.945 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:42.945 +01:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = DateTime), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 19:46:42.949 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p6='?' (DbType = DateTime), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 19:46:42.958 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-12-01 19:46:42.961 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:42.963 +01:00 [DBG] Committing transaction.
2022-12-01 19:46:42.983 +01:00 [DBG] Committed transaction.
2022-12-01 19:46:42.985 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:42.986 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:42.988 +01:00 [DBG] Disposing transaction.
2022-12-01 19:46:42.991 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.992 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.995 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.996 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:42.997 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:43.000 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 5 entities written to the database.
2022-12-01 19:46:43.007 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 19:46:43.009 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 19:46:43.010 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-12-01 19:46:43.011 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-12-01 19:46:43.012 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-12-01 19:46:43.014 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-12-01 19:46:43.032 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 1995.2673ms
2022-12-01 19:46:43.033 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 19:46:43.039 +01:00 [DBG] Connection id "0HMMJPHHAA45S" completed keep alive response.
2022-12-01 19:46:43.043 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 19:46:43.047 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51 - 200 - application/json;+charset=utf-8 2180.3384ms
2022-12-01 19:46:49.826 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51
2022-12-01 19:46:49.828 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-12-01 19:46:49.829 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-12-01 19:46:49.831 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 19:46:49.832 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 19:46:49.834 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 19:46:49.835 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-12-01 19:46:49.836 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 19:46:49.837 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 19:46:49.838 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 19:46:49.840 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 19:46:49.841 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 19:46:49.842 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 19:46:49.843 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 19:46:49.844 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 19:46:49.845 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-12-01 19:46:49.846 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 19:46:49.847 +01:00 [DBG] Connection id "0HMMJPHHAA45S", Request id "0HMMJPHHAA45S:00000002": started reading request body.
2022-12-01 19:46:49.848 +01:00 [DBG] Connection id "0HMMJPHHAA45S", Request id "0HMMJPHHAA45S:00000002": done reading request body.
2022-12-01 19:46:49.852 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-12-01 19:46:49.852 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 19:46:49.853 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 19:46:49.854 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 19:46:49.855 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 19:46:49.856 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 19:46:49.860 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:49.860 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:49.861 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:49.869 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:49.871 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:46:49.874 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:46:49.878 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.879 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.880 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.883 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.884 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.886 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.887 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.888 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.889 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.890 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.891 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.892 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.893 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.894 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.900 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.901 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.902 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.903 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.904 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.906 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.907 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.908 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.909 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.911 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.913 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.914 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.916 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.918 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.919 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.920 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.921 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.922 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.923 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.924 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.930 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.932 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.933 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.934 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:49.936 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:49.936 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:49.937 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:50.040 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:50.042 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 19:46:50.043 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 19:46:50.045 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:50.048 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:50.052 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:50.053 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 19:46:50.054 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:50.056 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:50.057 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 19:46:50.059 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 19:46:50.060 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-12-01 19:46:50.061 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:50.062 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:50.063 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 19:46:50.153 +01:00 [INF] Executed DbCommand (89ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 19:46:50.156 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-12-01 19:46:50.157 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:50.158 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:50.158 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:50.159 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 19:46:50.162 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 19:46:50.165 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:50.166 +01:00 [DBG] Committing transaction.
2022-12-01 19:46:50.173 +01:00 [DBG] Committed transaction.
2022-12-01 19:46:50.176 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:50.177 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:50.178 +01:00 [DBG] Disposing transaction.
2022-12-01 19:46:50.179 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:50.180 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:50.181 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-12-01 19:46:50.183 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 19:46:50.185 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 19:46:50.186 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-12-01 19:46:50.186 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-12-01 19:46:50.188 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-12-01 19:46:50.189 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-12-01 19:46:50.190 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 348.1994ms
2022-12-01 19:46:50.191 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 19:46:50.192 +01:00 [DBG] Connection id "0HMMJPHHAA45S" completed keep alive response.
2022-12-01 19:46:50.192 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 19:46:50.193 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51 - 200 - application/json;+charset=utf-8 367.1078ms
2022-12-01 19:46:52.760 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 59
2022-12-01 19:46:52.760 +01:00 [DBG] 1 candidate(s) found for the request path '/Image'
2022-12-01 19:46:52.761 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Post (smart.api)' with route pattern 'Image' is valid for the request path '/Image'
2022-12-01 19:46:52.762 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 19:46:52.764 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 19:46:52.786 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 19:46:52.789 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __tokenUserId_Value_0)'
2022-12-01 19:46:52.791 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 19:46:52.797 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__tokenUserId_Value_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 19:46:52.801 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:52.801 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:52.807 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:52.809 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:52.810 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:46:52.815 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:46:52.818 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.821 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.823 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.824 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.825 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.826 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.827 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.828 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.829 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.831 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.832 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.833 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.834 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.839 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.840 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.841 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.842 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.843 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.844 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.846 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.847 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.848 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.849 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.852 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.853 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.854 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.855 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.856 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.857 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.858 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.859 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.860 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.861 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.862 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.863 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.864 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.870 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.871 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.872 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:46:52.873 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:52.874 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:52.875 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:52.889 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __id_0)'
2022-12-01 19:46:52.890 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 19:46:52.899 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__id_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 19:46:52.902 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:46:52.903 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:46:52.904 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:52.905 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:52.906 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:46:52.909 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:46:52.913 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:46:52.914 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:52.914 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:46:52.915 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 19:46:52.919 +01:00 [INF] Route matched with {action = "Post", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateImageDto) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 19:46:52.921 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 19:46:52.922 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 19:46:52.922 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 19:46:52.924 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 19:46:52.925 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 19:46:52.931 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 19:46:52.932 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 19:46:52.933 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 19:46:52.933 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' using the name '' in request data ...
2022-12-01 19:46:52.934 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 19:46:52.942 +01:00 [DBG] Connection id "0HMMJPHHAA45S", Request id "0HMMJPHHAA45S:00000003": started reading request body.
2022-12-01 19:46:52.942 +01:00 [DBG] Connection id "0HMMJPHHAA45S", Request id "0HMMJPHHAA45S:00000003": done reading request body.
2022-12-01 19:46:52.952 +01:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to smart.contract.CreateImageDto. Path: $.Data | LineNumber: 3 | BytePositionInLine: 10.
2022-12-01 19:46:52.953 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 19:46:52.953 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 19:46:52.954 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 19:46:52.961 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 19:46:52.963 +01:00 [DBG] The request has model state errors, returning an error response.
2022-12-01 19:46:52.965 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-12-01 19:46:52.965 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 19:46:52.967 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 19:46:52.968 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-12-01 19:46:52.969 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-12-01 19:46:52.970 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-12-01 19:46:52.977 +01:00 [INF] Executed action smart.api.Controllers.ImageController.Post (smart.api) in 45.5285ms
2022-12-01 19:46:52.978 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 19:46:52.978 +01:00 [DBG] Connection id "0HMMJPHHAA45S" completed keep alive response.
2022-12-01 19:46:52.979 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 19:46:52.980 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 59 - 400 - application/problem+json;+charset=utf-8 220.3236ms
2022-12-01 19:47:11.667 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 59
2022-12-01 19:47:11.668 +01:00 [DBG] 1 candidate(s) found for the request path '/Image'
2022-12-01 19:47:11.668 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Post (smart.api)' with route pattern 'Image' is valid for the request path '/Image'
2022-12-01 19:47:11.670 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 19:47:11.670 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 19:47:11.671 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 19:47:11.673 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:47:11.673 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:47:11.674 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:47:11.676 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:47:11.677 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:47:11.683 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:47:11.685 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.686 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.687 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.688 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.689 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.690 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.691 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.692 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.693 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.694 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.700 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.701 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.702 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.704 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.705 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.706 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.707 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.708 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.709 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.711 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.712 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.713 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.714 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.715 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.716 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.717 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.718 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.719 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.720 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.721 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.722 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.723 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.724 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.729 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.730 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.731 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.732 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.734 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.735 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:47:11.736 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:47:11.737 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:47:11.738 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:47:11.739 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:47:11.739 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:47:11.742 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:47:11.743 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:47:11.744 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:47:11.748 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:47:11.750 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:47:11.750 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:47:11.751 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:47:11.752 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 19:47:11.752 +01:00 [INF] Route matched with {action = "Post", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateImageDto) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 19:47:11.754 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 19:47:11.755 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 19:47:11.760 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 19:47:11.762 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 19:47:11.763 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 19:47:11.764 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 19:47:11.765 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 19:47:11.766 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 19:47:11.767 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' using the name '' in request data ...
2022-12-01 19:47:11.768 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 19:47:11.769 +01:00 [DBG] Connection id "0HMMJPHHAA45S", Request id "0HMMJPHHAA45S:00000004": started reading request body.
2022-12-01 19:47:11.770 +01:00 [DBG] Connection id "0HMMJPHHAA45S", Request id "0HMMJPHHAA45S:00000004": done reading request body.
2022-12-01 19:47:11.772 +01:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to smart.contract.CreateImageDto. Path: $.Data | LineNumber: 3 | BytePositionInLine: 10.
2022-12-01 19:47:11.776 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 19:47:11.777 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 19:47:11.777 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 19:47:11.778 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 19:47:11.779 +01:00 [DBG] The request has model state errors, returning an error response.
2022-12-01 19:47:11.780 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-12-01 19:47:11.781 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 19:47:11.782 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 19:47:11.783 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-12-01 19:47:11.784 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-12-01 19:47:11.785 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-12-01 19:47:11.786 +01:00 [INF] Executed action smart.api.Controllers.ImageController.Post (smart.api) in 22.5935ms
2022-12-01 19:47:11.788 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 19:47:11.789 +01:00 [DBG] Connection id "0HMMJPHHAA45S" completed keep alive response.
2022-12-01 19:47:11.790 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 19:47:11.790 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 59 - 400 - application/problem+json;+charset=utf-8 123.3527ms
2022-12-01 19:49:17.591 +01:00 [DBG] Connection id "0HMMJPHHAA45S" received FIN.
2022-12-01 19:49:17.595 +01:00 [DBG] Connection id "0HMMJPHHAA45T" accepted.
2022-12-01 19:49:17.600 +01:00 [DBG] Connection id "0HMMJPHHAA45S" disconnecting.
2022-12-01 19:49:17.600 +01:00 [DBG] Connection id "0HMMJPHHAA45T" started.
2022-12-01 19:49:17.601 +01:00 [DBG] Connection id "0HMMJPHHAA45S" sending FIN because: "The client closed the connection."
2022-12-01 19:49:17.603 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 59
2022-12-01 19:49:17.605 +01:00 [DBG] 1 candidate(s) found for the request path '/Image'
2022-12-01 19:49:17.608 +01:00 [DBG] Connection id "0HMMJPHHAA45S" stopped.
2022-12-01 19:49:17.608 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Post (smart.api)' with route pattern 'Image' is valid for the request path '/Image'
2022-12-01 19:49:17.610 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 19:49:17.610 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 19:49:17.612 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 19:49:17.613 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:49:17.614 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:49:17.615 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:49:17.617 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:49:17.618 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:49:17.626 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:49:17.629 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.630 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.631 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.633 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.635 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.637 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.639 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.640 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.641 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.642 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.643 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.644 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.645 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.647 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.648 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.649 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.655 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.657 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.658 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.659 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.660 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.661 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.662 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.664 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.666 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.667 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.669 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.670 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.671 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.673 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.674 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.675 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.676 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.677 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.679 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.680 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.683 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.684 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.685 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 19:49:17.687 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:49:17.687 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:49:17.688 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:49:17.690 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 19:49:17.690 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 19:49:17.691 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:49:17.693 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:49:17.694 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:49:17.703 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 19:49:17.705 +01:00 [DBG] A data reader was disposed.
2022-12-01 19:49:17.706 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:49:17.707 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 19:49:17.709 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 19:49:17.710 +01:00 [INF] Route matched with {action = "Post", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateImageDto) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 19:49:17.713 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 19:49:17.715 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 19:49:17.716 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 19:49:17.718 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 19:49:17.719 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 19:49:17.720 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 19:49:17.721 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 19:49:17.722 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 19:49:17.723 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' using the name '' in request data ...
2022-12-01 19:49:17.724 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 19:49:17.725 +01:00 [DBG] Connection id "0HMMJPHHAA45T", Request id "0HMMJPHHAA45T:00000001": started reading request body.
2022-12-01 19:49:17.731 +01:00 [DBG] Connection id "0HMMJPHHAA45T", Request id "0HMMJPHHAA45T:00000001": done reading request body.
2022-12-01 19:49:17.732 +01:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to smart.contract.CreateImageDto. Path: $.Data | LineNumber: 3 | BytePositionInLine: 10.
2022-12-01 19:49:17.733 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 19:49:17.734 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 19:49:17.735 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 19:49:17.736 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 19:49:17.737 +01:00 [DBG] The request has model state errors, returning an error response.
2022-12-01 19:49:17.737 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-12-01 19:49:17.738 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 19:49:17.741 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 19:49:17.742 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-12-01 19:49:17.745 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-12-01 19:49:17.747 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-12-01 19:49:17.748 +01:00 [INF] Executed action smart.api.Controllers.ImageController.Post (smart.api) in 27.7946ms
2022-12-01 19:49:17.749 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 19:49:17.750 +01:00 [DBG] Connection id "0HMMJPHHAA45T" completed keep alive response.
2022-12-01 19:49:17.751 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 19:49:17.752 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 59 - 400 - application/problem+json;+charset=utf-8 148.8247ms
2022-12-01 20:00:44.061 +01:00 [DBG] Connection id "0HMMJPHHAA45T" received FIN.
2022-12-01 20:00:44.064 +01:00 [DBG] Connection id "0HMMJPHHAA45U" accepted.
2022-12-01 20:00:44.094 +01:00 [DBG] Connection id "0HMMJPHHAA45T" disconnecting.
2022-12-01 20:00:44.095 +01:00 [DBG] Connection id "0HMMJPHHAA45U" started.
2022-12-01 20:00:44.098 +01:00 [DBG] Connection id "0HMMJPHHAA45T" sending FIN because: "The client closed the connection."
2022-12-01 20:00:44.099 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 59
2022-12-01 20:00:44.099 +01:00 [DBG] Connection id "0HMMJPHHAA45T" stopped.
2022-12-01 20:00:44.102 +01:00 [DBG] 1 candidate(s) found for the request path '/Image'
2022-12-01 20:00:44.103 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Post (smart.api)' with route pattern 'Image' is valid for the request path '/Image'
2022-12-01 20:00:44.105 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:00:44.106 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:00:44.107 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:00:44.108 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:00:44.109 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:00:44.110 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:44.116 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:44.117 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:00:44.127 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:00:44.130 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.130 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.132 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.133 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.134 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.137 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.138 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.139 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.140 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.141 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.142 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.143 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.144 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.145 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.146 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.147 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.149 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.150 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.156 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.157 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.159 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.161 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.162 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.165 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.170 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.172 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.173 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.174 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.175 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.176 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.177 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.179 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.181 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.183 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.185 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.186 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.187 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.189 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.190 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:44.192 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:00:44.193 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:44.194 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:44.242 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:00:44.243 +01:00 [INF] Route matched with {action = "Post", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateImageDto) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 20:00:44.246 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:00:44.248 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:00:44.249 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:00:44.251 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:00:44.252 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:00:44.253 +01:00 [INF] Authorization failed for the request at filter 'bp.net.Auth.Server.Attributes.AuthorizeAttribute'.
2022-12-01 20:00:44.255 +01:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-12-01 20:00:44.257 +01:00 [INF] Executed action smart.api.Controllers.ImageController.Post (smart.api) in 3.769ms
2022-12-01 20:00:44.258 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:00:44.259 +01:00 [DBG] Connection id "0HMMJPHHAA45U" completed keep alive response.
2022-12-01 20:00:44.260 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:00:44.263 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 59 - 401 - application/json;+charset=utf-8 164.4949ms
2022-12-01 20:00:44.264 +01:00 [DBG] Connection id "0HMMJPHHAA45U", Request id "0HMMJPHHAA45U:00000001": started reading request body.
2022-12-01 20:00:44.265 +01:00 [DBG] Connection id "0HMMJPHHAA45U", Request id "0HMMJPHHAA45U:00000001": done reading request body.
2022-12-01 20:00:46.974 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51
2022-12-01 20:00:46.975 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-12-01 20:00:46.976 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-12-01 20:00:46.977 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:00:46.978 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:00:46.979 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:00:46.979 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-12-01 20:00:46.981 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:00:46.982 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:00:46.983 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:00:46.984 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:00:46.985 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:00:46.987 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 20:00:46.992 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 20:00:46.993 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 20:00:46.994 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-12-01 20:00:46.995 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 20:00:46.996 +01:00 [DBG] Connection id "0HMMJPHHAA45U", Request id "0HMMJPHHAA45U:00000002": started reading request body.
2022-12-01 20:00:46.997 +01:00 [DBG] Connection id "0HMMJPHHAA45U", Request id "0HMMJPHHAA45U:00000002": done reading request body.
2022-12-01 20:00:46.998 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-12-01 20:00:46.999 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:00:47.000 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:00:47.001 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 20:00:47.001 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:00:47.003 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:00:47.008 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:00:47.009 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:00:47.010 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:47.011 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:47.013 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:00:47.016 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:00:47.020 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.021 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.022 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.023 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.024 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.025 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.026 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.027 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.029 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.030 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.031 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.032 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.033 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.034 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.036 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.038 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.039 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.040 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.041 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.042 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.044 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.045 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.046 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.047 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.048 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.049 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.052 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.053 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.054 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.055 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.056 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.057 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.058 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.059 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.060 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.061 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.062 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.063 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.064 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.065 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:00:47.072 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:47.072 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:47.179 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.181 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 20:00:47.181 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:00:47.182 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.183 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.184 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.185 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:00:47.186 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:47.187 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:47.188 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 20:00:47.193 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 20:00:47.195 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-12-01 20:00:47.197 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:00:47.198 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:00:47.198 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:00:47.201 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:00:47.203 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-12-01 20:00:47.204 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:00:47.205 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:00:47.205 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:00:47.211 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 20:00:47.214 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 20:00:47.216 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:00:47.216 +01:00 [DBG] Committing transaction.
2022-12-01 20:00:47.257 +01:00 [DBG] Committed transaction.
2022-12-01 20:00:47.257 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:47.258 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:00:47.259 +01:00 [DBG] Disposing transaction.
2022-12-01 20:00:47.260 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.261 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:00:47.262 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-12-01 20:00:47.263 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 20:00:47.264 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 20:00:47.265 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-12-01 20:00:47.266 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-12-01 20:00:47.266 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-12-01 20:00:47.267 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-12-01 20:00:47.273 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 286.0469ms
2022-12-01 20:00:47.273 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:00:47.274 +01:00 [DBG] Connection id "0HMMJPHHAA45U" completed keep alive response.
2022-12-01 20:00:47.275 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:00:47.276 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51 - 200 - application/json;+charset=utf-8 301.5718ms
2022-12-01 20:01:07.109 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 59
2022-12-01 20:01:07.110 +01:00 [DBG] 1 candidate(s) found for the request path '/Image'
2022-12-01 20:01:07.111 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Post (smart.api)' with route pattern 'Image' is valid for the request path '/Image'
2022-12-01 20:01:07.113 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:01:07.114 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:01:07.115 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:01:07.116 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:01:07.117 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:01:07.118 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:01:07.119 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:01:07.120 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:01:07.129 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:01:07.131 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.132 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.133 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.134 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.135 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.137 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.139 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.140 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.141 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.143 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.144 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.145 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.146 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.147 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.148 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.149 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.150 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.151 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.152 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.155 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.156 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.157 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.158 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.160 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.161 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.162 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.163 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.164 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.166 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.167 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.168 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.170 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.171 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.173 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.174 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.175 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.176 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.177 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.178 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.179 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:01:07.180 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:01:07.181 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:01:07.182 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:01:07.183 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:01:07.188 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2022-12-01 20:01:07.189 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:01:07.190 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:01:07.191 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:01:07.195 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:01:07.197 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:01:07.197 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:01:07.198 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:01:07.200 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:01:07.201 +01:00 [INF] Route matched with {action = "Post", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateImageDto) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 20:01:07.203 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:01:07.205 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:01:07.206 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:01:07.208 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:01:07.209 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:01:07.211 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:01:07.211 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:01:07.213 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 20:01:07.219 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' using the name '' in request data ...
2022-12-01 20:01:07.220 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 20:01:07.221 +01:00 [DBG] Connection id "0HMMJPHHAA45U", Request id "0HMMJPHHAA45U:00000003": started reading request body.
2022-12-01 20:01:07.222 +01:00 [DBG] Connection id "0HMMJPHHAA45U", Request id "0HMMJPHHAA45U:00000003": done reading request body.
2022-12-01 20:01:07.223 +01:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to smart.contract.CreateImageDto. Path: $.Data | LineNumber: 3 | BytePositionInLine: 10.
2022-12-01 20:01:07.224 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:01:07.225 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:01:07.226 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 20:01:07.227 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:01:07.228 +01:00 [DBG] The request has model state errors, returning an error response.
2022-12-01 20:01:07.229 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2022-12-01 20:01:07.234 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 20:01:07.236 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 20:01:07.237 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2022-12-01 20:01:07.239 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2022-12-01 20:01:07.240 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-12-01 20:01:07.241 +01:00 [INF] Executed action smart.api.Controllers.ImageController.Post (smart.api) in 30.3369ms
2022-12-01 20:01:07.242 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:01:07.242 +01:00 [DBG] Connection id "0HMMJPHHAA45U" completed keep alive response.
2022-12-01 20:01:07.243 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:01:07.244 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 59 - 400 - application/problem+json;+charset=utf-8 134.8238ms
2022-12-01 20:05:08.805 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-12-01 20:05:09.153 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:05:09.155 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:05:09.234 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:05:09.235 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:05:09.236 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:05:09.236 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:05:09.237 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:05:09.238 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:05:09.363 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:05:09.380 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.385 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-12-01 20:05:09.459 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-12-01 20:05:09.516 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-12-01 20:05:09.520 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2022-12-01 20:05:09.522 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.528 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.538 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:05:09.549 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:05:09.552 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.554 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.556 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-12-01 20:05:09.558 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-12-01 20:05:09.560 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-12-01 20:05:09.560 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-12-01 20:05:09.561 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.569 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.570 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:05:09.572 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:05:09.574 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.575 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.601 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:05:09.602 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:05:09.604 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.606 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.607 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-12-01 20:05:09.610 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-12-01 20:05:09.613 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:05:09.613 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.614 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:09.622 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-12-01 20:05:09.634 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:05:09.685 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-12-01 20:05:09.747 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-12-01 20:05:09.769 +01:00 [DBG] Hosting starting
2022-12-01 20:05:09.830 +01:00 [INF] Now listening on: http://[::]:5011
2022-12-01 20:05:09.831 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-12-01 20:05:09.832 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-12-01 20:05:09.833 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-12-01 20:05:09.834 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-12-01 20:05:09.834 +01:00 [INF] Hosting environment: Development
2022-12-01 20:05:09.835 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-12-01 20:05:09.837 +01:00 [DBG] Hosting started
2022-12-01 20:05:12.110 +01:00 [DBG] Connection id "0HMMJPRSGFI0G" accepted.
2022-12-01 20:05:12.112 +01:00 [DBG] Connection id "0HMMJPRSGFI0G" started.
2022-12-01 20:05:12.142 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51
2022-12-01 20:05:12.149 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-12-01 20:05:12.167 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-12-01 20:05:12.169 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-12-01 20:05:12.170 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:05:12.180 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:05:12.183 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:05:12.194 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-12-01 20:05:12.197 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:05:12.198 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:05:12.199 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:05:12.201 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:05:12.202 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:05:12.211 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 20:05:12.212 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 20:05:12.226 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 20:05:12.229 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-12-01 20:05:12.230 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 20:05:12.247 +01:00 [DBG] Connection id "0HMMJPRSGFI0G", Request id "0HMMJPRSGFI0G:00000001": started reading request body.
2022-12-01 20:05:12.248 +01:00 [DBG] Connection id "0HMMJPRSGFI0G", Request id "0HMMJPRSGFI0G:00000001": done reading request body.
2022-12-01 20:05:12.253 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-12-01 20:05:12.254 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:05:12.254 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:05:12.255 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 20:05:12.263 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:05:12.309 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:05:12.359 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.RefreshTokens)
    .FirstOrDefault(x => x.Username == __model_Username_0)'
2022-12-01 20:05:12.382 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 20:05:12.534 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Username == @__model_Username_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 20:05:12.558 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:05:12.563 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2022-12-01 20:05:12.575 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:12.578 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:12.579 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:05:12.589 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:05:12.607 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.632 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.646 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.648 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.649 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.656 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.657 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.658 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.659 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.660 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.661 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.662 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.663 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.665 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.666 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.668 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.669 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.670 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.672 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.673 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.676 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.677 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.678 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.679 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.688 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.689 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.690 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.691 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.692 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.693 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.695 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.696 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.697 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.698 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.699 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.700 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.702 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.703 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.704 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.705 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:12.708 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:05:12.716 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:12.717 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:13.179 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:13.182 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 20:05:13.184 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:05:13.193 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:13.210 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:13.215 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:13.221 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:05:13.228 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:13.231 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:13.232 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 20:05:13.247 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 20:05:13.275 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-12-01 20:05:13.283 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:05:13.284 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:05:13.285 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:05:13.293 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:05:13.309 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-12-01 20:05:13.312 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:05:13.315 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:05:13.316 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:05:13.317 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 20:05:13.321 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 20:05:13.325 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:05:13.327 +01:00 [DBG] Committing transaction.
2022-12-01 20:05:13.373 +01:00 [DBG] Committed transaction.
2022-12-01 20:05:13.376 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:13.377 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:13.379 +01:00 [DBG] Disposing transaction.
2022-12-01 20:05:13.381 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:13.383 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:13.385 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-12-01 20:05:13.395 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 20:05:13.398 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 20:05:13.398 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-12-01 20:05:13.399 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-12-01 20:05:13.400 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-12-01 20:05:13.401 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-12-01 20:05:13.414 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 1203.0162ms
2022-12-01 20:05:13.415 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:05:13.417 +01:00 [DBG] Connection id "0HMMJPRSGFI0G" completed keep alive response.
2022-12-01 20:05:13.420 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:05:13.423 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51 - 200 - application/json;+charset=utf-8 1281.6818ms
2022-12-01 20:05:15.786 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 40
2022-12-01 20:05:15.788 +01:00 [DBG] 1 candidate(s) found for the request path '/Image'
2022-12-01 20:05:15.789 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Post (smart.api)' with route pattern 'Image' is valid for the request path '/Image'
2022-12-01 20:05:15.790 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:05:15.791 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:05:15.815 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:05:15.817 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __tokenUserId_Value_0)'
2022-12-01 20:05:15.819 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 20:05:15.826 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__tokenUserId_Value_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 20:05:15.829 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:05:15.831 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-12-01 20:05:15.832 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:15.836 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:15.838 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:05:15.842 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:05:15.846 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.848 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.849 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.850 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.851 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.852 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.853 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.854 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.855 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.857 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.858 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.859 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.860 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.861 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.869 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.870 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.871 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.873 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.874 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.876 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.879 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.880 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.882 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.883 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.884 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.885 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.886 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.887 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.888 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.889 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.890 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.892 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.899 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.900 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.901 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.902 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.903 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.904 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.905 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.906 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.908 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:15.911 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:05:15.911 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:15.912 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:15.924 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __id_0)'
2022-12-01 20:05:15.925 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 20:05:15.932 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__id_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 20:05:15.935 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:05:15.935 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:05:15.936 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:15.938 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:15.940 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:05:15.944 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:05:15.946 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:05:15.947 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:15.948 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:15.949 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:05:15.952 +01:00 [INF] Route matched with {action = "Post", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateImageDto) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 20:05:15.953 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:05:15.960 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:05:15.961 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:05:15.963 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:05:15.964 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:05:15.965 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:05:15.967 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:05:15.968 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 20:05:15.968 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' using the name '' in request data ...
2022-12-01 20:05:15.969 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 20:05:15.982 +01:00 [DBG] Connection id "0HMMJPRSGFI0G", Request id "0HMMJPRSGFI0G:00000002": started reading request body.
2022-12-01 20:05:15.983 +01:00 [DBG] Connection id "0HMMJPRSGFI0G", Request id "0HMMJPRSGFI0G:00000002": done reading request body.
2022-12-01 20:05:15.986 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.CreateImageDto'
2022-12-01 20:05:15.987 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:05:15.988 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:05:15.989 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 20:05:15.992 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:05:20.943 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.Image'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:20.956 +01:00 [DBG] Context 'SmartContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:20.958 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 20:05:20.958 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:05:20.962 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:05:20.963 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:20.965 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:20.966 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 20:05:20.969 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 20:05:20.970 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:05:20.971 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:05:20.973 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = -1) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`Data`, `Title`, `Type`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:05:20.991 +01:00 [ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (Size = -1) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`Data`, `Title`, `Type`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:05:21.005 +01:00 [DBG] Disposing transaction.
2022-12-01 20:05:21.005 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:21.006 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:21.051 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'smart.database.SmartContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Table 'smart_home.Images' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 954
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 44
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 127
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 456
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 330
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 323
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Table 'smart_home.Images' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 954
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 44
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 127
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 456
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 330
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 323
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-12-01 20:05:21.095 +01:00 [INF] Executed action smart.api.Controllers.ImageController.Post (smart.api) in 5130.5331ms
2022-12-01 20:05:21.097 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:05:21.156 +01:00 [DBG] Connection id "0HMMJPRSGFI0G" completed keep alive response.
2022-12-01 20:05:21.157 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:05:21.158 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 40 - 500 - application/json 5371.8207ms
2022-12-01 20:05:33.887 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 40
2022-12-01 20:05:33.887 +01:00 [DBG] 1 candidate(s) found for the request path '/Image'
2022-12-01 20:05:33.888 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Post (smart.api)' with route pattern 'Image' is valid for the request path '/Image'
2022-12-01 20:05:33.889 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:05:33.891 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:05:33.892 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:05:33.895 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:05:33.896 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:05:33.897 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:33.899 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:33.900 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:05:33.911 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:05:33.914 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.915 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.917 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.918 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.919 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.920 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.921 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.923 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.924 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.925 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.926 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.927 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.928 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.929 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.930 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.931 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.935 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.936 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.937 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.938 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.939 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.940 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.941 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.942 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.943 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.945 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.946 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.947 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.949 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.950 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.951 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.953 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.954 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.955 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.956 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.957 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.958 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.959 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.960 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.961 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.970 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:33.971 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:05:33.971 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:33.972 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:33.974 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:05:33.974 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:05:33.975 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:33.977 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:33.979 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:05:33.983 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:05:33.985 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:05:33.986 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:33.987 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:33.988 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:05:33.989 +01:00 [INF] Route matched with {action = "Post", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateImageDto) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 20:05:33.990 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:05:33.991 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:05:34.000 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:05:34.001 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:05:34.002 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:05:34.004 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:05:34.005 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:05:34.006 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 20:05:34.007 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' using the name '' in request data ...
2022-12-01 20:05:34.015 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 20:05:34.016 +01:00 [DBG] Connection id "0HMMJPRSGFI0G", Request id "0HMMJPRSGFI0G:00000003": started reading request body.
2022-12-01 20:05:34.017 +01:00 [DBG] Connection id "0HMMJPRSGFI0G", Request id "0HMMJPRSGFI0G:00000003": done reading request body.
2022-12-01 20:05:34.018 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.CreateImageDto'
2022-12-01 20:05:34.019 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:05:34.020 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:05:34.021 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 20:05:34.022 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:05:47.302 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.Image'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:47.304 +01:00 [DBG] Context 'SmartContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:05:47.856 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 20:05:47.857 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:05:47.858 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:05:47.859 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:47.860 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:47.876 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 20:05:47.878 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 20:05:47.879 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:05:47.879 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:05:47.880 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = -1) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`Data`, `Title`, `Type`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:05:47.893 +01:00 [ERR] Failed executing DbCommand (14ms) [Parameters=[@p0='?' (Size = -1) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`Data`, `Title`, `Type`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:05:47.895 +01:00 [DBG] Disposing transaction.
2022-12-01 20:05:47.896 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:47.897 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:05:47.906 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'smart.database.SmartContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Table 'smart_home.Images' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 954
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 44
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 127
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 456
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 330
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 323
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Table 'smart_home.Images' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 954
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 44
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 127
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 456
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 330
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 323
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-12-01 20:05:47.993 +01:00 [INF] Executed action smart.api.Controllers.ImageController.Post (smart.api) in 13989.2505ms
2022-12-01 20:05:47.994 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:05:48.058 +01:00 [DBG] Connection id "0HMMJPRSGFI0G" completed keep alive response.
2022-12-01 20:05:48.058 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:05:48.059 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 40 - 500 - application/json 14172.8012ms
2022-12-01 20:07:33.747 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-12-01 20:07:34.057 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:07:34.059 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:07:34.126 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:07:34.127 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:07:34.128 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:07:34.129 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:07:34.130 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:07:34.132 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:07:34.266 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:07:34.289 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.296 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-12-01 20:07:34.374 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-12-01 20:07:34.422 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-12-01 20:07:34.426 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2022-12-01 20:07:34.427 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.433 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.438 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:07:34.448 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:07:34.456 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.459 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.461 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-12-01 20:07:34.463 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-12-01 20:07:34.466 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-12-01 20:07:34.468 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2022-12-01 20:07:34.468 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.472 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.473 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:07:34.476 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:07:34.479 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.487 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.508 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:07:34.509 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-12-01 20:07:34.517 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.518 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.520 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-12-01 20:07:34.523 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-12-01 20:07:34.526 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:07:34.527 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.528 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:34.534 +01:00 [INF] No migrations were applied. The database is already up to date.
2022-12-01 20:07:34.550 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:07:34.594 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-12-01 20:07:34.664 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-12-01 20:07:34.692 +01:00 [DBG] Hosting starting
2022-12-01 20:07:34.770 +01:00 [INF] Now listening on: http://[::]:5011
2022-12-01 20:07:34.771 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-12-01 20:07:34.772 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-12-01 20:07:34.772 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-12-01 20:07:34.776 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-12-01 20:07:34.781 +01:00 [INF] Hosting environment: Development
2022-12-01 20:07:34.782 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-12-01 20:07:34.785 +01:00 [DBG] Hosting started
2022-12-01 20:07:40.369 +01:00 [DBG] Connection id "0HMMJPT8MCHS5" accepted.
2022-12-01 20:07:40.371 +01:00 [DBG] Connection id "0HMMJPT8MCHS5" started.
2022-12-01 20:07:40.400 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51
2022-12-01 20:07:40.409 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-12-01 20:07:40.427 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-12-01 20:07:40.430 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-12-01 20:07:40.431 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:07:40.441 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:07:40.444 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:07:40.460 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-12-01 20:07:40.468 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:07:40.470 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:07:40.471 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:07:40.473 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:07:40.474 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:07:40.477 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 20:07:40.478 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 20:07:40.487 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 20:07:40.489 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-12-01 20:07:40.491 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 20:07:40.507 +01:00 [DBG] Connection id "0HMMJPT8MCHS5", Request id "0HMMJPT8MCHS5:00000001": started reading request body.
2022-12-01 20:07:40.508 +01:00 [DBG] Connection id "0HMMJPT8MCHS5", Request id "0HMMJPT8MCHS5:00000001": done reading request body.
2022-12-01 20:07:40.514 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-12-01 20:07:40.515 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:07:40.515 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:07:40.516 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 20:07:40.523 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:07:40.572 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:07:40.610 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.RefreshTokens)
    .FirstOrDefault(x => x.Username == __model_Username_0)'
2022-12-01 20:07:40.637 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 20:07:40.781 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Username == @__model_Username_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 20:07:40.810 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:07:40.811 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:07:40.828 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:40.831 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:40.833 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:07:40.846 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:07:40.864 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.889 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.909 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.911 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.912 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.913 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.914 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.915 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.917 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.918 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.919 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.920 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.922 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.924 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.925 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.926 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.928 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.930 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.931 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.932 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.933 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.934 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.935 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.937 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.938 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.940 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.942 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.943 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.944 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.945 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.946 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.947 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.948 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.950 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.951 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.952 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.953 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.961 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.962 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.963 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.965 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:40.968 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:07:40.975 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:40.976 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:41.416 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:41.419 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 20:07:41.421 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:07:41.431 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:41.443 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:41.453 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:41.458 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:07:41.473 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:41.476 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:41.478 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 20:07:41.488 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 20:07:41.511 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-12-01 20:07:41.520 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:07:41.521 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:07:41.522 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:07:41.528 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:07:41.537 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-12-01 20:07:41.544 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:07:41.549 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:07:41.550 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:07:41.551 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 20:07:41.553 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 20:07:41.559 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:07:41.561 +01:00 [DBG] Committing transaction.
2022-12-01 20:07:41.590 +01:00 [DBG] Committed transaction.
2022-12-01 20:07:41.592 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:41.593 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:41.596 +01:00 [DBG] Disposing transaction.
2022-12-01 20:07:41.598 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:41.600 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:41.608 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-12-01 20:07:41.612 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 20:07:41.614 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 20:07:41.615 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-12-01 20:07:41.617 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-12-01 20:07:41.618 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-12-01 20:07:41.619 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-12-01 20:07:41.638 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 1161.5679ms
2022-12-01 20:07:41.640 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:07:41.642 +01:00 [DBG] Connection id "0HMMJPT8MCHS5" completed keep alive response.
2022-12-01 20:07:41.644 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:07:41.647 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51 - 200 - application/json;+charset=utf-8 1247.2665ms
2022-12-01 20:07:45.302 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 40
2022-12-01 20:07:45.304 +01:00 [DBG] 1 candidate(s) found for the request path '/Image'
2022-12-01 20:07:45.304 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Post (smart.api)' with route pattern 'Image' is valid for the request path '/Image'
2022-12-01 20:07:45.305 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:07:45.307 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:07:45.325 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:07:45.327 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __tokenUserId_Value_0)'
2022-12-01 20:07:45.334 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 20:07:45.341 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__tokenUserId_Value_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 20:07:45.346 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:07:45.347 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:07:45.347 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:45.353 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:45.354 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:07:45.358 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:07:45.368 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.369 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.370 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.371 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.372 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.373 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.374 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.375 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.377 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.378 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.379 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.380 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.381 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.382 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.384 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.385 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.386 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.387 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.388 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.389 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.390 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.393 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.394 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.395 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.396 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.397 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.398 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.399 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.400 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.401 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.402 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.403 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.404 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.405 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.413 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.414 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.415 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.416 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.417 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.418 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.419 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.420 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:45.423 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:07:45.424 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:45.424 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:45.444 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __id_0)'
2022-12-01 20:07:45.445 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 20:07:45.451 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__id_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 20:07:45.455 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:07:45.455 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:07:45.456 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:45.458 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:45.459 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:07:45.462 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:07:45.464 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:07:45.465 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:45.465 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:45.466 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:07:45.470 +01:00 [INF] Route matched with {action = "Post", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateImageDto) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 20:07:45.472 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:07:45.473 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:07:45.475 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:07:45.477 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:07:45.478 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:07:45.480 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:07:45.481 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:07:45.482 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 20:07:45.483 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' using the name '' in request data ...
2022-12-01 20:07:45.490 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 20:07:45.498 +01:00 [DBG] Connection id "0HMMJPT8MCHS5", Request id "0HMMJPT8MCHS5:00000002": started reading request body.
2022-12-01 20:07:45.498 +01:00 [DBG] Connection id "0HMMJPT8MCHS5", Request id "0HMMJPT8MCHS5:00000002": done reading request body.
2022-12-01 20:07:45.501 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.CreateImageDto'
2022-12-01 20:07:45.502 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:07:45.503 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:07:45.504 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 20:07:45.507 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:07:48.352 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.Image'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:48.360 +01:00 [DBG] Context 'SmartContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:07:48.362 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 20:07:48.362 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:07:48.366 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:07:48.366 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:48.368 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:48.369 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 20:07:48.371 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 20:07:48.372 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:07:48.373 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:07:48.375 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = -1) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`Data`, `Title`, `Type`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:07:48.399 +01:00 [ERR] Failed executing DbCommand (26ms) [Parameters=[@p0='?' (Size = -1) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`Data`, `Title`, `Type`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:07:48.406 +01:00 [DBG] Disposing transaction.
2022-12-01 20:07:48.407 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:48.408 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:07:48.439 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'smart.database.SmartContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Table 'smart_home.Images' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 954
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 44
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 127
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 456
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 330
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 323
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Table 'smart_home.Images' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsyncAwaited(ValueTask`1 task) in /_/src/MySqlConnector/Core/ServerSession.cs:line 954
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 44
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 127
   at MySqlConnector.MySqlDataReader.CreateAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 456
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(IReadOnlyList`1 commands, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 330
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 323
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-12-01 20:08:56.530 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-12-01 20:08:56.752 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:08:56.753 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:08:56.803 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:08:56.803 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:08:56.803 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:08:56.803 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:08:56.803 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:08:56.803 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:08:56.888 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:08:56.904 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:09:12.661 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-12-01 20:09:12.883 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:09:12.884 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:09:12.940 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:12.940 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:12.940 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:12.940 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:12.940 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:12.940 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:13.019 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:09:13.039 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:09:13.039 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:09:13.043 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:13.043 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:13.043 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:13.043 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:13.043 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:13.043 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:13.132 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:09:13.134 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:09:13.134 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:09:13.134 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:09:13.139 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:09:13.139 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:09:13.139 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:09:13.139 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:09:13.189 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:09:30.681 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-12-01 20:09:31.012 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:09:31.015 +01:00 [DBG] The [Required] attribute on 'User.RefreshTokens' was ignored because it is a collection. The [Required] attribute should only be specified on reference navigations pointing to the principal side of the relationship.
2022-12-01 20:09:31.081 +01:00 [DBG] The property 'HomeElement.ElementHandlerId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:31.082 +01:00 [DBG] The property 'PlanDefinition.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:31.083 +01:00 [DBG] The property 'PlanElement.ElementId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:31.084 +01:00 [DBG] The property 'PlanElement.ImageId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:31.085 +01:00 [DBG] The property 'PlanElement.PlanId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:31.085 +01:00 [DBG] The property 'RefreshToken.UserId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-12-01 20:09:31.216 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:09:31.236 +01:00 [DBG] Migrating using database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.243 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-12-01 20:09:31.331 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-12-01 20:09:31.374 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-12-01 20:09:31.378 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2022-12-01 20:09:31.380 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.386 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.391 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:09:31.401 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:09:31.403 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.406 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.407 +01:00 [DBG] Opening connection to database '' on server '192.168.8.176'.
2022-12-01 20:09:31.409 +01:00 [DBG] Opened connection to database '' on server '192.168.8.176'.
2022-12-01 20:09:31.411 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2022-12-01 20:09:31.411 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2022-12-01 20:09:31.412 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.415 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.416 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:09:31.425 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='smart_home' AND TABLE_NAME='__EFMigrationsHistory';
2022-12-01 20:09:31.427 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.428 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.455 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:09:31.456 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:09:31.457 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.459 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.459 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-12-01 20:09:31.464 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2022-12-01 20:09:31.467 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:09:31.468 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.469 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.476 +01:00 [INF] Applying migration '20221201190913_ImageData'.
2022-12-01 20:09:31.534 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.536 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:31.537 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 20:09:31.546 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 20:09:31.547 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2022-12-01 20:09:31.548 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2022-12-01 20:09:31.549 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Images` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Title` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Type` int NOT NULL,
    `Data` longblob NOT NULL,
    CONSTRAINT `PK_Images` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2022-12-01 20:09:31.670 +01:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Images` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Title` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Type` int NOT NULL,
    `Data` longblob NOT NULL,
    CONSTRAINT `PK_Images` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2022-12-01 20:09:31.671 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2022-12-01 20:09:31.672 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2022-12-01 20:09:31.673 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Plans` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Title` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ImageId` int NOT NULL,
    CONSTRAINT `PK_Plans` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Plans_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2022-12-01 20:09:31.768 +01:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Plans` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Title` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ImageId` int NOT NULL,
    CONSTRAINT `PK_Plans` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Plans_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2022-12-01 20:09:31.770 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2022-12-01 20:09:31.771 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2022-12-01 20:09:31.772 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PlanElements` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `X` int NOT NULL,
    `Y` int NOT NULL,
    `Size` int NOT NULL,
    `ElementId` int NOT NULL,
    `PlanId` int NOT NULL,
    `ImageId` int NOT NULL,
    CONSTRAINT `PK_PlanElements` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_PlanElements_Elements_ElementId` FOREIGN KEY (`ElementId`) REFERENCES `Elements` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_PlanElements_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_PlanElements_Plans_PlanId` FOREIGN KEY (`PlanId`) REFERENCES `Plans` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2022-12-01 20:09:31.870 +01:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PlanElements` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `X` int NOT NULL,
    `Y` int NOT NULL,
    `Size` int NOT NULL,
    `ElementId` int NOT NULL,
    `PlanId` int NOT NULL,
    `ImageId` int NOT NULL,
    CONSTRAINT `PK_PlanElements` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_PlanElements_Elements_ElementId` FOREIGN KEY (`ElementId`) REFERENCES `Elements` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_PlanElements_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_PlanElements_Plans_PlanId` FOREIGN KEY (`PlanId`) REFERENCES `Plans` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2022-12-01 20:09:31.873 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2022-12-01 20:09:31.874 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2022-12-01 20:09:31.874 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PlanElements_ElementId` ON `PlanElements` (`ElementId`);
2022-12-01 20:09:32.009 +01:00 [INF] Executed DbCommand (135ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PlanElements_ElementId` ON `PlanElements` (`ElementId`);
2022-12-01 20:09:32.011 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2022-12-01 20:09:32.012 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2022-12-01 20:09:32.012 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PlanElements_ImageId` ON `PlanElements` (`ImageId`);
2022-12-01 20:09:32.109 +01:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PlanElements_ImageId` ON `PlanElements` (`ImageId`);
2022-12-01 20:09:32.111 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2022-12-01 20:09:32.112 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2022-12-01 20:09:32.113 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PlanElements_PlanId` ON `PlanElements` (`PlanId`);
2022-12-01 20:09:32.199 +01:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PlanElements_PlanId` ON `PlanElements` (`PlanId`);
2022-12-01 20:09:32.200 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2022-12-01 20:09:32.201 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2022-12-01 20:09:32.202 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Plans_ImageId` ON `Plans` (`ImageId`);
2022-12-01 20:09:32.319 +01:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Plans_ImageId` ON `Plans` (`ImageId`);
2022-12-01 20:09:32.321 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2022-12-01 20:09:32.322 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2022-12-01 20:09:32.322 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20221201190913_ImageData', '6.0.5');
2022-12-01 20:09:32.387 +01:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20221201190913_ImageData', '6.0.5');
2022-12-01 20:09:32.390 +01:00 [DBG] Committing transaction.
2022-12-01 20:09:32.392 +01:00 [DBG] Committed transaction.
2022-12-01 20:09:32.394 +01:00 [DBG] Disposing transaction.
2022-12-01 20:09:32.394 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:32.395 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:32.413 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:09:32.458 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-12-01 20:09:32.507 +01:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2022-12-01 20:09:32.527 +01:00 [DBG] Hosting starting
2022-12-01 20:09:32.588 +01:00 [INF] Now listening on: http://[::]:5011
2022-12-01 20:09:32.588 +01:00 [DBG] Loaded hosting startup assembly smart.api
2022-12-01 20:09:32.589 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-12-01 20:09:32.590 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-12-01 20:09:32.590 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-12-01 20:09:32.596 +01:00 [INF] Hosting environment: Development
2022-12-01 20:09:32.597 +01:00 [INF] Content root path: E:\Gewerbe\Pollerspöck\smart home\source\smart.api
2022-12-01 20:09:32.599 +01:00 [DBG] Hosting started
2022-12-01 20:09:45.290 +01:00 [DBG] Connection id "0HMMJPUDTN644" accepted.
2022-12-01 20:09:45.291 +01:00 [DBG] Connection id "0HMMJPUDTN644" started.
2022-12-01 20:09:45.319 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51
2022-12-01 20:09:45.327 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-12-01 20:09:45.345 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-12-01 20:09:45.347 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-12-01 20:09:45.349 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:09:45.364 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:09:45.367 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:09:45.379 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-12-01 20:09:45.381 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:09:45.383 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:09:45.384 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:09:45.385 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:09:45.386 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:09:45.395 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 20:09:45.396 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 20:09:45.404 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 20:09:45.406 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-12-01 20:09:45.409 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 20:09:45.424 +01:00 [DBG] Connection id "0HMMJPUDTN644", Request id "0HMMJPUDTN644:00000001": started reading request body.
2022-12-01 20:09:45.425 +01:00 [DBG] Connection id "0HMMJPUDTN644", Request id "0HMMJPUDTN644:00000001": done reading request body.
2022-12-01 20:09:45.429 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-12-01 20:09:45.430 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:09:45.430 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:09:45.431 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 20:09:45.444 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:09:45.490 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:09:45.536 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.RefreshTokens)
    .FirstOrDefault(x => x.Username == __model_Username_0)'
2022-12-01 20:09:45.564 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 20:09:45.711 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Username == @__model_Username_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 20:09:45.730 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:09:45.731 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:09:45.742 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:45.744 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:45.746 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:09:45.757 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:09:45.779 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.804 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.819 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.821 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.822 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.823 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.824 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.825 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.826 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.827 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.828 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.829 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.831 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.832 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.833 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.834 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.838 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.839 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.840 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.841 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.842 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.843 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.844 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.845 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.846 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.847 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.848 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.849 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.857 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.858 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.859 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.860 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.861 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.862 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.864 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.865 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.872 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.873 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.874 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.876 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.877 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.878 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:45.880 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:09:45.883 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:45.883 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:46.325 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:46.329 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 20:09:46.331 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:09:46.340 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:46.352 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:46.356 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:46.367 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:09:46.380 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:46.383 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:46.384 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 20:09:46.394 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 20:09:46.415 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-12-01 20:09:46.423 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:09:46.424 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:09:46.426 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:09:46.431 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:09:46.446 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-12-01 20:09:46.450 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:09:46.453 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:09:46.454 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:09:46.455 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 20:09:46.458 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 20:09:46.461 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:09:46.462 +01:00 [DBG] Committing transaction.
2022-12-01 20:09:46.498 +01:00 [DBG] Committed transaction.
2022-12-01 20:09:46.500 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:46.501 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:46.502 +01:00 [DBG] Disposing transaction.
2022-12-01 20:09:46.505 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:46.506 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:46.509 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-12-01 20:09:46.513 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 20:09:46.515 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 20:09:46.516 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-12-01 20:09:46.516 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-12-01 20:09:46.517 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-12-01 20:09:46.518 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-12-01 20:09:46.537 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 1141.4185ms
2022-12-01 20:09:46.538 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:09:46.541 +01:00 [DBG] Connection id "0HMMJPUDTN644" completed keep alive response.
2022-12-01 20:09:46.543 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:09:46.546 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51 - 200 - application/json;+charset=utf-8 1227.9374ms
2022-12-01 20:09:56.361 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51
2022-12-01 20:09:56.363 +01:00 [DBG] 1 candidate(s) found for the request path '/Auth/authenticate'
2022-12-01 20:09:56.364 +01:00 [DBG] Endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)' with route pattern 'Auth/authenticate' is valid for the request path '/Auth/authenticate'
2022-12-01 20:09:56.365 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:09:56.367 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:09:56.368 +01:00 [INF] Executing endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:09:56.369 +01:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(smart.contract.AuthRequestDto) on controller smart.api.Controllers.AuthController (smart.api).
2022-12-01 20:09:56.371 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:09:56.372 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:09:56.373 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:09:56.375 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:09:56.376 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:09:56.377 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 20:09:56.378 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.AuthController (smart.api)
2022-12-01 20:09:56.379 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 20:09:56.380 +01:00 [DBG] Attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto' using the name '' in request data ...
2022-12-01 20:09:56.381 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 20:09:56.382 +01:00 [DBG] Connection id "0HMMJPUDTN644", Request id "0HMMJPUDTN644:00000002": started reading request body.
2022-12-01 20:09:56.383 +01:00 [DBG] Connection id "0HMMJPUDTN644", Request id "0HMMJPUDTN644:00000002": done reading request body.
2022-12-01 20:09:56.386 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.AuthRequestDto'
2022-12-01 20:09:56.386 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:09:56.387 +01:00 [DBG] Done attempting to bind parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:09:56.388 +01:00 [DBG] Attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto' ...
2022-12-01 20:09:56.389 +01:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'smart.contract.AuthRequestDto'.
2022-12-01 20:09:56.390 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:09:56.393 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:09:56.394 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:09:56.395 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:56.405 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:56.406 +01:00 [DBG] Executing DbCommand [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:09:56.410 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_Username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Username` = @__model_Username_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:09:56.413 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.414 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.417 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.418 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.419 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.420 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.421 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.422 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.423 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.424 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.425 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.426 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.427 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.428 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.429 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.438 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.439 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.440 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.442 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.443 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.445 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.448 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.449 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.450 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.451 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.452 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.453 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.454 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.455 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.456 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.458 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.459 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.460 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.461 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.464 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.465 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.466 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.468 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.469 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.470 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.471 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.472 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.473 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.475 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:09:56.476 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:56.477 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:56.587 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.589 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 20:09:56.590 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:09:56.590 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.RefreshTokens'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.592 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.RefreshToken'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.593 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.594 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:09:56.595 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:56.596 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:56.597 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 20:09:56.599 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 20:09:56.600 +01:00 [DBG] Executing update commands individually as the number of batchable commands (2) is smaller than the minimum batch size (4).
2022-12-01 20:09:56.602 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:09:56.602 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:09:56.603 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:09:56.606 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `RefreshToken` (`Created`, `CreatedByIp`, `Expires`, `ReasonRevoked`, `ReplacedByToken`, `Revoked`, `RevokedByIp`, `Token`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT `Id`
FROM `RefreshToken`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:09:56.609 +01:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-12-01 20:09:56.610 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:09:56.610 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:09:56.611 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:09:56.611 +01:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 20:09:56.614 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Users` SET `IsAdmin` = @p0, `Locked` = @p1, `PasswordHash` = @p2, `Username` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();
2022-12-01 20:09:56.616 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:09:56.623 +01:00 [DBG] Committing transaction.
2022-12-01 20:09:56.667 +01:00 [DBG] Committed transaction.
2022-12-01 20:09:56.667 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:56.668 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:09:56.669 +01:00 [DBG] Disposing transaction.
2022-12-01 20:09:56.670 +01:00 [DBG] An entity of type 'RefreshToken' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.671 +01:00 [DBG] An entity of type 'User' tracked by 'SmartContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:09:56.673 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 2 entities written to the database.
2022-12-01 20:09:56.674 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 20:09:56.675 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 20:09:56.676 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-12-01 20:09:56.677 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-12-01 20:09:56.677 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-12-01 20:09:56.685 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.AuthResponseDto'.
2022-12-01 20:09:56.686 +01:00 [INF] Executed action smart.api.Controllers.AuthController.Authenticate (smart.api) in 308.8328ms
2022-12-01 20:09:56.686 +01:00 [INF] Executed endpoint 'smart.api.Controllers.AuthController.Authenticate (smart.api)'
2022-12-01 20:09:56.688 +01:00 [DBG] Connection id "0HMMJPUDTN644" completed keep alive response.
2022-12-01 20:09:56.688 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:09:56.689 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Auth/authenticate application/json;+charset=utf-8 51 - 200 - application/json;+charset=utf-8 327.6056ms
2022-12-01 20:10:01.976 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 40
2022-12-01 20:10:01.977 +01:00 [DBG] 1 candidate(s) found for the request path '/Image'
2022-12-01 20:10:01.978 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Post (smart.api)' with route pattern 'Image' is valid for the request path '/Image'
2022-12-01 20:10:01.979 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:10:01.980 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:10:02.002 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:10:02.005 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __tokenUserId_Value_0)'
2022-12-01 20:10:02.006 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 20:10:02.014 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__tokenUserId_Value_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 20:10:02.018 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:10:02.018 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:10:02.019 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:02.027 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:02.028 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:10:02.032 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:10:02.034 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.036 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.037 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.039 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.040 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.041 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.042 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.044 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.045 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.046 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.047 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.048 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.049 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.050 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.057 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.059 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.060 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.061 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.062 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.063 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.064 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.065 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.066 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.068 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.069 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.070 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.071 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.073 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.074 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.075 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.076 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.077 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.078 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.079 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.080 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.081 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.084 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.085 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.086 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.087 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.088 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.089 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.090 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.091 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:02.093 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:10:02.093 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:02.095 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:02.107 +01:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.Id == __id_0)'
2022-12-01 20:10:02.109 +01:00 [DBG] Including navigation: 'User.RefreshTokens'.
2022-12-01 20:10:02.119 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsAdmin (bool) Required, 1], [Property: User.Locked (bool) Required, 2], [Property: User.PasswordHash (string), 3], [Property: User.Username (string) Required, 4] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 5], [Property: RefreshToken.Created (DateTime) Required, 6], [Property: RefreshToken.CreatedByIp (string) Required, 7], [Property: RefreshToken.Expires (DateTime) Required, 8], [Property: RefreshToken.ReasonRevoked (string), 9], [Property: RefreshToken.ReplacedByToken (string), 10], [Property: RefreshToken.Revoked (DateTime?), 11], [Property: RefreshToken.RevokedByIp (string), 12], [Property: RefreshToken.Token (string) Required, 13], [Property: RefreshToken.UserId (no field, int) Shadow Required FK Index, 14] }
                3 -> 5
            SELECT t.Id, t.IsAdmin, t.Locked, t.PasswordHash, t.Username, r.Id, r.Created, r.CreatedByIp, r.Expires, r.ReasonRevoked, r.ReplacedByToken, r.Revoked, r.RevokedByIp, r.Token, r.UserId
            FROM 
            (
                SELECT TOP(1) u.Id, u.IsAdmin, u.Locked, u.PasswordHash, u.Username
                FROM Users AS u
                WHERE u.Id == @__id_0
            ) AS t
            LEFT JOIN RefreshToken AS r ON t.Id == r.UserId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 20:10:02.123 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:10:02.123 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:10:02.124 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:02.126 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:02.127 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:10:02.132 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:10:02.134 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:10:02.135 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:02.136 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:02.137 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:10:02.141 +01:00 [INF] Route matched with {action = "Post", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(smart.contract.CreateImageDto) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 20:10:02.142 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:10:02.150 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:10:02.150 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:10:02.152 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:10:02.153 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:10:02.154 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:10:02.155 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:10:02.156 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 20:10:02.157 +01:00 [DBG] Attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto' using the name '' in request data ...
2022-12-01 20:10:02.158 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json; charset=utf-8'.
2022-12-01 20:10:02.164 +01:00 [DBG] Connection id "0HMMJPUDTN644", Request id "0HMMJPUDTN644:00000003": started reading request body.
2022-12-01 20:10:02.165 +01:00 [DBG] Connection id "0HMMJPUDTN644", Request id "0HMMJPUDTN644:00000003": done reading request body.
2022-12-01 20:10:02.168 +01:00 [DBG] JSON input formatter succeeded, deserializing to type 'smart.contract.CreateImageDto'
2022-12-01 20:10:02.169 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:10:02.170 +01:00 [DBG] Done attempting to bind parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:10:02.171 +01:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto' ...
2022-12-01 20:10:02.174 +01:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'smart.contract.CreateImageDto'.
2022-12-01 20:10:04.803 +01:00 [DBG] 'SmartContext' generated a temporary value for the property 'Id.Image'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:04.812 +01:00 [DBG] Context 'SmartContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:04.813 +01:00 [DBG] SaveChanges starting for 'SmartContext'.
2022-12-01 20:10:04.814 +01:00 [DBG] DetectChanges starting for 'SmartContext'.
2022-12-01 20:10:04.823 +01:00 [DBG] DetectChanges completed for 'SmartContext'.
2022-12-01 20:10:04.823 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:04.825 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:04.826 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-12-01 20:10:04.828 +01:00 [DBG] Began transaction with isolation level 'Unspecified'.
2022-12-01 20:10:04.829 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:10:04.830 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:10:04.833 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = -1) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`Data`, `Title`, `Type`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:10:04.918 +01:00 [INF] Executed DbCommand (85ms) [Parameters=[@p0='?' (Size = -1) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`Data`, `Title`, `Type`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2022-12-01 20:10:04.921 +01:00 [DBG] The foreign key property 'Image.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-12-01 20:10:04.922 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:10:04.923 +01:00 [DBG] Committing transaction.
2022-12-01 20:10:04.936 +01:00 [DBG] Committed transaction.
2022-12-01 20:10:04.937 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:04.938 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:10:04.940 +01:00 [DBG] Disposing transaction.
2022-12-01 20:10:04.942 +01:00 [DBG] An entity of type 'Image' tracked by 'SmartContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:10:04.943 +01:00 [DBG] SaveChanges completed for 'SmartContext' with 1 entities written to the database.
2022-12-01 20:10:04.944 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 20:10:04.946 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 20:10:04.946 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-12-01 20:10:04.947 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-12-01 20:10:04.948 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-12-01 20:10:04.949 +01:00 [INF] Executing OkObjectResult, writing value of type 'smart.contract.ImageInfoDto'.
2022-12-01 20:10:04.960 +01:00 [INF] Executed action smart.api.Controllers.ImageController.Post (smart.api) in 2805.4886ms
2022-12-01 20:10:04.960 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ImageController.Post (smart.api)'
2022-12-01 20:10:04.961 +01:00 [DBG] Connection id "0HMMJPUDTN644" completed keep alive response.
2022-12-01 20:10:04.962 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:10:04.963 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5011/Image application/json;+charset=utf-8 40 - 200 - application/json;+charset=utf-8 2986.9573ms
2022-12-01 20:12:26.318 +01:00 [DBG] Connection id "0HMMJPUDTN644" received FIN.
2022-12-01 20:12:26.320 +01:00 [DBG] Connection id "0HMMJPUDTN645" accepted.
2022-12-01 20:12:26.323 +01:00 [DBG] Connection id "0HMMJPUDTN644" disconnecting.
2022-12-01 20:12:26.326 +01:00 [DBG] Connection id "0HMMJPUDTN645" started.
2022-12-01 20:12:26.326 +01:00 [DBG] Connection id "0HMMJPUDTN644" sending FIN because: "The client closed the connection."
2022-12-01 20:12:26.328 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/Image/id/1 application/json;+charset=utf-8 40
2022-12-01 20:12:26.330 +01:00 [DBG] 1 candidate(s) found for the request path '/Image/id/1'
2022-12-01 20:12:26.331 +01:00 [DBG] Connection id "0HMMJPUDTN644" stopped.
2022-12-01 20:12:26.331 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Get (smart.api)' with route pattern 'Image/id/{id}' is valid for the request path '/Image/id/1'
2022-12-01 20:12:26.333 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Get (smart.api)'
2022-12-01 20:12:26.335 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:12:26.336 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:12:26.338 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:12:26.338 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:12:26.339 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.341 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.342 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:12:26.349 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:12:26.351 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.353 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.354 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.355 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.356 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.357 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.358 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.360 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.366 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.367 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.368 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.370 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.371 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.372 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.373 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.376 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.377 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.378 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.379 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.380 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.381 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.382 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.383 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.384 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.385 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.386 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.387 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.388 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.389 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.392 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.393 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.395 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.396 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.397 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.398 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.400 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.401 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.402 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.403 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.404 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.406 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.408 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.409 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.410 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.411 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:12:26.412 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.412 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.414 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:12:26.415 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:12:26.415 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.417 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.418 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:12:26.424 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:12:26.428 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:12:26.429 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.429 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.430 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Get (smart.api)'
2022-12-01 20:12:26.440 +01:00 [INF] Route matched with {action = "Get", controller = "Image"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 20:12:26.443 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:12:26.445 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:12:26.446 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:12:26.448 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:12:26.449 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:12:26.452 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:12:26.453 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:12:26.454 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2022-12-01 20:12:26.455 +01:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2022-12-01 20:12:26.456 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2022-12-01 20:12:26.457 +01:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2022-12-01 20:12:26.458 +01:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2022-12-01 20:12:26.459 +01:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2022-12-01 20:12:26.461 +01:00 [DBG] Compiling query expression: 
'DbSet<Image>()
    .FirstOrDefault(i => i.Id == __id_0)'
2022-12-01 20:12:26.466 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Image>(
    asyncEnumerable: new SingleQueryingEnumerable<Image>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Image.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Image.Data (byte[]) Required, 1], [Property: Image.Title (string) Required, 2], [Property: Image.Type (EImageType) Required, 3] }
            SELECT TOP(1) i.Id, i.Data, i.Title, i.Type
            FROM Images AS i
            WHERE i.Id == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Image>, 
        smart.database.SmartContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-12-01 20:12:26.470 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:12:26.471 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:12:26.472 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.474 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.475 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `i`.`Id`, `i`.`Data`, `i`.`Title`, `i`.`Type`
FROM `Images` AS `i`
WHERE `i`.`Id` = @__id_0
LIMIT 1
2022-12-01 20:12:26.481 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `i`.`Id`, `i`.`Data`, `i`.`Title`, `i`.`Type`
FROM `Images` AS `i`
WHERE `i`.`Id` = @__id_0
LIMIT 1
2022-12-01 20:12:26.487 +01:00 [DBG] Context 'SmartContext' started tracking 'Image' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:26.488 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:12:26.489 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.489 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:26.491 +01:00 [INF] Executing FileContentResult, sending file with download name '' ...
2022-12-01 20:12:26.494 +01:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2022-12-01 20:12:26.508 +01:00 [INF] Executed action smart.api.Controllers.ImageController.Get (smart.api) in 55.8129ms
2022-12-01 20:12:26.509 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ImageController.Get (smart.api)'
2022-12-01 20:12:26.510 +01:00 [DBG] Connection id "0HMMJPUDTN645" completed keep alive response.
2022-12-01 20:12:26.510 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:12:26.511 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/Image/id/1 application/json;+charset=utf-8 40 - 200 110923 image/png 183.6562ms
2022-12-01 20:12:26.514 +01:00 [DBG] Connection id "0HMMJPUDTN645", Request id "0HMMJPUDTN645:00000001": started reading request body.
2022-12-01 20:12:26.515 +01:00 [DBG] Connection id "0HMMJPUDTN645", Request id "0HMMJPUDTN645:00000001": done reading request body.
2022-12-01 20:12:52.371 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5011/Image/type/1 application/json;+charset=utf-8 40
2022-12-01 20:12:52.374 +01:00 [DBG] 1 candidate(s) found for the request path '/Image/type/1'
2022-12-01 20:12:52.375 +01:00 [DBG] Endpoint 'smart.api.Controllers.ImageController.Get (smart.api)' with route pattern 'Image/type/{type}' is valid for the request path '/Image/type/1'
2022-12-01 20:12:52.376 +01:00 [DBG] Request matched endpoint 'smart.api.Controllers.ImageController.Get (smart.api)'
2022-12-01 20:12:52.377 +01:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-12-01 20:12:52.378 +01:00 [INF] Entity Framework Core 6.0.5 initialized 'SmartContext' using provider 'Pomelo.EntityFrameworkCore.MySql:6.0.1' with options: ServerVersion 10.6.4-mariadb 
2022-12-01 20:12:52.380 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:12:52.380 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:12:52.381 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.383 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.387 +01:00 [DBG] Executing DbCommand [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:12:52.392 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__tokenUserId_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__tokenUserId_Value_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:12:52.394 +01:00 [DBG] Context 'SmartContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.395 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.396 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.397 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.398 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.399 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.401 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.407 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.408 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.409 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.410 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.411 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.412 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.414 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.415 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.417 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.418 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.419 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.420 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.421 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.422 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.423 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.424 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.425 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.426 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.427 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.428 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.430 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.431 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.438 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.439 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.441 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.442 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.443 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.444 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.445 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.446 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.448 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.449 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.450 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.451 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.452 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.453 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.454 +01:00 [DBG] Context 'SmartContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-12-01 20:12:52.455 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:12:52.456 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.457 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.458 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:12:52.458 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:12:52.459 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.461 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.461 +01:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:12:52.467 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`IsAdmin`, `t`.`Locked`, `t`.`PasswordHash`, `t`.`Username`, `r`.`Id`, `r`.`Created`, `r`.`CreatedByIp`, `r`.`Expires`, `r`.`ReasonRevoked`, `r`.`ReplacedByToken`, `r`.`Revoked`, `r`.`RevokedByIp`, `r`.`Token`, `r`.`UserId`
FROM (
    SELECT `u`.`Id`, `u`.`IsAdmin`, `u`.`Locked`, `u`.`PasswordHash`, `u`.`Username`
    FROM `Users` AS `u`
    WHERE `u`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `RefreshToken` AS `r` ON `t`.`Id` = `r`.`UserId`
ORDER BY `t`.`Id`
2022-12-01 20:12:52.470 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:12:52.470 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.471 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.472 +01:00 [INF] Executing endpoint 'smart.api.Controllers.ImageController.Get (smart.api)'
2022-12-01 20:12:52.474 +01:00 [INF] Route matched with {action = "Get", controller = "Image"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(smart.contract.EImageType) on controller smart.api.Controllers.ImageController (smart.api).
2022-12-01 20:12:52.476 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["bp.net.Auth.Server.Attributes.AuthorizeAttribute"]
2022-12-01 20:12:52.479 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-12-01 20:12:52.480 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-12-01 20:12:52.482 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-12-01 20:12:52.483 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-12-01 20:12:52.484 +01:00 [DBG] Executing controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:12:52.485 +01:00 [DBG] Executed controller factory for controller smart.api.Controllers.ImageController (smart.api)
2022-12-01 20:12:52.486 +01:00 [DBG] Attempting to bind parameter 'type' of type 'smart.contract.EImageType' ...
2022-12-01 20:12:52.487 +01:00 [DBG] Attempting to bind parameter 'type' of type 'smart.contract.EImageType' using the name 'type' in request data ...
2022-12-01 20:12:52.488 +01:00 [DBG] Done attempting to bind parameter 'type' of type 'smart.contract.EImageType'.
2022-12-01 20:12:52.489 +01:00 [DBG] Done attempting to bind parameter 'type' of type 'smart.contract.EImageType'.
2022-12-01 20:12:52.489 +01:00 [DBG] Attempting to validate the bound parameter 'type' of type 'smart.contract.EImageType' ...
2022-12-01 20:12:52.491 +01:00 [DBG] Done attempting to validate the bound parameter 'type' of type 'smart.contract.EImageType'.
2022-12-01 20:12:52.499 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-12-01 20:12:52.502 +01:00 [DBG] No information found on request to perform content negotiation.
2022-12-01 20:12:52.502 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-12-01 20:12:52.503 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-12-01 20:12:52.504 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-12-01 20:12:52.505 +01:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[smart.contract.ImageInfoDto, smart.contract, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-12-01 20:12:52.507 +01:00 [DBG] Compiling query expression: 
'DbSet<Image>()
    .Where(i => (int)i.Type == (int)__type_0)
    .Select(i => new ImageInfoDto(
        i.Id, 
        i.Title, 
        i.Type
    ))'
2022-12-01 20:12:52.511 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ImageInfoDto>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> 0
            1 -> 1
            2 -> 2
        SELECT i.Id, i.Title, i.Type
        FROM Images AS i
        WHERE i.Type == @__type_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ImageInfoDto>, 
    smart.database.SmartContext, 
    False, 
    False, 
    True
)'
2022-12-01 20:12:52.513 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-12-01 20:12:52.514 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-12-01 20:12:52.514 +01:00 [DBG] Opening connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.516 +01:00 [DBG] Opened connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.517 +01:00 [DBG] Executing DbCommand [Parameters=[@__type_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `i`.`Id`, `i`.`Title`, `i`.`Type`
FROM `Images` AS `i`
WHERE `i`.`Type` = @__type_0
2022-12-01 20:12:52.519 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__type_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `i`.`Id`, `i`.`Title`, `i`.`Type`
FROM `Images` AS `i`
WHERE `i`.`Type` = @__type_0
2022-12-01 20:12:52.522 +01:00 [DBG] A data reader was disposed.
2022-12-01 20:12:52.522 +01:00 [DBG] Closing connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.524 +01:00 [DBG] Closed connection to database 'smart_home' on server '192.168.8.176'.
2022-12-01 20:12:52.531 +01:00 [INF] Executed action smart.api.Controllers.ImageController.Get (smart.api) in 47.1187ms
2022-12-01 20:12:52.532 +01:00 [INF] Executed endpoint 'smart.api.Controllers.ImageController.Get (smart.api)'
2022-12-01 20:12:52.533 +01:00 [DBG] Connection id "0HMMJPUDTN645" completed keep alive response.
2022-12-01 20:12:52.534 +01:00 [DBG] 'SmartContext' disposed.
2022-12-01 20:12:52.535 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5011/Image/type/1 application/json;+charset=utf-8 40 - 200 - application/json;+charset=utf-8 163.6986ms
2022-12-01 20:12:52.536 +01:00 [DBG] Connection id "0HMMJPUDTN645", Request id "0HMMJPUDTN645:00000002": started reading request body.
2022-12-01 20:12:52.537 +01:00 [DBG] Connection id "0HMMJPUDTN645", Request id "0HMMJPUDTN645:00000002": done reading request body.
